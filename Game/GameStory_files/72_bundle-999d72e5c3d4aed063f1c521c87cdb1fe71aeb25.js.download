webpackJsonp([72,82,83,123],{"+X7E":function(e,t,n){var i=n("ZluR");"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0};o.transform=void 0,o.insertInto=void 0;n("0tV6")(i,o);i.locals&&(e.exports=i.locals)},"4N07":function(e,t,n){e.exports=n.p+"banner-onboarding-999d72e5c3d4aed063f1c521c87cdb1fe71aeb25.svg"},BS4b:function(e,t,n){"use strict";(function(e){var i=n("gcQM"),o=function(t){var n=t.messages,o=t.height,s=t.resendMessage;return e.createElement("div",{className:"pt-16 h-flex-column"},n.map(function(t,n){return e.createElement(i.a,{key:n,message:t,height:o,resendMessage:s})}))};t.a=o}).call(t,n("ccIB"))},CgDZ:function(e,t,n){function i(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"./app":["hqmG"],"./app.js":["hqmG"],"./canvas/canvas":["gp2O",76],"./canvas/canvas.js":["gp2O",76],"./canvas/contextMenu":["1M8a",161],"./canvas/contextMenu.js":["1M8a",161],"./canvas/copyPaste":["d407"],"./canvas/copyPaste.js":["d407"],"./canvas/layout":["TEdV",125],"./canvas/layout.js":["TEdV",125],"./canvas/mapView":["Rq/x",77],"./canvas/mapView.js":["Rq/x",77],"./canvas/views/block":["cQwG",94],"./canvas/views/block.js":["cQwG",94],"./canvas/views/draggable":["wQol",160],"./canvas/views/draggable.js":["wQol",160],"./canvas/views/editable":["2UzH",105],"./canvas/views/editable.js":["2UzH",105],"./canvas/views/editableBlock":["fGk7",159],"./canvas/views/editableBlock.js":["fGk7",159],"./canvas/views/graphics":["t8zp"],"./canvas/views/graphics.js":["t8zp"],"./canvas/views/imageBlock":["7RHa"],"./canvas/views/imageBlock.js":["7RHa"],"./canvas/views/resizable":["2J63",158],"./canvas/views/resizable.js":["2J63",158],"./canvas/views/selectable":["tCwE",157],"./canvas/views/selectable.js":["tCwE",157],"./canvas/views/vboundary":["7DNH"],"./canvas/views/vboundary.js":["7DNH"],"./canvas/views/vconnection":["xAzy",75],"./canvas/views/vconnection.js":["xAzy",75],"./canvas/views/vconnectionEditor":["vxEF",156],"./canvas/views/vconnectionEditor.js":["vxEF",156],"./canvas/views/vconnectionHandler":["VQwZ",75],"./canvas/views/vconnectionHandler.js":["VQwZ",75],"./canvas/views/vgenericNode":["Vw2l",74],"./canvas/views/vgenericNode.js":["Vw2l",74],"./canvas/views/vnode":["NCMo",74],"./canvas/views/vnode.js":["NCMo",74],"./canvas/views/vnodeIcon":["UeFO",155],"./canvas/views/vnodeIcon.js":["UeFO",155],"./canvas/views/vnodeImage":["HM34"],"./canvas/views/vnodeImage.js":["HM34"],"./canvas/views/vnodeVideo":["Qy9x",154],"./canvas/views/vnodeVideo.js":["Qy9x",154],"./canvas/views/vroot":["Wp5U",84],"./canvas/views/vroot.js":["Wp5U",84],"./canvas/views/vrootChild":["rX76",153],"./canvas/views/vrootChild.js":["rX76",153],"./mm/plugins/wundermap":["boRQ",71],"./mm/plugins/wundermap.js":["boRQ",71],"./models/attachment":["j1ii",152],"./models/attachment.js":["j1ii",152],"./models/boundary":["qlsV"],"./models/boundary.js":["qlsV"],"./models/boundaryStyle":["xfYt"],"./models/boundaryStyle.js":["xfYt"],"./models/buffer":["1cfn"],"./models/buffer.js":["1cfn"],"./models/change":["TKta",81],"./models/change.js":["TKta",81],"./models/chatModel":["9Oqg"],"./models/chatModel.js":["9Oqg"],"./models/connectionModel":["/dW8",99],"./models/connectionModel.js":["/dW8",99],"./models/font":["6bYh"],"./models/font.js":["6bYh"],"./models/iconModel":["q3Rn",151],"./models/iconModel.js":["q3Rn",151],"./models/ideaComment":["ZfKP",150],"./models/ideaComment.js":["ZfKP",150],"./models/ideaImage":["oMUV",149],"./models/ideaImage.js":["oMUV",149],"./models/ideaProperty":["3Kh2",148],"./models/ideaProperty.js":["3Kh2",148],"./models/ideaVideo":["Kh9o",147],"./models/ideaVideo.js":["Kh9o",147],"./models/ideaVote":["00kP"],"./models/ideaVote.js":["00kP"],"./models/mapTheme":["r+xB"],"./models/mapTheme.js":["r+xB"],"./models/node":["HqoD",86],"./models/node.js":["HqoD",86],"./models/poller":["ahzF",146],"./models/poller.js":["ahzF",146],"./models/server":["jmxU",124],"./models/server.js":["jmxU",124],"./models/style":["FKf5"],"./models/style.js":["FKf5"],"./models/task":["AGfX",145],"./models/task.js":["AGfX",145],"./models/tree":["fSlT",85],"./models/tree.js":["fSlT",85],"./models/userModel":["gz1n"],"./models/userModel.js":["gz1n"],"./ui/attachmentViewer/view":["jMx0",106],"./ui/attachmentViewer/view.js":["jMx0",106],"./ui/boundaries":["1umx",69],"./ui/boundaries.js":["1umx",69],"./ui/customizeBoundary":["1QqJ",102],"./ui/customizeBoundary.js":["1QqJ",102],"./ui/customizeStyle":["UObq",92],"./ui/customizeStyle.js":["UObq",92],"./ui/doodling":["rg7Z",113],"./ui/doodling.js":["rg7Z",113],"./ui/filter":["QHRq",80],"./ui/filter.js":["QHRq",80],"./ui/footer":["k1IG"],"./ui/footer.js":["k1IG"],"./ui/footerPublic":["geal",144],"./ui/footerPublic.js":["geal",144],"./ui/header":["WGdr",79],"./ui/header.js":["WGdr",79],"./ui/hints":["qNKU"],"./ui/hints.js":["qNKU"],"./ui/history/history":["tt9h",65],"./ui/history/history.js":["tt9h",65],"./ui/history/revisionsBrowser":["i9TI",73],"./ui/history/revisionsBrowser.js":["i9TI",73],"./ui/history/revisionsSlider":["Lggz",73],"./ui/history/revisionsSlider.js":["Lggz",73],"./ui/history/slider":["Dxm5",143],"./ui/history/slider.js":["Dxm5",143],"./ui/history/utils":["OgPf",73],"./ui/history/utils.js":["OgPf",73],"./ui/menu":["qlDW"],"./ui/menu.js":["qlDW"],"./ui/message":["62Jj",142],"./ui/message.js":["62Jj",142],"./ui/onboarding/hintsPopover":["Hnw4",83],"./ui/onboarding/hintsPopover.js":["Hnw4",83],"./ui/onboarding/progressPopover":["fGUG",123],"./ui/onboarding/progressPopover.js":["fGUG",123],"./ui/onboarding/tutorial":["FlJR",82],"./ui/onboarding/tutorial.js":["FlJR",82],"./ui/options":["4KFD"],"./ui/options.js":["4KFD"],"./ui/presentation/controls":["INsm",141],"./ui/presentation/controls.js":["INsm",141],"./ui/presentation/player":["izkM",140],"./ui/presentation/player.js":["izkM",140],"./ui/presentation/presentation":["yj88",114],"./ui/presentation/presentation.js":["yj88",114],"./ui/presentation/slideshow":["qQu+",96],"./ui/presentation/slideshow.js":["qQu+",96],"./ui/preview":["/t6o",89],"./ui/preview.js":["/t6o",89],"./ui/print/print":["7Qzd",139],"./ui/print/print.js":["7Qzd",139],"./ui/sidebar":["qmQO",78],"./ui/sidebar.js":["qmQO",78],"./ui/sidebar/attachmentsWidget":["iy3A",104],"./ui/sidebar/attachmentsWidget.js":["iy3A",104],"./ui/sidebar/boundariesWidget":["49TO",122],"./ui/sidebar/boundariesWidget.js":["49TO",122],"./ui/sidebar/colorsWidget":["zDP6",112],"./ui/sidebar/colorsWidget.js":["zDP6",112],"./ui/sidebar/commentsWidget":["L/YL",115],"./ui/sidebar/commentsWidget.js":["L/YL",115],"./ui/sidebar/formatWidget":["6B3d",111],"./ui/sidebar/formatWidget.js":["6B3d",111],"./ui/sidebar/iconsWidget":["3sJ7",91],"./ui/sidebar/iconsWidget.js":["3sJ7",91],"./ui/sidebar/iconsWidgetExpanded/icon":["PlM2",138],"./ui/sidebar/iconsWidgetExpanded/icon.js":["PlM2",138],"./ui/sidebar/iconsWidgetExpanded/iconLibrary":["j0/H",121],"./ui/sidebar/iconsWidgetExpanded/iconLibrary.js":["j0/H",121],"./ui/sidebar/iconsWidgetExpanded/iconsWidgetExpanded":["ugn0",97],"./ui/sidebar/iconsWidgetExpanded/iconsWidgetExpanded.js":["ugn0",97],"./ui/sidebar/imagesWidget":["ZjT+",87],"./ui/sidebar/imagesWidget.js":["ZjT+",87],"./ui/sidebar/linksWidget":["079/",110],"./ui/sidebar/linksWidget.js":["079/",110],"./ui/sidebar/notesWidget":["G8SJ",109],"./ui/sidebar/notesWidget.js":["G8SJ",109],"./ui/sidebar/stylesWidget":["YQ4/",120],"./ui/sidebar/stylesWidget.js":["YQ4/",120],"./ui/sidebar/tabbedWidgetContainer":["twRW",119],"./ui/sidebar/tabbedWidgetContainer.js":["twRW",119],"./ui/sidebar/tasksWidget":["UWmw",103],"./ui/sidebar/tasksWidget.js":["UWmw",103],"./ui/sidebar/videosWidget":["cdGT",88],"./ui/sidebar/videosWidget.js":["cdGT",88],"./ui/sidebar/widget":["A9ap",137],"./ui/sidebar/widget.js":["A9ap",137],"./ui/sidebarPublic":["6DjJ",136],"./ui/sidebarPublic.js":["6DjJ",136],"./ui/slide":["GgL9",135],"./ui/slide.js":["GgL9",135],"./ui/styles":["H+A+",67],"./ui/styles.js":["H+A+",67],"./ui/template/template":["BbRJ",70],"./ui/template/template.js":["BbRJ",70],"./ui/template/templatePopover":["FmvE",134],"./ui/template/templatePopover.js":["FmvE",134],"./ui/themes":["uiuD",66],"./ui/themes.js":["uiuD",66],"./ui/users":["ePfb",133],"./ui/users.js":["ePfb",133],"./ui/wheelScroll":["vQBY",108],"./ui/wheelScroll.js":["vQBY",108],"./ui/zoom":["sNkp",101],"./ui/zoom.js":["sNkp",101],"./utils/constants":["67vC"],"./utils/constants.js":["67vC"],"./utils/customEvents":["xUHV"],"./utils/customEvents.js":["xUHV"],"./utils/googleSearch":["vLs6",132],"./utils/googleSearch.js":["vLs6",132],"./utils/imageSearch":["aVfQ",95],"./utils/imageSearch.js":["aVfQ",95],"./utils/images":["+ptD",131],"./utils/images.js":["+ptD",131],"./utils/layouter":["oxsE",130],"./utils/layouter.js":["oxsE",130],"./utils/math":["3Ox4"],"./utils/math.js":["3Ox4"],"./utils/meistertask/helpers":["H1Wq",129],"./utils/meistertask/helpers.js":["H1Wq",129],"./utils/meistertask/meistertask":["MSez",93],"./utils/meistertask/meistertask.js":["MSez",93],"./utils/meistertask/meistertask_picker":["e4gE",128],"./utils/meistertask/meistertask_picker.js":["e4gE",128],"./utils/meistertask/project_creator":["r3wk",107],"./utils/meistertask/project_creator.js":["r3wk",107],"./utils/searchWrapper":["wvK4",127],"./utils/searchWrapper.js":["wvK4",127],"./utils/skoletube/attachments/attachments":["PXir",68],"./utils/skoletube/attachments/attachments.js":["PXir",68],"./utils/skoletube/attachments/search":["4B9/",118],"./utils/skoletube/attachments/search.js":["4B9/",118],"./utils/skoletube/attachments/searchWrapper":["WvAO",100],"./utils/skoletube/attachments/searchWrapper.js":["WvAO",100],"./utils/skoletube/images/search":["MQVt",117],"./utils/skoletube/images/search.js":["MQVt",117],"./utils/skoletube/mediaSearch":["Z6lC",126],"./utils/skoletube/mediaSearch.js":["Z6lC",126],"./utils/skoletube/skoletube":["TMGa",64],"./utils/skoletube/skoletube.js":["TMGa",64],"./utils/skoletube/videos/search":["i5N/",116],"./utils/skoletube/videos/search.js":["i5N/",116],"./utils/videoHelpers":["vu0f"],"./utils/videoHelpers.js":["vu0f"],"./utils/videoSearch":["HTWB",98],"./utils/videoSearch.js":["HTWB",98]};i.keys=function(){return Object.keys(o)},i.id="CgDZ",e.exports=i},DrJx:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("yviC"),f=function(t){function n(e){var t;return o(this,n),t=a(this,c(n).call(this,e)),t.state={user:users.findByID(t.props.userId)},t}return u(n,t),r(n,[{key:"componentWillReceiveProps",value:function(e){this.setState({user:users.findByID(e.userId)})}},{key:"render",value:function(){var t="rad-100% justify-center h-flex-row p-r "+this.props.className,n=this.state.user.isOnline()?"s-24":"o-40 o-hover-100 s-24",i="".concat(this.state.user.isOnline()?" (online)":" (offline)");return this.props.enabled?(n+=" h-cp",i+=" - ".concat(I18n.t("js.click_to_send_message"))):n+=" h-cd",e.createElement("div",{className:t},this.props.unread>0?e.createElement("span",{className:"chat-alert"},this.props.unread):null,e.createElement(d.a,{user:this.state.user,className:n,tooltip:i}))}}]),n}(e.Component);f.defaultProps={className:""},t.a=f}).call(t,n("ccIB"))},FlJR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,i){function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var a,l,c,u=n("wa7H"),p=n.n(u),d=n("OoKq"),f=n.n(d),h=n("fGUG"),m=n("Hnw4"),b=n("k1IG"),v=n("h7V/"),y=n("TjA0"),g=n("SZxL"),w=[CustomEvents.SHARING_POPOVER_OPENED,CustomEvents.PRESENTATION_STARTED],E=[CustomEvents.SHARING_POPOVER_CLOSED,CustomEvents.PRESENTATION_STOPPED],_=[CustomEvents.ATTACHMENT_UPLOADED,CustomEvents.HISTORY_MODE_CLOSED,CustomEvents.PRESENTATION_STOPPED,CustomEvents.TOPIC_DROPPED,CustomEvents.TRAINING_TIP_SHOWN],O=[CustomEvents.WIDGET_NOTES_SELECTED,CustomEvents.WIDGET_ICONS_SELECTED,CustomEvents.WIDGET_LINKS_SELECTED,CustomEvents.WIDGET_ATTACHMENTS_SELECTED,CustomEvents.WIDGET_IMAGES_SELECTED,CustomEvents.EXPORT_DLG_OPENED,CustomEvents.HISTORY_MODE_STARTED],S={},I={name:I18n.t("js.onboarding.basic.name"),overlays:["map_header","canvas","map_footer"],hideOuts:["map_options","sidebar"],steps:[{event:CustomEvents.TUTORIAL_STARTED,title:I18n.t("js.onboarding.basic.welcome.title"),description:I18n.t("js.onboarding.basic.welcome.description"),skip:{action:function(){return App.trigger(CustomEvents.TUTORIAL_INTRO_SHOWN)},enabled:!0,wording:I18n.t("js.get_started")}},{event:CustomEvents.TUTORIAL_INTRO_SHOWN,title:I18n.t("js.add_a_title"),description:I18n.t("js.onboarding.basic.add_title.description",{key:"<kbd>ENTER</kbd>"}),beforeShow:function(){canvas.root.dcontent.isEditing()||(canvas.root.isSelected()||canvas.root.select(),canvas.onEdit())}},{event:CustomEvents.ROOT_RENAMED,title:I18n.t("js.add_an_idea",{v0:""}),description:I18n.t("js.onboarding.basic.add_topic.description",{v1:"<kbd>TAB</kbd>",v2:"<kbd>ENTER</kbd>"})},{event:CustomEvents.TOPIC_INSERTED,title:I18n.t("js.onboarding.basic.add_sibling_topic.title"),description:I18n.t("js.onboarding.basic.add_sibling_topic.description",{key:"<kbd>ENTER</kbd>"})},{event:CustomEvents.SIBLING_ADDED,title:I18n.t("js.onboarding.basic.drag_drop.title"),description:I18n.t("js.onboarding.basic.drag_drop.description")}]},j={name:I18n.t("js.onboarding.sidebar.name"),overlays:["map_header","canvas","map_footer"],hideOuts:["map_options"],steps:[{event:CustomEvents.TUTORIAL_STARTED,title:I18n.t("js.onboarding.sidebar.welcome.title"),description:I18n.t("js.onboarding.sidebar.welcome.description"),beforeShow:function(){sideBar.show(!0,!0),[sideBar.colors,sideBar.videos,sideBar.tasks].each(function(e){return e.show()})},skip:{action:function(){return App.trigger(CustomEvents.TUTORIAL_INTRO_SHOWN)},enabled:!0,wording:I18n.t("js.get_started")}},{event:CustomEvents.TUTORIAL_INTRO_SHOWN,title:I18n.t("js.onboarding.sidebar.add_image.title"),description:I18n.t("js.onboarding.sidebar.add_image.description"),opener:"#btn_images",skip:{action:function(){return App.trigger(CustomEvents.WUNDERBILD_ADDED)},event:CustomEvents.WIDGET_IMAGES_SELECTED,enabled:!1,feedback:!0,wording:I18n.t("js.continue")}},{event:CustomEvents.WUNDERBILD_ADDED,title:I18n.t("js.notes"),description:I18n.t("js.onboarding.sidebar.create_note.description"),opener:"#btn_notes",skip:{action:function(){return App.trigger(CustomEvents.NOTE_CHANGED)},event:CustomEvents.WIDGET_NOTES_SELECTED,enabled:!1,feedback:!0,wording:I18n.t("js.continue")}},{event:CustomEvents.NOTE_CHANGED,title:I18n.t("js.links"),description:I18n.t("js.onboarding.sidebar.add_link.description"),opener:"#btn_links",skip:{action:function(){return App.trigger(CustomEvents.LINK_CHANGED)},event:CustomEvents.WIDGET_LINKS_SELECTED,enabled:!1,feedback:!0,wording:I18n.t("js.continue")}},{event:CustomEvents.LINK_CHANGED,title:I18n.t("js.attachments"),description:I18n.t("js.onboarding.sidebar.add_attachment.description"),opener:"#btn_attachments",skip:{action:function(){return App.trigger(CustomEvents.ATTACHMENT_UPLOADED)},event:CustomEvents.WIDGET_ATTACHMENTS_SELECTED,enabled:!1,feedback:!0,wording:I18n.t("js.finish")}}]},k={name:I18n.t("js.onboarding.footer.name"),overlays:["map_header","canvas"],hideOuts:["map_options","sidebar"],steps:[{event:CustomEvents.TUTORIAL_STARTED,title:I18n.t("js.onboarding.footer.welcome.title"),description:I18n.t("js.onboarding.footer.welcome.description"),skip:{action:function(){return App.trigger(CustomEvents.TUTORIAL_INTRO_SHOWN)},enabled:!0,wording:I18n.t("js.get_started")}},{event:CustomEvents.TUTORIAL_INTRO_SHOWN,title:I18n.t("js.onboarding.footer.invite_collaborators.title"),description:I18n.t("js.onboarding.footer.invite_collaborators.description"),opener:"#btn_share",skip:{action:function(){},enabled:!1,feedback:!0,wording:I18n.t("js.continue")}},{event:CustomEvents.SHARING_POPOVER_CLOSED,title:I18n.t("js.onboarding.footer.export_map.title"),description:I18n.t("js.onboarding.footer.export_map.description"),opener:"#btn_export",skip:{action:function(){return Windows.close("export")},event:CustomEvents.EXPORT_DLG_OPENED,enabled:!1,feedback:!0,wording:I18n.t("js.continue")}},{event:CustomEvents.EXPORT_DLG_CLOSED,title:I18n.t("js.onboarding.footer.history_view.title"),description:I18n.t("js.onboarding.footer.history_view.description"),opener:"#btn_togglehistory",skip:{action:function(){return b.default.hideBar(b.default.activeBar)},event:CustomEvents.HISTORY_MODE_STARTED,enabled:!1,feedback:!0,wording:I18n.t("js.finish")}}]},C={name:I18n.t("js.onboarding.presentation.name"),overlays:["map_header","canvas"],hideOuts:["map_options","sidebar"],onFinish:function(){return b.default.hideBar(b.default.activeBar)},steps:[{event:CustomEvents.TUTORIAL_STARTED,title:I18n.t("js.onboarding.presentation.welcome.title"),description:I18n.t("js.onboarding.presentation.welcome.description"),opener:"#btn_toggleslideshow"},{event:CustomEvents.PRESENTATION_MODE_STARTED,title:I18n.t("js.auto_create_presentation"),description:I18n.t("js.onboarding.presentation.create_auto_presentation.description"),opener:"#btn_auto_presentation_icon"},{event:CustomEvents.SLIDE_CREATED,title:I18n.t("js.play_presentation"),description:I18n.t("js.onboarding.presentation.play_presentation.description"),opener:"#btn_start_slideshow"}]},T={name:I18n.t("js.onboarding.meistertask.name"),overlays:["map_header","canvas"],hideOuts:["map_options","sidebar"],onFinish:function(){return b.default.hideBar(b.default.activeBar)},steps:[{event:CustomEvents.TUTORIAL_STARTED,title:I18n.t("js.onboarding.meistertask.welcome.title"),description:I18n.t("js.onboarding.meistertask.welcome.description"),opener:"#btn_togglemeistertask"},{event:CustomEvents.MEISTERTASK_BAR_OPENED,title:I18n.t("js.onboarding.meistertask.video_tutorial.title"),description:I18n.t("js.onboarding.meistertask.video_tutorial.description",{v1:'<a target="_blank" href="https://www.youtube.com/watch?v=c9P0Lq76Tmo">',v2:"</a>"}),skip:{action:function(){return App.trigger(CustomEvents.MEISTERTASK_SHOWN)},enabled:!0,feedback:!0,wording:I18n.t("js.continue")}},{event:CustomEvents.MEISTERTASK_SHOWN,title:I18n.t("js.onboarding.meistertask.finish.title",{icon:'<div class="h-iblock">'.concat(MM.ui.icon({name:"like",size:14,color:"grey"}),"</div>")}),description:I18n.t("js.onboarding.meistertask.finish.description",{v1:'<a target="_blank" href="https://www.mindmeister.com/training">',v2:"</a>"}),skip:{action:function(){return App.trigger(CustomEvents.TRAINING_TIP_SHOWN)},enabled:!0,feedback:!0,wording:I18n.t("js.finish")}}]},x={basic:I,sidebar:j,footer:k,presentation:C,meistertask:T},M=Object.keys(x),N=function(e){f()(e,function(e){e.style.position="relative";var t=new Element("div",{className:"pulsating-overlay h-a-center s-60"}).insert(new Element("div",{className:"fx-pulse-once fx-infinite s-100% b-4 bc-purple rad-100%"}).insert(new Element("div",{className:"s-100% rad-100% bg-white o-40"})));e.appendChild(t)})},A=function(e){f()(e,function(e){e.style.position="";var t=e.querySelector(".pulsating-overlay");t&&t.remove()})},P=function(e){e.stop(),B(App.getCustomEventName(e),e.memo)},D=function(t){e.render(i.createElement(m.default,r({close:z,progressCounter:S.part.steps.length,currentPart:{name:S.part.name,index:S.partIndex+1}},t)),c)},R=function(e){var t=App.getCustomEventName(e),n=S.part.steps[S.currentIndex];n.skip&&n.skip.event===t&&D({progress:S.currentIndex,currentStep:o({},n,{skip:o({},n.skip,{enabled:!0})})})},W=function(){var e=S.part.steps,t=e[S.currentIndex],n=e[S.previousIndex],i=n&&(!n.skip||n.skip.feedback);i&&D({progress:S.previousIndex,currentStep:n,showFeedback:i}),setTimeout(function(){D({progress:S.currentIndex,currentStep:t})},i?1500:0),t.beforeShow&&t.beforeShow(),t.opener&&N(document.querySelectorAll(t.opener)),n&&n.opener&&A(document.querySelectorAll(n.opener))},B=function(e,t){var n=p()(S.part.steps,function(t){return t.event===e}),i=n-S.currentIndex;if(!(S.currentIndex>=n||i>1)){switch(e){case CustomEvents.PRESENTATION_MODE_STARTED:App.ui.SlideShow&&App.ui.SlideShow.list.length>0&&n++}S.previousIndex=S.currentIndex,S.currentIndex=n;var o=M[S.partIndex];Amplitude.logEvent("tutorial_".concat(o,"_step_").concat(S.currentIndex+1)),t.callback&&"function"==typeof t.callback&&t.callback(),W()}},L=function(){var e=S.part.steps[S.currentIndex];e&&e.opener&&A(document.querySelectorAll(e.opener)),S.part.steps.each(function(e){return App.unsubscribe(e.event,P)}),w.each(function(e){return App.unsubscribe(e,Y)}),E.each(function(e){return App.unsubscribe(e,$)}),_.each(function(e){return App.unsubscribe(e,H)}),O.each(function(e){return App.unsubscribe(e,R)}),S.currentIndex=-1,q()},H=function(){S.previousIndex=S.currentIndex,W(),S.part.onFinish&&S.part.onFinish(),setTimeout(function(){z(),S.part.finished=!0,U(),ne(),a.show()},1500)},U=function(){var e=M.filter(function(e){return x[e].finished});v.a.save({name:"finished_chapters",value:e.join(",")})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};v.a.get("finished_chapters",function(t){t&&t.value.split(",").each(function(e){return x[e].finished=!0}),ne(),ee(),e()})},z=function(){K(),Q(S.part.hideOuts),MM.ui.enableButton(a.opener),L(),App.trigger(CustomEvents.TUTORIAL_STOPPED)},V=function(){c=new Element("div",{className:"popover tutorial ph-20 pv-15 z-199",style:"transition-property: all"}),G(),document.body.appendChild(c)},G=function(){if(c){var e={x:15,y:UI.Registry.viewportOffset.bottom+15};c.style.left=e.x+"px",c.style.bottom=e.y+"px"}},q=function(){e.unmountComponentAtNode(c),c.remove()},Y=function(){c.style.opacity=.5},$=function(){c.style.opacity=1},Z=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).each(function(e){var t=new Element("div",{className:"overlay-tutorial z-1 p-a at-0 al-0 w-100% h-100% o-50 bg-black"});mm$(e).appendChild(t)})},K=function(){$$(".overlay-tutorial").invoke("remove")},J=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).each(function(e){return hide(mm$(e))})},Q=function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).each(function(e){return show(mm$(e))})},X=function(e){S.part=x[e],S.part&&(S.partIndex=M.indexOf(e),V(),K(),Z(S.part.overlays),J(S.part.hideOuts),S.part.steps.each(function(e){return App.subscribe(e.event,P)}),w.each(function(e){return App.subscribe(e,Y)}),E.each(function(e){return App.subscribe(e,$)}),_.each(function(e){return App.subscribe(e,H)}),O.each(function(e){return App.subscribe(e,R)}),MM.ui.disableButton(a.opener),App.trigger(CustomEvents.TUTORIAL_STARTED))},ee=function(){var t=M.map(function(e){var t=x[e];return{name:t.name,key:e,finished:t.finished}});e.render(i.createElement(h.default,{parts:t,onListClick:function(e){return se.start({part:e.key})},onRemove:ie,close:function(){return a.close()}}),a.widgetContainer)},te=function(e){a=new g.c("onboarding_progress",{offset:[0,-13],onShow:ee}),removeClassName(mm$("onboarding-container"),"h-hidden"),F(e)},ne=function(){var e=M.filter(function(e){return!x[e].finished}).length;0===e?l&&(l.remove(),l=null):(l||(l=new Element("div",{className:"h-flex-row justify-center p-a bg-red s-16 rad-100% fs-10",style:"top: -8px; right: -8px;"}),a.opener.appendChild(l)),l.textContent=e)},ie=function(){y.a.confirm("<h2>".concat(I18n.t("js.are_you_sure"),"</h2><p>").concat(I18n.t("js.onboarding.remove_warning"),"</p>"),{cancel:function(e){e.close(),oe()},cancelLabel:I18n.t("js.yes_remove"),okLabel:I18n.t("js.no_keep_it"),windowParameters:{width:300}}),Amplitude.logEvent("tutorial_opt_out")},oe=function(){addClassName(mm$("onboarding-container"),"h-hidden"),v.a.save({name:"onboarding",value:"hide"}),Amplitude.logEvent("tutorial_opt_out_confirmed")},se={init:function(e){te(e)},start:function(e){var t=this;if(e=o({part:"basic",autoStart:!1},e),e.autoStart&&x[e.part].finished)return void App.trigger(CustomEvents.TUTORIAL_STOPPED);X(e.part),UI.Registry.add(this),UI.Registry.notify(this,"show");var n=function e(){UI.Registry.remove(t),App.unsubscribe(CustomEvents.TUTORIAL_STOPPED,e)};App.subscribe(CustomEvents.TUTORIAL_STOPPED,n)},onResize:function(){G()}};t.default=se}.call(t,n("x9tB"),n("ccIB"))},Gotj:function(e,t,n){(function(t){(function(){var n,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n("rH1J"))},"HJ+y":function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("DrJx"),f=n("aEw3"),h=n("worM"),m=n("bPcH"),b=n("Z8UF"),v=n("9Oqg"),y=function(t){function n(e){var t;return o(this,n),t=a(this,l(n).call(this,e)),e.users.each(function(e){App.subscribe(CustomEvents.CHAT_UPDATE+"_"+e.id,function(){t.forceUpdate()}),v.default.getOlderMessages(e.id)},0),t.state={activeChat:0},t.setActiveChat=t.setActiveChat.bind(c(t)),t.unsetActiveChat=t.unsetActiveChat.bind(c(t)),t}return u(n,t),r(n,[{key:"setActiveChat",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.setState({activeChat:t}),v.default.markAsRead(t)}},{key:"unsetActiveChat",value:function(){this.setState({activeChat:null})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.users.each(function(e){App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+e.id,function(){t.forceUpdate()})},0),e.users.each(function(e){App.subscribe(CustomEvents.CHAT_UPDATE+"_"+e.id,function(){t.forceUpdate()})},0)}},{key:"componentWillUnmount",value:function(){var e=this;this.props.users.each(function(t){App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+t.id,function(){e.forceUpdate()})},0)}},{key:"renderNotification",value:function(){var t=this.props.users.reduce(function(e,t){return e+v.default.getUnreadMessages(t.id).length},0);return t>0?e.createElement("span",{className:"chat-alert"},t):null}},{key:"renderContent",value:function(){var t=this;if(this.state.activeChat){var n=v.default.getChat(this.state.activeChat);return e.createElement(b.a,{messages:n.messages,userID:this.state.activeChat})}var i=this.props.users.map(function(n){var i=n.id,o=v.default.getUnreadMessages(i).length;return{icon:e.createElement(d.a,{className:"mr-8px",unread:o,userId:i,enabled:t.props.enabled}),label:n.name,className:"ellipsis",onClick:function(e){return t.setActiveChat(e,i)}}});return e.createElement(m.a,{inputClassName:"mh-15 mb-10",filterableAttribute:"label"},e.createElement(h.a,{items:i,closePopoverOnItemClick:!1,className:"minw-200px maxw-320px maxh-300px h-overflow-y"}))}},{key:"render",value:function(){return e.createElement(f.a,{position:"above",canAutoPosition:!1,className:"sections",opener:e.createElement("div",{className:"h-flex-row justify-center s-24 fs-10 b-1 rad-100% bc-grey3 c-grey-light mh-4px h-cp"},this.renderNotification(),"+"+this.props.users.length),onClose:this.unsetActiveChat},this.renderContent())}}]),n}(e.Component);t.a=y}).call(t,n("ccIB"))},Hnw4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("YcUm"),f=(n.n(d),n("YmTu")),h=function(t){function n(e){var t;return o(this,n),t=a(this,c(n).call(this,e)),t.state={},t}return u(n,t),r(n,[{key:"componentDidMount",value:function(){this._tooltips=MM.ui.ToolTips.touchSafe({el:this.container})}},{key:"componentDidUpdate",value:function(){this._tooltips=MM.ui.ToolTips.touchSafe({el:this.container})}},{key:"componentWillReceiveProps",value:function(e){this.setState({showSkipHint:e.showSkipHint})}},{key:"renderSkipButton",value:function(t){var n=this;if(t){var i=t.enabled?t.action:function(){return n.setState({showSkipHint:!0})},o="bg-purple bc-purple small"+(t.enabled?"":" disabled tooltip above"),s=t.enabled?"":I18n.t("js.please_click_pulsating_element");return e.createElement("div",{className:"mt-15"},e.createElement("button",{className:o,title:s,onClick:i},t.wording),this.state.showSkipHint?e.createElement(d.Motion,{defaultStyle:{opacity:0},style:{opacity:Object(d.spring)(1)}},function(t){return e.createElement("div",{className:"h-flex-row c-grey2 fs-12 mt-15",style:t},e.createElement(f.a,{className:"mr-5",opts:{name:"info",size:12}}),s)}):null)}}},{key:"renderProgressBars",value:function(){for(var t=[],n=0;n<this.props.progressCounter;n++){var i=n<=this.props.progress?"purple":"grey4",o="h-2 bg-"+i+(n+1<this.props.progressCounter?" mr-5":"");t.push(e.createElement("div",{key:n,className:o}))}return t}},{key:"render",value:function(){var t=this,n=this.props,i=n.currentPart,o=n.currentStep,s=n.progressCounter,r=n.close,a=n.showFeedback,l={feedbackDefault:{opacity:0,scale:0},contentDefault:{opacity:1},feedback:{opacity:Object(d.spring)(a?1:0),scale:Object(d.spring)(a?1:3)},content:{opacity:Object(d.spring)(a?.1:1)}};return e.createElement("div",{ref:function(e){return t.container=e},className:"h-flex-column maxw-260"},e.createElement("div",{className:"h-flex-row c-purple fw-700"},e.createElement("div",{className:"h-flex-row justify-center s-22 rad-100% b-2 bc-purple fs-12 mr-8"},i.index),e.createElement("span",null,i.name),e.createElement(f.a,{className:"ml-auto",opts:{name:"close",size:12,color:"grey3"},onClick:function(){return r()}})),e.createElement("div",{className:"g-"+s+" h-flex-row mt-10 mb-25"},this.renderProgressBars()),e.createElement("div",{className:"p-r"},e.createElement(d.Motion,{defaultStyle:l.feedbackDefault,style:l.feedback},function(t){return e.createElement(f.a,{className:"h-a-center",style:{zIndex:-1},opts:{name:"checkmark",color:"white",size:48,parentClasses:"bg-green rad-100% p-10",parentStyles:"opacity: ".concat(t.opacity,"; transform: scale(").concat(t.scale,");")}})}),e.createElement(d.Motion,{defaultStyle:l.contentDefault,style:l.content},function(n){return e.createElement("div",{className:"z-1",style:n},e.createElement("p",{className:"mb-10 fs-18 fw-500",dangerouslySetInnerHTML:{__html:o.title}}),e.createElement("p",{className:"c-grey-light",dangerouslySetInnerHTML:{__html:o.description}}),t.renderSkipButton(o.skip))})))}}]),n}(e.Component);t.default=h}.call(t,n("ccIB"))},KcBO:function(e,t,n){"use strict";function i(e,t,n){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(0!==n[i])return!1;var o="number"==typeof t[i]?t[i]:t[i].val;if(e[i]!==o)return!1}return!0}t.__esModule=!0,t.default=i,e.exports=t.default},Luvl:function(e,t,n){"use strict";function i(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}t.__esModule=!0,t.default=i,e.exports=t.default},NmCK:function(e,t,n){"use strict";function i(){}t.__esModule=!0,t.default=i;e.exports=t.default},OoKq:function(e,t){function n(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}e.exports=n},QWVU:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("BS4b"),f=n("atEJ"),h=n("ky7I"),m=function(t){function n(e){var t;return o(this,n),t=a(this,c(n).call(this,e)),t.height=0,t.stick=!0,t.stickToBottom=!0,t.state={loadingMessages:!0},t}return u(n,t),r(n,[{key:"componentDidMount",value:function(){this.wrapper.scrollTop=this.chat.offsetHeight,this.scrollToBottom(),this.setState({loadingMessages:!1})}},{key:"componentDidUpdate",value:function(){if(this.stick){if(this.height!==this.chat.offsetHeight&&!this.state.loadingMessages){var e=this.chat.offsetHeight-this.height;this.wrapper.scrollTop=e,this.stick=!1}}else this.stickToBottom&&(this.wrapper.scrollTop=this.chat.offsetHeight,this.stickToBottom=!1);this.height=this.chat.offsetHeight}},{key:"componentWillReceiveProps",value:function(){this.setState({loadingMessages:!1})}},{key:"scrollToBottom",value:function(){this.stickToBottom=!0}},{key:"render",value:function(){var t=this,n=this.props.loading?e.createElement(f.a,{size:24}):null;return e.createElement("div",{ref:function(e){return t.wrapper=e},className:"ph-5 bt-1 bb-1 bc-grey3  ph-12  h-overflow-y h-275"},e.createElement("div",{ref:function(e){return t.chat=e}},e.createElement(h.a,{onEnter:function(e){var n=e.previousPosition;e.currentPosition,e.event;null!==n&&"invisible"!==n&&(t.props.onScrollTop()?(t.stick=!0,t.setState({loadingMessages:!0})):t.setState({loadingMessages:!1}))}}),n,e.createElement(d.a,{resendMessage:this.props.resendMessage,messages:this.props.messages,height:275})))}}]),n}(e.Component);t.a=m}).call(t,n("ccIB"))},Rd93:function(e,t,n){"use strict";function i(e){return e}function o(e,t,n){function o(e,t){var n=y.hasOwnProperty(t)?y[t]:null;O.hasOwnProperty(t)&&a("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e&&a("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function c(e,n){if(n){a("function"!=typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),a(!t(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var i=e.prototype,s=i.__reactAutoBindPairs;n.hasOwnProperty(l)&&w.mixins(e,n.mixins);for(var r in n)if(n.hasOwnProperty(r)&&r!==l){var c=n[r],u=i.hasOwnProperty(r);if(o(u,r),w.hasOwnProperty(r))w[r](e,c);else{var p=y.hasOwnProperty(r),h="function"==typeof c,m=h&&!p&&!u&&!1!==n.autobind;if(m)s.push(r,c),i[r]=c;else if(u){var b=y[r];a(p&&("DEFINE_MANY_MERGED"===b||"DEFINE_MANY"===b),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",b,r),"DEFINE_MANY_MERGED"===b?i[r]=d(i[r],c):"DEFINE_MANY"===b&&(i[r]=f(i[r],c))}else i[r]=c}}}else;}function u(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in w;a(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var s=n in e;if(s){var r=g.hasOwnProperty(n)?g[n]:null;return a("DEFINE_MANY_MERGED"===r,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(e[n]=d(e[n],i))}e[n]=i}}}function p(e,t){a(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in t)t.hasOwnProperty(n)&&(a(void 0===e[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),e[n]=t[n]);return e}function d(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return p(o,n),p(o,i),o}}function f(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function h(e,t){var n=t.bind(e);return n}function m(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[i]=h(e,o)}}function b(e){var t=i(function(e,i,o){this.__reactAutoBindPairs.length&&m(this),this.props=e,this.context=i,this.refs=r,this.updater=o||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;a("object"==typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=s});t.prototype=new S,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],v.forEach(c.bind(null,t)),c(t,E),c(t,e),c(t,_),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),a(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in y)t.prototype[o]||(t.prototype[o]=null);return t}var v=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},g={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},w={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)c(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=s({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=s({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=d(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=s({},e.propTypes,t)},statics:function(e,t){u(e,t)},autobind:function(){}},E={componentDidMount:function(){this.__isMounted=!0}},_={componentWillUnmount:function(){this.__isMounted=!1}},O={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e,t)},isMounted:function(){return!!this.__isMounted}},S=function(){};return s(S.prototype,e.prototype,O),b}var s=n("W2+e"),r=n("zEob"),a=n("nTc3"),l="mixins";e.exports=o},Slta:function(e,t,n){(function(t){for(var i=n("raWP"),o="undefined"==typeof window?t:window,s=["moz","webkit"],r="AnimationFrame",a=o["request"+r],l=o["cancel"+r]||o["cancelRequest"+r],c=0;!a&&c<s.length;c++)a=o[s[c]+"Request"+r],l=o[s[c]+"Cancel"+r]||o[s[c]+"CancelRequest"+r];if(!a||!l){var u=0,p=0,d=[];a=function(e){if(0===d.length){var t=i(),n=Math.max(0,1e3/60-(t-u));u=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++p,callback:e,cancelled:!1}),p},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return a.call(o,e)},e.exports.cancel=function(){l.apply(o,arguments)},e.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=a,e.cancelAnimationFrame=l}}).call(t,n("GTd5"))},TOzf:function(e,t,n){"use strict";function i(e,t,n,i,s,r,a){var l=-s*(t-i),c=-r*n,u=l+c,p=n+u*e,d=t+p*e;return Math.abs(p)<a&&Math.abs(d-i)<a?(o[0]=i,o[1]=0,o):(o[0]=d,o[1]=p,o)}t.__esModule=!0,t.default=i;var o=[0,0];e.exports=t.default},TjA0:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return r});var i=n("67vC"),o=Class.create();o.keepMultiModalWindow=!1,o.hasEffectLib="undefined"!=typeof Effect,o.resizeEffectDuration=.4,o.prototype={initialize:function(){var e,t=0;arguments.length>0&&("string"==typeof arguments[0]?(e=arguments[0],t=1):e=arguments[0]?arguments[0].id:null),e||(e="window_"+(new Date).getTime());var n=$$("#".concat(e,".dialog"));n&&n.remove(),this.options=Object.extend({className:"dialog",blurClassName:null,minWidth:100,minHeight:20,userData:null,showEffect:o.hasEffectLib?Effect.Appear:Element.show,hideEffect:o.hasEffectLib?Effect.Fade:Element.hide,doNotNotifyHide:!1,showEffectOptions:{},hideEffectOptions:{afterFinish:function(){l.resetBodyOverflow()}},useEffects:!0,effectOptions:null,parent:document.body,title:"",url:null,onload:Prototype.emptyFunction,width:200,height:414,opacity:1,autoRecenter:!0,autoSize:!1,keymap:null,closeCallback:null,destroyOnClose:!1,gridX:1,gridY:1},arguments[t]||{}),MM.utils.loadCSS([(i.isRetina?"x2/":"")+"site/dialogs.css"]),this.options.blurClassName&&(this.options.focusClassName=this.options.className),void 0===this.options.top&&void 0===this.options.bottom&&(this.options.top=this._round(500*Math.random(),this.options.gridY)),void 0===this.options.left&&void 0===this.options.right&&(this.options.left=this._round(500*Math.random(),this.options.gridX)),this.options.effectOptions&&(Object.extend(this.options.hideEffectOptions,this.options.effectOptions),Object.extend(this.options.showEffectOptions,this.options.effectOptions),this.options.showEffect==Element.Appear&&(this.options.showEffectOptions.to=this.options.opacity)),o.hasEffectLib&&(this.options.showEffect==Effect.Appear&&(this.options.showEffectOptions.to=this.options.opacity),this.options.hideEffect==Effect.Fade&&(this.options.hideEffectOptions.from=this.options.opacity)),this.options.hideEffect==Element.hide&&(this.options.hideEffect=function(){Element.hide(this.element),this.options.destroyOnClose&&this.destroy()}.bind(this)),this.options.parent!=document.body&&(this.options.parent=$(this.options.parent)),this.options.keymap&&this.options.keymap.enable(),this.element=this._createWindow(e),this.element.win=this,this.eventOnLoad=this._getWindowBorderSize.bindAsEventListener(this),this.eventMouseDownContent=this.toFront.bindAsEventListener(this),this.eventResize=this._recenter.bindAsEventListener(this),this.content=$(this.element.id+"_content"),Event.observe(window,"load",this.eventOnLoad),Event.observe(window,"resize",this.eventResize),Event.observe(window,"scroll",this.eventResize),Event.observe(this.options.parent,"scroll",this.eventResize),this.setOpacity(this.options.opacity),this.options.zIndex&&this.setZIndex(this.options.zIndex),this.options.destroyOnClose&&this.setDestroyOnClose(!0),this._getWindowBorderSize(),this.width=this.options.width,this.height=this.options.height,this.visible=!1,this.constraint=!1,this.constraintPad={top:0,left:0,bottom:0,right:0},this.width&&this.height&&this.setSize(this.options.width,this.options.height,null,!0),this.setTitle(this.options.title),s.register(this)},destroy:function(){if(this._notify("onDestroy"),Event.stopObserving(this.content,"mousedown",this.eventMouseDownContent),Event.stopObserving(window,"load",this.eventOnLoad),Event.stopObserving(window,"resize",this.eventResize),Event.stopObserving(window,"scroll",this.eventResize),Event.stopObserving(this.content,"load",this.options.onload),this._oldParent){for(var e=this.getContent(),t=null,n=0;n<e.childNodes.length&&(t=e.childNodes[n],1!=t.nodeType);n++)t=null;t&&this._oldParent.appendChild(t),this._oldParent=null}this.sizer&&Event.stopObserving(this.sizer,"mousedown",this.eventMouseDown),this.options.url&&(this.content.src=null),"undefined"!=typeof canvas&&null!==canvas&&canvas.addFocus&&canvas.addFocus(),Element.remove(this.element),s.unregister(this)},getContent:function(){return this.content},setContent:function(e,t,n){var i=$(e);if(null==i)throw"Unable to find element '"+e+"' in DOM";this._oldParent=i.parentNode;t&&Element.getDimensions(i),n&&Position.cumulativeOffset(i);var o=this.getContent();this.setHTMLContent(""),o=this.getContent(),o.appendChild(i),i.show(),this.unfixHeight()},setHTMLContent:function(e){if(this.options&&this.options.url){this.content.src=null,this.options.url=null;var t='<div id="'+this.getId()+'_content" class="'+this.options.className.split(" ")[0]+'_content"> </div>';$(this.getId()+"_table_content").innerHTML=t,this.content=$(this.element.id+"_content")}Element.update(this.getContent(),e),this.options.autoSize&&this.updateHeight(!0),""!=e&&this.unfixHeight()},setAjaxContent:function(e,t,n,i){this.showFunction=n?"showCenter":"show",this.showModal=i||!1,t=t||{},this.setHTMLContent(""),this.onComplete=t.onComplete,this._onCompleteHandler||(this._onCompleteHandler=this._setAjaxContent.bind(this)),t.onComplete=this._onCompleteHandler,t.method="get",new Ajax.Request(e,t),t.onComplete=this.onComplete},_setAjaxContent:function(e){Element.update(this.getContent(),e.responseText),this.options.autoSize&&this.updateHeight(),this.onComplete&&this.onComplete(e),this.onComplete=null,this[this.showFunction](this.showModal),this.unfixHeight()},refresh:function(){this.options.url&&($(this.element.getAttribute("id")+"_content").src=this.options.url)},getId:function(){return this.element.id},setDestroyOnClose:function(){this.options.destroyOnClose=!0},_round:function(e,t){return 1==t?e:e=Math.floor(e/t)*t},_createWindow:function(e){var t=this.options.className,n=new Element("div",{id:e,class:"dialog "+t});this.wrapper=new Element("div",{className:"dialog-wrapper"}),this.inner_win=new Element("div",{class:"dialog-inner"});var i="";return this.options.url?i+='<iframe frameborder="0" name="'+e+'_content"  id="'+e+'_content" src="'+this.options.url+'"> </iframe>':i+='<div id="'+e+'_content" class="'+t.split(" ")[0]+'_content"> </div>',this.options.noHelp||(i+='<a class="p-a ab-35 al-30 help w-25px h-25px" href="#" onclick="return MM.ui.openHelp(MM.status.helpTopic)"></a>'),this.inner_win.innerHTML=i,this.wrapper.appendChild(new Element("div",{id:"dlg_flash_msg",style:"display: none"})),this.wrapper.appendChild(this.inner_win),n.appendChild(this.wrapper),Element.hide(n),this.options.parent.insertBefore(n,this.options.parent.firstChild),Event.observe($(e+"_content"),"load",this.options.onload),n},changeClassName:function(e){var t=this.options.className,n=this.getId();$A(["_content"]).each(function(i){this._toggleClassName($(n+i),t+i,e+i)}.bind(this)),$$("#"+n+" td").each(function(n){n.className=n.className.sub(t,e)}),this.options.className=e},_toggleClassName:function(e,t,n){e&&(e.removeClassName(t),e.addClassName(n))},setLocation:function(e,t){e=this._updateTopConstraint(e),t=this._updateLeftConstraint(t);var n=this.currentDrag||this.element;n.setStyle({top:e+"px"}),n.setStyle({left:t+"px"}),this.useLeft=!0,this.useTop=!0},getLocation:function(){var e={};return e=this.useTop?Object.extend(e,{top:this.element.getStyle("top")}):Object.extend(e,{bottom:this.element.getStyle("bottom")}),e=this.useLeft?Object.extend(e,{left:this.element.getStyle("left")}):Object.extend(e,{right:this.element.getStyle("right")})},getSize:function(){return{width:this.width,height:this.height}},setSize:function(e,t,n,i){if(e=parseFloat(e),t=parseFloat(t),e<this.options.minWidth&&(e=this.options.minWidth),t<this.options.minHeight&&(t=this.options.minHeight),this.options.maxHeight&&t>this.options.maxHeight&&(t=this.options.maxHeight),this.options.maxWidth&&e>this.options.maxWidth&&(e=this.options.maxWidth),this.useTop&&this.useLeft&&o.hasEffectLib&&Effect.ResizeWindow&&n)new Effect.ResizeWindow(this,null,null,e,t,{duration:o.resizeEffectDuration});else if(this.width=e,this.height=t,!this.currentDrag||this.currentDrag==this.element){var s=$(this.element.id+"_content");i&&s.setStyle({height:t+"px"}),s.setStyle({width:e+"px"})}},fixHeight:function(){var e=this.content.select("div")[0];e&&this.content.setStyle({height:e.clientHeight+"px"})},unfixHeight:function(){this.content.setStyle({height:"auto"}),this._recenter()},updateHeight:function(e){var t=this.content.select("div")[0];t&&this.height!=t.clientHeight&&(e&&CSS.set(this.element,{transition:"top 0.2s ease-in-out"}),this.setSize(this.width,t.clientHeight,e),this._recenter(),e&&CSS.set(this.element,{transition:"all 0s ease 0s"}))},toFront:function(){this.element.style.zIndex<s.maxZIndex&&this.setZIndex(s.maxZIndex+1)},getBounds:function(e){this.width&&this.height&&this.visible||this.computeBounds();var t=this.width,n=this.height;return e||(t+=this.widthW+this.widthE,n+=this.heightN+this.heightS),Object.extend(this.getLocation(),{width:t+"px",height:n+"px"})},computeBounds:function(){if(!this.width||!this.height){var e=l._computeSize(this.content.innerHTML,this.content.id,this.width,this.height,0,this.options.className);this.height?this.width=e:this.height=e}this.setSize(this.width,this.height)},show:function(e){if(!this.visible){if(this.visible=!0,e){if(void 0===this.overlayOpacity){var t=this;return void setTimeout(function(){t.show(e)},10)}s.addModalWindow(this),this.modal=!0,this.setZIndex(s.maxZIndex+1),s.unsetOverflow(this)}else this.element.style.zIndex||this.setZIndex(s.maxZIndex+1);this.oldStyle&&this.getContent().setStyle({overflow:this.oldStyle}),this.computeBounds(),this._notify("onBeforeShow"),this.options.useEffects?this.options.showEffect!=Element.show&&this.options.showEffectOptions?(this.element.setStyle({opacity:"0.01",display:"block"}),this.options.showEffect(this.element,this.options.showEffectOptions)):this.options.showEffect(this.element):Element.show(this.element),window.canvas&&canvas.removeFocus&&canvas.removeFocus(),l.unsetBodyOverflow(),this._setWrapperWidth(),s.focusedWindow=this,this._notify("onShow"),this._recenter(),l.watch(this.inner_win,"height",this._recenter.bind(this))}},showCenter:function(e,t,n){this.centered=!0,this.centerLeft=n,this.show(e)},isVisible:function(){return this.visible},_recenter:function(){MM.ui.page.height-this.inner_win.getHeight()>0?CSS.set(this.wrapper,{top:"50%",transform:"translate(-50%, -50%)"}):CSS.remove(this.wrapper,["top","transform"]),this.wrapper.clientWidth!==this.inner_win.clientWidth&&this._setWrapperWidth()},_setWrapperWidth:function(){this.wrapper.setStyle({maxWidth:this.inner_win.clientWidth+"px"})},hide:function(){this.visible=!1,this.modal&&(s.removeModalWindow(this),s.resetOverflow()),this.options.useEffects?this.options.hideEffect(this.element,this.options.hideEffectOptions):(Element.hide(this.element),this.options.destroyOnClose&&this.destroy()),this.doNotNotifyHide||this._notify("onHide")},close:function(){if(this.visible){if(this.options.closeCallback&&!this.options.closeCallback(this))return;if(this.options.destroyOnClose&&this.options.useEffects){var e=this.destroy.bind(this);if(this.options.hideEffectOptions.afterFinish){var t=this.options.hideEffectOptions.afterFinish;this.options.hideEffectOptions.afterFinish=function(){t(),e()}}else this.options.hideEffectOptions.afterFinish=function(){e()}}this.options.keymap&&this.options.keymap.disable(),s.updateFocusedWindow(),this.doNotNotifyHide=!0,this.hide(),this.doNotNotifyHide=!1,window.canvas&&canvas.addFocus&&canvas.addFocus(),this._notify("onClose"),MM.ui.dialogs.reloadOnClose&&setTimeout("window.location.reload()",500),l.unwatch(this.inner_win,"height")}},setOpacity:function(e){Element.setOpacity&&Element.setOpacity(this.element,e)},setZIndex:function(e){this.element.setStyle({zIndex:e}),s.updateZindex(e,this)},setTitle:function(e){},getTitle:function(){return""},_getWindowBorderSize:function(e){this.heightN=20,this.heightS=85,this.widthE=this.widthW=0,this.overlayOpacity=.8},_notify:function(e){this.options[e]&&this.options[e](this),s.notify(e,this)}};var s={windows:[],modalWindows:[],observers:[],focusedWindow:null,maxZIndex:0,overlayShowEffectOptions:{duration:.3},overlayHideEffectOptions:{duration:.3},addObserver:function(e){this.removeObserver(e),this.observers.push(e)},removeObserver:function(e){this.observers=this.observers.reject(function(t){return t==e})},notify:function(e,t){this.observers.each(function(n){n[e]&&n[e](e,t)})},getWindow:function(e){return this.windows.detect(function(t){return t.getId()==e})},getFocusedWindow:function(){return this.focusedWindow},updateFocusedWindow:function(){this.focusedWindow=this.modalWindows.length>=2?this.modalWindows[this.modalWindows.length-2]:null},addModalWindow:function(e){0==this.modalWindows.length?l.disableScreen(e.options.className,"overlay",e.overlayOpacity,e.getId(),e.options.parent):(o.keepMultiModalWindow?($("overlay").style.zIndex=s.maxZIndex+1,s.maxZIndex+=1,l._hideSelect(this.modalWindows.last().getId())):this.modalWindows.last().element.hide(),l._showSelect(e.getId())),this.modalWindows.push(e)},removeModalWindow:function(e){this.modalWindows.pop(),0==this.modalWindows.length?l.enableScreen(e.options.className):o.keepMultiModalWindow?(this.modalWindows.last().toFront(),l._showSelect(this.modalWindows.last().getId())):this.modalWindows.last().element.show()},register:function(e){this.windows.push(e)},unregister:function(e){this.windows=this.windows.reject(function(t){return t==e})},closeAll:function(){this.windows.each(function(e){s.close(e.getId())})},close:function(e,t){var n=this.getWindow(e);n&&n.close(),t&&Event.stop(t)},blur:function(e){var t=this.getWindow(e);t&&(t.options.blurClassName&&t.changeClassName(t.options.blurClassName),this.focusedWindow==t&&(this.focusedWindow=null),t._notify("onBlur"))},focus:function(e){var t=this.getWindow(e);t&&(this.focusedWindow&&this.blur(this.focusedWindow.getId()),t.options.focusClassName&&t.changeClassName(t.options.focusClassName),this.focusedWindow=t,t._notify("onFocus"))},unsetOverflow:function(e){},resetOverflow:function(){},updateZindex:function(e,t){e>this.maxZIndex&&(this.maxZIndex=e,this.focusedWindow&&this.blur(this.focusedWindow.getId())),this.focusedWindow=t,this.focusedWindow&&this.focus(this.focusedWindow.getId())}},r={dialogId:null,onCompleteFunc:null,callFunc:null,parameters:null,confirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"string"!=typeof e)return void r._runAjaxRequest(e,t,r.confirm);var n=t.okLabel||I18n.t("js.ok"),i=t.cancelLabel||I18n.t("js.cancel");t=Object.extend(t,Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters)),t.className=t.className||"alert";var o="".concat(t.okButtonClass||t.buttonClass||""," ok_button default"),s="".concat(t.cancelButtonClass||t.buttonClass||""," cancel_button mr-10"),a="<div class='"+t.className+"_message'>"+e+"</div><div class='"+t.className+"_buttons ta-right pt-25'><a href='#' onclick='return Dialog.cancelCallback()' class='"+s+"'>"+i+"</a><a href='#' onclick='return Dialog.okCallback()' class='"+o+"'>"+n+"</a></div>";return this._openDialog(a,t)},multipleChoice:function(e,t){if(e&&"string"!=typeof e)return void r._runAjaxRequest(e,t,r.multipleChoice);t=t||{},t=Object.extend(t,Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters)),t.className=t.className||"alert";var n=new Element("div"),i=new Element("div",{className:t.className+"_message"}).update(e||""),o=new Element("div",{className:t.className+"_buttons ta-right pt-25"});return t.choices.each(function(e){var t=new Element("a",{href:"#",className:e.classes||""}).update(e.label);t.onclick=function(){return e.callback(),!1},o.insert(t)}),n.insert(i).insert(o),this._openDialog(n,t)},alert:function(e,t){if(e&&"string"!=typeof e)return void r._runAjaxRequest(e,t,r.alert);t=t||{};var n=t.okLabel?t.okLabel:I18n.t("js.ok");t=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters),t),t.className=t.className||"alert";var i="class ='"+(t.buttonClass?t.buttonClass+" ":"")+" ok_button'",e="<div class='"+t.className+"_message'>"+e+"</div><div class='"+t.className+"_buttons'><input type='button' value='"+n+"' onclick='Dialog.okCallback()' "+i+"/></div>";return this._openDialog(e,t)},info:function(e,t){if(e&&"string"!=typeof e)return void r._runAjaxRequest(e,t,r.info);e=e||"",t=t||{},t=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters),t),t.className=t.className||"alert";var e="<div id='modal_dialog_message' class='"+t.className+"_message'>"+e+"</div>";return t.showProgress&&(e+="<div id='modal_dialog_progress' class='"+t.className+"_progress'>  </div>"),t.ok=null,t.cancel=null,this._openDialog(e,t)},plain:function(e,t){return e=e||"",t=t||{},t=Object.extend({className:"plain",hideOnClick:!0,width:"auto"},t),t=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters),t),t.ok=null,t.cancel=null,this._openDialog(e,t)},closeInfo:function(){s.close(this.dialogId)},_openDialog:function(e,t){var n=t.className;if(t.height||t.width||(t.width=MM.ui.page.width/2),t.id)this.dialogId=t.id;else{var i=new Date;this.dialogId="modal_dialog_"+i.getTime(),t.id=this.dialogId}if(!t.height||!t.width){var s=l._computeSize(e,this.dialogId,t.width,t.height,5,n);t.height?t.width=s:t.height=s}t.effectOptions=t.effectOptions,t.noHelp=!0;var r=new o(t);return r.getContent().update(e),r.showCenter(!0,t.top,t.left),r.setDestroyOnClose(),r.unfixHeight(),t.hideOnClick&&$("overlay")&&(r.element.onclick=function(){r.close()}),r.cancelCallback=t.onCancel||t.cancel,r.okCallback=t.onOk||t.ok,r.noCallback=t.onNo||t.no,r},_getAjaxContent:function(e){r.callFunc(e.responseText,r.parameters)},_runAjaxRequest:function(e,t,n){null==e.options&&(e.options={}),r.onCompleteFunc=e.options.onComplete,r.parameters=t,r.callFunc=n,e.options.onComplete=r._getAjaxContent,new Ajax.Request(e.url,e.options)},okCallback:function(){var e=s.focusedWindow||s.getFocusedWindow();return e.okCallback&&!e.okCallback(e)||($$("#"+e.getId()+" input").each(function(e){e.onclick=null}),e.close()),!1},noCallback:function(){var e=s.focusedWindow||s.getFocusedWindow();return e.noCallback&&!e.noCallback(e)||($$("#"+e.getId()+" input").each(function(e){e.onclick=null}),e.close()),!1},cancelCallback:function(){var e=s.focusedWindow;return $$("#"+e.getId()+" input").each(function(e){e.onclick=null}),e.close(),e.cancelCallback&&e.cancelCallback(e),!1}};if(Prototype.Browser.WebKit){var a=navigator.userAgent.match(new RegExp(/AppleWebKit\/([\d\.\+]*)/));Prototype.Browser.WebKitVersion=parseFloat(a[1])}var l={watch:function(e,t,n){e["_"+t]=e.getStyle(t),e["_"+t+"_watcher"]=setInterval(function(){e.getStyle(t)!==e["_"+t]&&(n(),e["_"+t]=e.getStyle(t))},200)},unwatch:function(e,t){clearInterval(e["_"+t+"_watcher"])},disableScreen:function(e,t,n,i,o){l.initLightbox(t,e,function(){this._disableScreen(e,t,n,i)}.bind(this),o||document.body)},_disableScreen:function(e,t,n,i){var r=$(t);r.style.display="none",r.className="overlay_"+e;var a=s.getFocusedWindow();"overlay"===t&&o.hasEffectLib&&s.overlayShowEffectOptions&&a&&a.options.useEffects?(r.overlayOpacity=n,new Effect.Appear(r,Object.extend({from:0,to:n},s.overlayShowEffectOptions))):r.style.display="block"},enableScreen:function(e,t){e=e||"",t=t||"overlay";var n=$(t);if(n){if(!n.hasClassName("overlay_"+e))return;var i=s.getFocusedWindow();"overlay"==t&&o.hasEffectLib&&s.overlayHideEffectOptions&&i&&i.options.useEffects?new Effect.Fade(n,Object.extend({from:n.overlayOpacity,to:0},s.overlayHideEffectOptions)):(n.style.display="none",n.parentNode.removeChild(n)),"__invisible__"!=t&&l._showSelect()}},_hideSelect:function(e){Prototype.Browser.IE&&(e=null==e?"":"#"+e+" ",$$(e+"select").each(function(e){l.isDefined(e.oldVisibility)||(e.oldVisibility=e.style.visibility?e.style.visibility:"visible",e.style.visibility="hidden")}))},_showSelect:function(e){Prototype.Browser.IE&&(e=null==e?"":"#"+e+" ",$$(e+"select").each(function(e){if(l.isDefined(e.oldVisibility)){try{e.style.visibility=e.oldVisibility}catch(t){e.style.visibility="visible"}e.oldVisibility=null}else e.style.visibility&&(e.style.visibility="visible")}))},isDefined:function(e){return void 0!==e&&null!=e},initLightbox:function(e,t,n,i){if($(e))Element.setStyle(e,{zIndex:s.maxZIndex+1}),s.maxZIndex++,n();else{var o=document.createElement("div");o.setAttribute("id",e),o.className="overlay_"+t,o.style.display="none",i.insertBefore(o,i.firstChild),n()}},unsetBodyOverflow:function(){null==document.body.oldOverflow&&(document.body.oldOverflow=$(document.body).getStyle("overflow")||"auto"),document.body.setStyle({width:document.body.clientWidth+"px",overflow:"hidden"})},resetBodyOverflow:function(){s.windows.length>1||(document.body.setStyle({overflow:document.body.oldOverflow}),document.body.oldOverflow=null,setTimeout("document.body.setStyle({width: 'auto'})",100))},_computeSize:function(e,t,n,i,o,s){var r=document.body,a=document.createElement("div");a.setAttribute("id",t),a.className=s+"_content",i?a.style.height=i+"px":a.style.width=n+"px",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.display="none",a.innerHTML=e,r.insertBefore(a,r.firstChild);var l;return l=i?$(a).getDimensions().width+o:$(a).getDimensions().height+o,r.removeChild(a),l}}},Y4x1:function(e,t,n){"use strict";function i(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t}t.__esModule=!0,t.default=i,e.exports=t.default},YcUm:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=n("ea/l");t.Motion=i(o);var s=n("iTIp");t.StaggeredMotion=i(s);var r=n("m6/l");t.TransitionMotion=i(r);var a=n("zE3B");t.spring=i(a);var l=n("ZEcb");t.presets=i(l);var c=n("Luvl");t.stripStyle=i(c);var u=n("NmCK");t.reorderKeys=i(u)},Z31F:function(e,t,n){"use strict";var i=n("ccIB"),o=n("Rd93");if(void 0===i)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var s=(new i.Component).updater;e.exports=o(i.Component,i.isValidElement,s)},Z8UF:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("yviC"),f=n("QWVU"),h=n("9Oqg"),m=function(t){function n(e){var t;return o(this,n),t=a(this,l(n).call(this,e)),t.markAsRead=t.markAsRead.bind(c(t)),t.onFocus=t.onFocus.bind(c(t)),t.keydown=t.keydown.bind(c(t)),t.onBlur=t.onBlur.bind(c(t)),t.submitMessage=t.submitMessage.bind(c(t)),t.resendMessage=t.resendMessage.bind(c(t)),t.update=t.update.bind(c(t)),t.fetchOlderMessages=t.fetchOlderMessages.bind(c(t)),t}return u(n,t),r(n,[{key:"markAsRead",value:function(){h.default.markAsRead(this.props.userID)}},{key:"onFocus",value:function(){this.keymap.enable()}},{key:"keydown",value:function(e){e.shiftKey||this.submitMessage(e.browserEvent)}},{key:"onBlur",value:function(){this.keymap.disable()}},{key:"submitMessage",value:function(e){Event.stop(e);var t=this.input.value;if(t.trim().length>0){var n={text:t,source:"me",user:users.selfUser,user_id:users.selfUser.id};this.input.value="",this.messages.scrollToBottom(),h.default.send(n,this.props.userID)}}},{key:"resendMessage",value:function(e){h.default.send(e,this.props.userID)}},{key:"update",value:function(){this.setState({chat:h.default.getChat(this.state.chat.targetId)})}},{key:"fetchOlderMessages",value:function(){return h.default.getOlderMessages(this.props.userID)}},{key:"onNewMessage",value:function(){this.messages.scrollToBottom()}},{key:"componentWillMount",value:function(){var e=MM.utils.KeyEvent;this.keymap=new MM.utils.KeyMap(document,"chat_keymap",[{key:[e.RETURN],fn:this.keydown,withEvent:!0,stopEvent:!1}]),this.keymap.disable()}},{key:"render",value:function(){var t=this,n=users.findByID(this.props.userID),i=h.default.getChat(this.props.userID).loading,o=n.isOnline()?"":"o-40",s=n.isOnline()?" (online)":" (offline)";return e.createElement("div",{onClick:this.markAsRead,className:"chat"},e.createElement("div",{className:"h-flex-row justify-sb ph-24 h-64"},e.createElement("div",{className:"h-flex-row h-flex-grow h-flex-shrink"},e.createElement(d.a,{user:n,className:o,tooltip:s}),e.createElement("span",{className:"fs-18 ml-13 ellipsis"},n.name.unescapeHTML()))),e.createElement(f.a,{ref:function(e){return t.messages=e},loading:i,resendMessage:this.resendMessage,onScrollTop:this.fetchOlderMessages,messages:this.props.messages}),e.createElement("div",{className:"is-stretched ph-24 h-84 bt-1"},e.createElement("form",{className:"h-100% h-flex-row justify-sb",onSubmit:this.submitMessage},e.createElement("textarea",{ref:function(e){return t.input=e},className:"content-visible h-100% h-flex-grow h-overflow-y lh-160% pr-20 pt-20 pb-10 b-0",placeholder:I18n.t("js.your_message"),maxLength:"255",autoFocus:!0,onFocus:this.onFocus,onBlur:this.onBlur}),e.createElement("input",{type:"submit",className:"button default",value:I18n.t("js.say_it")}))))}}]),n}(e.Component);t.a=m}).call(t,n("ccIB"))},ZEcb:function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},ZluR:function(e,t,n){t=e.exports=n("Vmy+")(!1),t.push([e.i,'/* Chat Window Styles */\n/* Settings - imports, globals, colors */\n/* Grey Tones (Font Colors) */\n/* default font-color */\n/* border-color; placeholder-color; separator */\n/* Other Colors */\n/* used for selected items with light blue bg*/\n/* Global Settings */\n/* Font Sizes */\n/* Font Colors */\n/* Font Weights */\n/* Sketch: Black */\n/* Sketch: Roman */\n/* Line Heights */\n/* Border Colors */\n/* Border Radii */\n/* Box Shadows */\n/* Tools - mixins, global helpers */\n/* smaller than iPhone 6 screen - 375px*/\n/* Transitions and Animations */\n/* BLOCK LISTING */\n/* Other */\n/* hyphenation lets firefox use word-break: break-all */\n/* on retina  */\n/* standard popover arrow - color can be customized in subclasses */\n/* smaller than iPhone 6 screen - 375px*/\n.chat {\n  width: 320px;\n  overflow: hidden; }\n  .chat .bubble {\n    word-wrap: break-word;\n    max-width: 250px;\n    position: relative;\n    padding: 5px 15px;\n    border-radius: 15px;\n    margin-bottom: 5px;\n    display: inline-block; }\n    .chat .bubble p {\n      word-break: break-word; }\n      .chat .bubble p a {\n        text-decoration: underline; }\n    .chat .bubble img {\n      width: 20px;\n      height: 20px;\n      display: inline-block;\n      vertical-align: text-bottom; }\n  .chat .from-me {\n    align-self: flex-end; }\n    .chat .from-me .bubble {\n      color: white;\n      background: #00AAFF; }\n      .chat .from-me .bubble:before {\n        content: "";\n        position: absolute;\n        z-index: -1;\n        bottom: -2px;\n        right: -5px;\n        height: 15px;\n        width: 20px;\n        background-color: #00AAFF;\n        border-bottom-left-radius: 15px; }\n      .chat .from-me .bubble:after {\n        content: "";\n        position: absolute;\n        z-index: 1;\n        bottom: -4px;\n        right: -56px;\n        width: 26px;\n        height: 15px;\n        background: white;\n        border-bottom-left-radius: 5px;\n        -webkit-transform: translate(-30px, -2px);\n                transform: translate(-30px, -2px); }\n      .chat .from-me .bubble a {\n        color: white; }\n  .chat .from-them .bubble {\n    color: #3D474D;\n    background: #F7F9FA; }\n    .chat .from-them .bubble:before {\n      content: "";\n      position: absolute;\n      z-index: 2;\n      bottom: -2px;\n      left: -7px;\n      height: 15px;\n      width: 20px;\n      background-color: #F7F9FA;\n      border-bottom-right-radius: 15px; }\n    .chat .from-them .bubble:after {\n      content: "";\n      position: absolute;\n      z-index: 3;\n      bottom: -2px;\n      left: -26px;\n      width: 26px;\n      height: 15px;\n      background: white;\n      border-bottom-right-radius: 5px; }\n\n#chat_messages img {\n  width: 24px;\n  height: 24px;\n  display: inline-block; }\n',""])},aYvJ:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return h});var d=n("HJ+y"),f=n("jRmw"),h=function(t){function n(e){var t;return o(this,n),t=a(this,l(n).call(this,e)),t._openDialog=t._openDialog.bind(c(t)),t}return u(n,t),r(n,[{key:"sortUsers",value:function(e){return e.sort(function(e,t){return e.isOnline()===t.isOnline()?0:e.isOnline()?-1:1})}},{key:"usersExcludingSelfAndAnonymus",value:function(e){var t=this;return e.filter(function(e){return e.id!==t.props.selfUser.id&&(!e.anonymous||e.isOnline())})}},{key:"_openDialog",value:function(){if(!this.props.selfUser.anonymous)return MM.ui.dialogs.dialogSharing(this.props.mapId);MM.ui.dialogs.dialogLogin(this.props.selfUser)}},{key:"render",value:function(){var t=this.props,n=t.users,i=t.currentUsers,o=t.selfUser,s=t.visibleUsersCount,r=t.renderLink,a=this.usersExcludingSelfAndAnonymus(n),l=this.usersExcludingSelfAndAnonymus(i);if(0===a.length&&0===l.length)return null;var c=this.sortUsers(a),u=c.slice(0,s),p=!o.anonymous||2===o.permission,h=r?{onClick:this._openDialog,className:"c-blue td-underline h-cp lh-120%"}:{};return e.createElement("div",{className:"h-flex-row"},e.createElement("div",{className:"h-flex-column mr-10"},e.createElement("span",{className:"fs-10 c-lighter"},I18n.t("js.shared_with")),e.createElement("span",h,I18n.t("js.count_people",{count:a.length}))),e.createElement("div",{className:"h-flex-row mr-10"},u.map(function(t,n){return e.createElement(f.a,{key:t.id,userID:t.id,enabled:p})}),c.length>u.length?e.createElement(d.a,{users:c.slice(u.length,c.length),enabled:p}):null))}}]),n}(e.Component)}).call(t,n("ccIB"))},"ea/l":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n("Y4x1"),r=i(s),a=n("Luvl"),l=i(a),c=n("TOzf"),u=i(c),p=n("Gotj"),d=i(p),f=n("Slta"),h=i(f),m=n("KcBO"),b=i(m),v=n("ccIB"),y=i(v),g=n("3/B0"),w=i(g),E=n("Z31F"),_=i(E),O=_.default({propTypes:{defaultStyle:w.default.objectOf(w.default.number),style:w.default.objectOf(w.default.oneOfType([w.default.number,w.default.object])).isRequired,children:w.default.func.isRequired,onRest:w.default.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,i=t||l.default(n),o=r.default(i);return{currentStyle:i,currentVelocity:o,lastIdealStyle:i,lastIdealVelocity:o}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,i=n.currentStyle,s=n.currentVelocity,r=n.lastIdealStyle,a=n.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var c=e[l];"number"==typeof c&&(t||(t=!0,i=o({},i),s=o({},s),r=o({},r),a=o({},a)),i[l]=c,s[l]=0,r[l]=c,a[l]=0)}t&&this.setState({currentStyle:i,currentVelocity:s,lastIdealStyle:r,lastIdealVelocity:a})},startAnimationIfNecessary:function(){var e=this;this.animationID=h.default(function(t){var n=e.props.style;if(b.default(e.state.currentStyle,n,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var i=t||d.default(),o=i-e.prevTime;if(e.prevTime=i,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var s=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),r=Math.floor(e.accumulatedTime/(1e3/60)),a={},l={},c={},p={};for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var h=n[f];if("number"==typeof h)c[f]=h,p[f]=0,a[f]=h,l[f]=0;else{for(var m=e.state.lastIdealStyle[f],v=e.state.lastIdealVelocity[f],y=0;y<r;y++){var g=u.default(1e3/60/1e3,m,v,h.val,h.stiffness,h.damping,h.precision);m=g[0],v=g[1]}var w=u.default(1e3/60/1e3,m,v,h.val,h.stiffness,h.damping,h.precision),E=w[0],_=w[1];c[f]=m+(E-m)*s,p[f]=v+(_-v)*s,a[f]=m,l[f]=v}}e.animationID=null,e.accumulatedTime-=r*(1e3/60),e.setState({currentStyle:c,currentVelocity:p,lastIdealStyle:a,lastIdealVelocity:l}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=d.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=d.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&y.default.Children.only(e)}});t.default=O,e.exports=t.default},fGUG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("worM"),f=n("YmTu"),h=n("4N07"),m=n.n(h),b=function(t){function n(e){var t;return o(this,n),t=a(this,l(n).call(this,e)),t.handleRemoveClick=t.handleRemoveClick.bind(c(t)),t}return u(n,t),r(n,[{key:"handleRemoveClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onRemove()}},{key:"render",value:function(){var t=this,n=this.props.parts.map(function(n,i){var o=n.finished?e.createElement(f.a,{className:"s-22 bc-grey4 b-2 rad-100% h-flex-row justify-center mr-8",opts:{name:"checkmark",color:"grey3",size:10}}):e.createElement("div",{className:"h-flex-row justify-center p-r s-22 rad-100% b-2 bc-purple c-purple fs-12 fw-700 mr-8"},e.createElement("span",null,i+1),e.createElement("span",{className:"p-a rad-100% fs-9 s-9 bg-red c-white ta-center",style:{top:-3,right:-3}},"*")),s=n.finished?"c-grey3":"";return{icon:o,backgroundColor:n.finished?"transparent":null,label:n.name,className:s,onClick:function(){return t.props.onListClick(n)}}});return e.createElement("div",{className:"pv-10"},e.createElement("div",{className:"h-flex-column ph-20"},e.createElement("div",{className:"h-flex-row align-items-start mb-15"},e.createElement("span",{className:"h-flex-grow fs-18 c-grey fw-500"},I18n.t("js.tutorials")),e.createElement(f.a,{opts:{name:"close",size:12,color:"grey3"},onClick:this.props.close})),e.createElement("span",null,I18n.t("js.onboarding.progress.description")),e.createElement("img",{className:"mt-30 mh-10 mb-20",src:m.a})),e.createElement(d.a,{className:"mb-25",items:n}),e.createElement("a",{href:"#",className:"ph-20 td-underline",onClick:this.handleRemoveClick},I18n.t("js.do_not_show_this_anymore")))}}]),n}(e.Component);b.defaultProps={parts:[],onListClick:function(){},onRemove:function(){}},t.default=b}.call(t,n("ccIB"))},fti0:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){s(e,t,n[t])})}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(null==e)return{};var n,i,o=a(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function a(e,t){if(null==e)return{};var n,i,o={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return x});var b=n("YmTu"),v=n("SO8C"),y=n("uJpZ"),g=n("worM"),w=n("jR5l"),E=n("aEw3"),_=n("xY9N"),O=["Facebook","Twitter","Pinterest"],S=function(){return null},I=function(e){var t=e.platform,n=e.isPublicMap,i=e.mapId,o=e.onPublish;if(n)j(t);else{var s;MM.ui.dialogs.dialogPublishConfirmation(i,{okCallback:function(){return s=j(t,!0)},successCallback:function(){o(),s.win.location.href=s.shareUrl}})}},j=function(e,t){var n=tree.root.getRawTitle(),i=App.tree.root.id;return MM.utils.Social.share(e,{async:t,rootId:i,title:n,url:"".concat(document.location.origin,"/").concat(i,"/").concat(App.titleToURI(n))})},k=function(t){var n=t.isPublicMap,i=t.canShare,o=t.mapId,s=t.onPublish;if(n||i){var r=O.map(function(t){return{icon:e.createElement(b.a,{opts:{name:"service-"+t.toLowerCase(),size:20,parentClasses:"rad-5px mr-8px"}}),label:t,onClick:function(){return I({platform:t,isPublicMap:n,mapId:o,onPublish:s})}}});return e.createElement(g.a,{header:{title:I18n.t("js.social_media")},items:r,className:"mt-10 mb-15"})}return e.createElement("div",null)},C=function(t){var n=t.isPublicMap,i=t.isPublishMapAllowed,o=t.isAnonymous,s=t.mapId,r=t.onPublish;if(!o){var a=[];if(i){var l=n?I18n.t("js.publishing_settings"):I18n.t("js.publish_map"),c={icon:e.createElement(b.a,{opts:{name:"publish",color:"white",size:12,consize:20,parentClasses:"bg-blue rad-5px mr-8px"}}),label:"".concat(l,"..."),onClick:function(){n?MM.ui.dialogs.dialogPublish(s):MM.ui.dialogs.dialogPublishConfirmation(s,{successCallback:function(){r(),MM.ui.dialogs.dialogPublish(s)}})}};a.push(c)}return a.push({icon:e.createElement(b.a,{opts:{name:"sharing",color:"white",size:12,consize:20,parentClasses:"bg-green rad-5px mr-8px"}}),label:I18n.t("js.sharing_settings")+"...",onClick:function(){return MM.ui.dialogs.dialogSharing(s)}}),e.createElement(g.a,{header:{title:I18n.t("js.more")},items:a,className:"mv-10"})}return e.createElement("div",null)},T=function(t){var n=t.currentUser,i=t.isPublicMap,o=t.mapId,s=t.onPublish,r=t.isLinkShareAllowed,a=t.isPublishMapAllowed,l=n.canShare(),c=n.anonymous||!l;return e.createElement("div",null,e.createElement("div",{className:"fs-18 fw-500 m-20px mt-10px"},I18n.t("js.share_this_map")),c?null:e.createElement(y.a,{title:I18n.t("js.invite_people"),hideTokenizerHeader:!0}),r?e.createElement(v.a,{className:"mb-20",readOnly:c,mapId:o,on:App.config.linkShare,link:App.config.shareLink,onChange:c?S:App.changeLinkSharing.bind(App)}):null,e.createElement(w.a,null,k({isPublicMap:i,canShare:l,mapId:o,onPublish:s}),C({isPublicMap:i,isPublishMapAllowed:a&&l,isAnonymous:n.anonymous,mapId:o,onPublish:s})))},x=function(t){function n(e){var t;return l(this,n),t=p(this,f(n).call(this,e)),t.state={isLinkShareAllowed:!0,isPublishMapAllowed:!0},t}return h(n,t),u(n,[{key:"componentWillMount",value:function(){var e=this;Object(_.b)(function(){return e.setState({isLinkShareAllowed:Object(_.c)(_.a.ALLOW_LINK_SHARE),isPublishMapAllowed:Object(_.c)(_.a.ALLOW_PUBLISH)})})}},{key:"render",value:function(){var t=this.props,n=t.onShow,i=t.onClose,s=r(t,["onShow","onClose"]);return e.createElement(E.a,{position:"above",canAutoPosition:!1,className:"sections",opener:e.createElement("button",{id:"btn_share",className:"h-flex-row h-32px lh-32px"},e.createElement("span",null,I18n.t("js.share")),e.createElement(b.a,{className:"c-blue pl-5px",opts:{name:"triangle",color:"blue",size:8}})),onShow:n,onClose:i},T(o({},s,this.state)))}}]),n}(e.Component)}).call(t,n("ccIB"))},gcQM:function(e,t,n){"use strict";(function(e){var i=n("YmTu"),o=function(t){var n,o=t.message,s=t.resendMessage,r=o.text.strip().escapeHTML().replace(/\n/gi,"<br/>"),a=(o.timestamp?new Date(1e3*o.timestamp):new Date).toUIString(),l=o.user_id!==users.selfUser.id?"them":"me";return o.failed&&(n=e.createElement("div",{className:"ta-center mv-10"},e.createElement(i.a,{className:"mb-5 h-iblock",opts:{name:"warning",size:30}}),e.createElement("span",{className:"h-block mb-10"},"Message could not be sent"),e.createElement("a",{onClick:function(){return s(o)},className:"button h-iblock mb-10"},"Resend"))),e.createElement("div",{className:"msg from-"+l},e.createElement("div",{className:"bubble",title:a},e.createElement("p",{dangerouslySetInnerHTML:{__html:EmojiArea.getHTMLContent(r)}}),n))};t.a=o}).call(t,n("ccIB"))},iTIp:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){for(var i=0;i<e.length;i++)if(!v.default(e[i],t[i],n[i]))return!1;return!0}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=n("Y4x1"),a=i(r),l=n("Luvl"),c=i(l),u=n("TOzf"),p=i(u),d=n("Gotj"),f=i(d),h=n("Slta"),m=i(h),b=n("KcBO"),v=i(b),y=n("ccIB"),g=i(y),w=n("3/B0"),E=i(w),_=n("Z31F"),O=i(_),S=O.default({propTypes:{defaultStyles:E.default.arrayOf(E.default.objectOf(E.default.number)),styles:E.default.func.isRequired,children:E.default.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,i=t||n().map(c.default),o=i.map(function(e){return a.default(e)});return{currentStyles:i,currentVelocities:o,lastIdealStyles:i,lastIdealVelocities:o}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,i=t.currentVelocities,o=t.lastIdealStyles,r=t.lastIdealVelocities,a=!1,l=0;l<e.length;l++){var c=e[l],u=!1;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var d=c[p];"number"==typeof d&&(u||(u=!0,a=!0,n[l]=s({},n[l]),i[l]=s({},i[l]),o[l]=s({},o[l]),r[l]=s({},r[l])),n[l][p]=d,i[l][p]=0,o[l][p]=d,r[l][p]=0)}}a&&this.setState({currentStyles:n,currentVelocities:i,lastIdealStyles:o,lastIdealVelocities:r})},startAnimationIfNecessary:function(){var e=this;this.animationID=m.default(function(t){var n=e.props.styles(e.state.lastIdealStyles);if(o(e.state.currentStyles,n,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var i=t||f.default(),s=i-e.prevTime;if(e.prevTime=i,e.accumulatedTime=e.accumulatedTime+s,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var r=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),a=Math.floor(e.accumulatedTime/(1e3/60)),l=[],c=[],u=[],d=[],h=0;h<n.length;h++){var m=n[h],b={},v={},y={},g={};for(var w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var E=m[w];if("number"==typeof E)b[w]=E,v[w]=0,y[w]=E,g[w]=0;else{for(var _=e.state.lastIdealStyles[h][w],O=e.state.lastIdealVelocities[h][w],S=0;S<a;S++){var I=p.default(1e3/60/1e3,_,O,E.val,E.stiffness,E.damping,E.precision);_=I[0],O=I[1]}var j=p.default(1e3/60/1e3,_,O,E.val,E.stiffness,E.damping,E.precision),k=j[0],C=j[1];b[w]=_+(k-_)*r,v[w]=O+(C-O)*r,y[w]=_,g[w]=O}}u[h]=b,d[h]=v,l[h]=y,c[h]=g}e.animationID=null,e.accumulatedTime-=a*(1e3/60),e.setState({currentStyles:u,currentVelocities:d,lastIdealStyles:l,lastIdealVelocities:c}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=f.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=f.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(m.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&g.default.Children.only(e)}});t.default=S,e.exports=t.default},jRmw:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("+X7E"),f=(n.n(d),n("Z8UF")),h=n("aEw3"),m=n("DrJx"),b=n("9Oqg"),v=function(t){function n(e){var t;return o(this,n),t=a(this,l(n).call(this,e)),b.default.getOlderMessages(t.props.userID),t.state={open:!1},t.markAsRead=t.markAsRead.bind(c(t)),t.setOpen=t.setOpen.bind(c(t)),t.setClosed=t.setClosed.bind(c(t)),t.update=t.update.bind(c(t)),t}return u(n,t),r(n,[{key:"markAsRead",value:function(){b.default.markAsRead(this.props.userID)}},{key:"setOpen",value:function(){this.setState({open:!0}),this.markAsRead()}},{key:"setClosed",value:function(){this.setState({open:!1})}},{key:"update",value:function(){b.default.getUnreadMessages(this.props.userID).length>0&&this.state.open&&(this.markAsRead(),this.widget.onNewMessage()),this.forceUpdate()}},{key:"componentDidMount",value:function(){App.subscribe(CustomEvents.CHAT_UPDATE+"_"+this.props.userID,this.update)}},{key:"componentWillReceiveProps",value:function(e){this.props.userID!==e.userID&&(b.default.getOlderMessages(e.userID),App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+this.props.userID,this.update),App.subscribe(CustomEvents.CHAT_UPDATE+"_"+e.userID,this.update))}},{key:"componentWillUnmount",value:function(){App.unsubscribe(CustomEvents.CHAT_UPDATE+"_"+this.props.userID,this.update),b.default.getOlderMessages(this.props.userID)}},{key:"render",value:function(){var t=this,n=b.default.getChat(this.props.userID),i=b.default.getUnreadMessages(this.props.userID).length;return e.createElement(h.a,{position:"above",canAutoPosition:!1,className:"p-0",onShow:this.setOpen,onClose:this.setClosed,disabled:!this.props.enabled,opener:e.createElement(m.a,{unread:i,userId:this.props.userID,className:"mh-4",enabled:this.props.enabled})},e.createElement(f.a,{ref:function(e){return t.widget=e},messages:n.messages,userID:this.props.userID}))}}]),n}(e.Component);t.a=v}).call(t,n("ccIB"))},k1IG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,i){var o=(n("67vC"),n("aYvJ")),s=n("YmTu"),r=n("fti0"),a=n("8RG9"),l=n.n(a),c={visibleUsers:0,bars:{history:{height:168,permissions:"write",path:"ui/history/history"},slideshow:{height:150,permissions:"write",path:"ui/presentation/slideshow"},print:{height:77,permissions:"read",path:"ui/print/print"},meistertask:{height:150,permissions:"write",path:"utils/meistertask/meistertask"}},init:function(){this.el=$("map_footer"),this.els={bar:$("footerbar"),collaborators:$("collaborators-list"),collaboratorsContainer:$("collaboration-container")},this.enable(),Element.bindOnClick("btn_present",Presentation.togglePresenter.bind(Presentation)),Element.bindOnClick("btn_export",this._onExportClick.bind(this)),this.setViewportOffset(),UI.Registry.add(this),UI.Registry.notify(this,"show"),MM.ui.ToolTips.touchSafe({el:this.el}),this.els.collaborators&&this.els.collaboratorsContainer&&this._renderSharingButton(),this.calculateVisibleUsers(),App.subscribe(CustomEvents.COLLABORATORS_UPDATED,this._renderUsers.bind(this))},_onExportClick:function(){users.selfUser.anonymous?MM.ui.dialogs.dialogLogin(users.selfUser):MM.ui.dialogs.dialogExportMap(App.config.map_id,null,{onShow:function(){return App.trigger(CustomEvents.EXPORT_DLG_OPENED)},onClose:function(){return App.trigger(CustomEvents.EXPORT_DLG_CLOSED)}})},_onPrintClick:function(){users.selfUser.anonymous?MM.ui.dialogs.dialogLogin(users.selfUser):this.toggleBar("print")},_renderSharingButton:function(){var t=this;e.render(i.createElement(r.a,{currentUser:users.selfUser,mapId:App.config.map_id,isPublicMap:App.config.isPublic,onShow:function(){return App.trigger(CustomEvents.SHARING_POPOVER_OPENED)},onClose:function(){return App.trigger(CustomEvents.SHARING_POPOVER_CLOSED)},onPublish:function(){App.config.isPublic=!0,t._renderSharingButton()}}),mm$("btn-share-container"))},_renderUsers:function(){if("phantomjs"!==App.config.environment&&this.els.collaborators)if(MM.ua.isPhone||MM.ua.isTablet)e.render(i.createElement("div",{className:"h-flex-row p-r mr-10"},i.createElement(s.a,{opts:{name:"service-android",size:32,parentClasses:"rad-100%"}}),i.createElement(s.a,{opts:{name:"service-ios",size:32,parentClasses:"rad-100% bc-grey3 b-1 p-a h-v-center al-24"}}),i.createElement("p",{className:"fs-12 pl-30",dangerouslySetInnerHTML:{__html:I18n.t("js.app_teaser_map_view_html")}})),this.els.collaborators);else{var t=users.collaborators();e.render(i.createElement(o.a,{mapId:App.config.map_id,renderLink:"embedded_full"!==App.config.viewMode,users:t,currentUsers:users.currentUsers,selfUser:users.selfUser,visibleUsersCount:Math.min(this.visibleUsers,t.length)}),this.els.collaborators)}},setViewportOffset:function(){this.viewportSpace={bottom:this.el.offsetHeight+(this.activeBar?this.els.bar.offsetHeight:0)}},calculateVisibleUsers:function(){if(this.els.collaboratorsContainer){var e=this.els.collaboratorsContainer.clientWidth-280,t=Math.floor(e/32);this.visibleUsers=Math.min(t,5)}},onResize:function(){this.setViewportOffset();var e=this.visibleUsers;this.calculateVisibleUsers(),this.visibleUsers!==e&&this._renderUsers()},show:function(e){var t=this,n=(e?500:0)+"ms";CSS.set(this.el,{bottom:"0px",transitionDuration:n}),this.hiddenBar&&(this.showBar(this.hiddenBar),this.hiddenBar=null),setTimeout(function(){return UI.Registry.notify(t,"show")},e?500:10)},hide:function(e){var t=e?"500ms":"0ms";CSS.set(this.el,{bottom:-this.el.getHeight()+"px",transitionDuration:t}),this.activeBar&&(this.hiddenBar=this.activeBar,this.hideBar(this.activeBar)),UI.Registry.notify(this,"hide")},enable:function(){Object.keys(this.bars).each(function(e){var t=e+"Listener",n=$("btn_toggle"+e);if(!this.hasOwnProperty(t)){var i=this["_on"+l()(e)+"Click"];this[t]=i?i.bind(this):this.toggleBar.bind(this,e)}n&&("write"===this.bars[e].permissions&&App.config.editable||"read"===this.bars[e].permissions?(n.observe("click",this[t]),MM.ui.enableButton(n)):(n.stopObserving("click",this[t]),n.title=I18n.t("js.you_are_in_view_only_mode"),MM.ui.disableButton(n)))}.bind(this))},disable:function(){Object.keys(this.bars).each(function(e){mm$("btn_toggle"+e)&&$("btn_toggle"+e).stopObserving("click",this[e+"Listener"])}.bind(this))},toggleBar:function(e){return!!this.els.bar&&("write"!==this.bars[e].permissions||App.config.editable?(this.activeBar===e?this.hideBar(e):this.showBar(e),!1):(App.ui.Message.show(I18n.t("js.you_are_in_view_only_mode"),Message.NOTICE),!1))},showBar:function(e){if(this.els.bar){this.activeBar&&(this.hideBar(this.activeBar,!0),this.els.bar.innerHTML=""),this.actions.hasOwnProperty("onBeforeShow"+e.capitalize())&&this.actions["onBeforeShow"+e.capitalize()](),addClassName(mm$("btn_toggle"+e),"active");var t=function(){new Ajax.Request("/toolbar/"+e,{parameters:{id:App.config.map_id},evalScripts:!0,asynchronous:!0,onComplete:function(t){var n=t.responseJSON;n?(this.hideBar(e),removeClassName(mm$("btn_toggle"+e),"active"),MM.ui.enableButton("btn_toggle"+e),n.error?Message.show(n.error,Message.ERROR):n.info&&Message.show(n.info,Message.INFO)):("meistertask"===e&&this._prepareBar(e),this.activeBar&&this._doShowBar(e))}.bind(this)})}.bind(this),i=this.bars[e].path;n("CgDZ")("./".concat(i)).then(function(){return t()}),"meistertask"!==e&&(this._prepareBar(e),Amplitude.logEvent("toolbar_"+e)),App.hideAnonymousHint()}},_prepareBar:function(e){this.activeBar=e,this.els.bar.style.bottom="",this.els.bar.morph("height:"+this.bars[e].height+"px",{afterFinish:function(){UI.Registry.onResize(),this.onShowBarComplete(e),this.actions.hasOwnProperty("onShow"+e.capitalize())&&this.actions["onShow"+e.capitalize()]()}.bind(this)})},_doShowBar:function(e){this.actions.hasOwnProperty("doStart"+e.capitalize())?this.actions["doStart"+e.capitalize()]():this.enable(),MM.utils.siteLocation.setLoc(e),this.els.bar.select(".js-close-footerbar")[0].onclick=this.toggleBar.bind(this,e),MM.ui.enableButton("btn_toggle"+e)},onShowBarComplete:function(e){this.els.bar.addClassName("active"),"info"==e&&(this.els.bar.style.height="auto")},hideBar:function(e,t){this.els.bar&&(MM.utils.siteLocation.reset(),this.activeBar=null,removeClassName(this.els.bar,"active"),t?this._doHideBar(e):this.els.bar.morph("height: 0;",{afterFinish:this._doHideBar.bind(this,e)}),removeClassName(mm$("btn_toggle"+e),"active"),App.showAnonymousHint())},_doHideBar:function(e){this.els.bar.style.bottom="0",UI.Registry.onResize(),this.actions.hasOwnProperty("doStop"+e.capitalize())&&this.actions["doStop"+e.capitalize()](),new Ajax.Request("/toolbar/hide",{parameters:{id:App.config.map_id},evalScripts:!0,asynchronous:!0}),MM.ui.enableButton("btn_toggle"+e)}};c.Meistertask={updateIcon:function(e){var t=mm$("btn_togglemeistertask");t&&(e?(removeClassName(t,"icon-path"),addClassName(t,"icon-bg"),t.setAttribute("data-icon","mt-checkmark")):(removeClassName(t,"icon-bg"),addClassName(t,"icon-path"),t.setAttribute("data-icon","mt-checkmark-border")),MM.ui.svgIcons(t))}},c.actions={onBeforeShowPrint:function(){App.config.currentlyEditable=!1,UI.Registry.toggleMode("view")},doStartPrint:function(){App.ui.Print.init()},doStopPrint:function(){App.config.editable&&(App.config.currentlyEditable=!0,UI.Registry.toggleMode("edit")),App.ui.Print.exit()},doStartMeistertask:function(){App.trigger(CustomEvents.MEISTERTASK_BAR_OPENED)},doStopMeistertask:function(){MM.utils.Meistertask.exit();var e=GeneralPopover.get("mt_project_footer");e&&e.destroy()},onBeforeShowHistory:function(){App.config.showRevisions=!0,App.config.currentlyEditable=!1,UI.Registry.toggleMode("view"),App.showMapLoading()},doStartHistory:function(){RevisionBrowser.start(this.startHistoryView,!1,!0),App.trigger(CustomEvents.HISTORY_MODE_STARTED)},doStopHistory:function(){App.showMapLoading(),"undefined"!=typeof RevisionsSlider&&RevisionsSlider.highlightNodes(!1),"undefined"!=typeof RevisionBrowser&&RevisionBrowser.stop(),App.config.editable&&(App.config.currentlyEditable=!0,UI.Registry.toggleMode("edit")),mm$("canvas_container").style.opacity=1,App.config.showRevisions=!1,App.hideMapLoading(),App.trigger(CustomEvents.HISTORY_MODE_CLOSED)},doStartSlideshow:function(e){Presentation.Slideshow.prepare(e)},doStopSlideshow:function(){Presentation.on||Presentation.Slideshow.exit()},historyRevert:function(){var e=RevisionBrowser.revision+1;ServerConnection.historyRevert(e)},startHistoryView:function(){mm$("canvas_container").style.opacity=.7,App.hideMapLoading()}},t.default=c}.call(t,n("x9tB"),n("ccIB"))},"m6/l":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var i=t;return null==i?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,t){for(var o=0;o<i.length;o++)if(i[o].key===e.key)return{key:i[o].key,data:i[o].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}})}function s(e,t,n,i){if(i.length!==t.length)return!1;for(var o=0;o<i.length;o++)if(i[o].key!==t[o].key)return!1;for(var o=0;o<i.length;o++)if(!E.default(e[o],t[o].style,n[o]))return!1;return!0}function r(e,t,n,i,o,s,r,a,l){for(var u=m.default(i,o,function(e,i){var o=t(i);return null==o?(n({key:i.key,data:i.data}),null):E.default(s[e],o,r[e])?(n({key:i.key,data:i.data}),null):{key:i.key,data:i.data,style:o}}),p=[],d=[],f=[],h=[],b=0;b<u.length;b++){for(var v=u[b],y=null,g=0;g<i.length;g++)if(i[g].key===v.key){y=g;break}if(null==y){var w=e(v);p[b]=w,f[b]=w;var _=c.default(v.style);d[b]=_,h[b]=_}else p[b]=s[y],f[b]=a[y],d[b]=r[y],h[b]=l[y]}return[u,p,d,f,h]}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=n("Y4x1"),c=i(l),u=n("Luvl"),p=i(u),d=n("TOzf"),f=i(d),h=n("nZpL"),m=i(h),b=n("Gotj"),v=i(b),y=n("Slta"),g=i(y),w=n("KcBO"),E=i(w),_=n("ccIB"),O=i(_),S=n("3/B0"),I=i(S),j=n("Z31F"),k=i(j),C=k.default({propTypes:{defaultStyles:I.default.arrayOf(I.default.shape({key:I.default.string.isRequired,data:I.default.any,style:I.default.objectOf(I.default.number).isRequired})),styles:I.default.oneOfType([I.default.func,I.default.arrayOf(I.default.shape({key:I.default.string.isRequired,data:I.default.any,style:I.default.objectOf(I.default.oneOfType([I.default.number,I.default.object])).isRequired}))]).isRequired,children:I.default.func.isRequired,willEnter:I.default.func,willLeave:I.default.func,didLeave:I.default.func},getDefaultProps:function(){return{willEnter:function(e){return p.default(e.style)},willLeave:function(){return null},didLeave:function(){}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,i=e.willEnter,o=e.willLeave,s=e.didLeave,a="function"==typeof n?n(t):n,l=void 0;l=null==t?a:t.map(function(e){for(var t=0;t<a.length;t++)if(a[t].key===e.key)return a[t];return e});var u=null==t?a.map(function(e){return p.default(e.style)}):t.map(function(e){return p.default(e.style)}),d=null==t?a.map(function(e){return c.default(e.style)}):t.map(function(e){return c.default(e.style)}),f=r(i,o,s,l,a,u,d,u,d),h=f[0];return{currentStyles:f[1],currentVelocities:f[2],lastIdealStyles:f[3],lastIdealVelocities:f[4],mergedPropsStyles:h}},unmounting:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=r(this.props.willEnter,this.props.willLeave,this.props.didLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],i=t[1],o=t[2],s=t[3],l=t[4],c=0;c<e.length;c++){var u=e[c].style,p=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var f=u[d];"number"==typeof f&&(p||(p=!0,i[c]=a({},i[c]),o[c]=a({},o[c]),s[c]=a({},s[c]),l[c]=a({},l[c]),n[c]={key:n[c].key,data:n[c].data,style:a({},n[c].style)}),i[c][d]=f,o[c][d]=0,s[c][d]=f,l[c][d]=0,n[c].style[d]=f)}}this.setState({currentStyles:i,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:s,lastIdealVelocities:l})},startAnimationIfNecessary:function(){var e=this;this.unmounting||(this.animationID=g.default(function(t){if(!e.unmounting){var n=e.props.styles,i="function"==typeof n?n(o(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):n;if(s(e.state.currentStyles,i,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var a=t||v.default(),l=a-e.prevTime;if(e.prevTime=a,e.accumulatedTime=e.accumulatedTime+l,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var c=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),u=Math.floor(e.accumulatedTime/(1e3/60)),p=r(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,i,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),d=p[0],h=p[1],m=p[2],b=p[3],y=p[4],g=0;g<d.length;g++){var w=d[g].style,E={},_={},O={},S={};for(var I in w)if(Object.prototype.hasOwnProperty.call(w,I)){var j=w[I];if("number"==typeof j)E[I]=j,_[I]=0,O[I]=j,S[I]=0;else{for(var k=b[g][I],C=y[g][I],T=0;T<u;T++){var x=f.default(1e3/60/1e3,k,C,j.val,j.stiffness,j.damping,j.precision);k=x[0],C=x[1]}var M=f.default(1e3/60/1e3,k,C,j.val,j.stiffness,j.damping,j.precision),N=M[0],A=M[1];E[I]=k+(N-k)*c,_[I]=C+(A-C)*c,O[I]=k,S[I]=C}}b[g]=O,y[g]=S,h[g]=E,m[g]=_}e.animationID=null,e.accumulatedTime-=u*(1e3/60),e.setState({currentStyles:h,currentVelocities:m,lastIdealStyles:b,lastIdealVelocities:y,mergedPropsStyles:d}),e.unreadPropStyles=null,e.startAnimationIfNecessary()}}))},componentDidMount:function(){this.prevTime=v.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=v.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){this.unmounting=!0,null!=this.animationID&&(g.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&O.default.Children.only(t)}});t.default=C,e.exports=t.default},nTc3:function(e,t,n){"use strict";function i(e,t,n,i,s,r,a,l){if(o(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,s,r,a,l],p=0;c=new Error(t.replace(/%s/g,function(){return u[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(e){};e.exports=i},nZpL:function(e,t,n){"use strict";function i(e,t,n){for(var i={},o=0;o<e.length;o++)i[e[o].key]=o;for(var s={},o=0;o<t.length;o++)s[t[o].key]=o;for(var r=[],o=0;o<t.length;o++)r[o]=t[o];for(var o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(s,e[o].key)){var a=n(o,e[o]);null!=a&&r.push(a)}return r.sort(function(e,n){var o=s[e.key],r=s[n.key],a=i[e.key],l=i[n.key];if(null!=o&&null!=r)return s[e.key]-s[n.key];if(null!=a&&null!=l)return i[e.key]-i[n.key];if(null!=o){for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(o<s[u]&&l>i[u])return-1;if(o>s[u]&&l<i[u])return 1}}return 1}for(var c=0;c<t.length;c++){var u=t[c].key;if(Object.prototype.hasOwnProperty.call(i,u)){if(r<s[u]&&a>i[u])return 1;if(r>s[u]&&a<i[u])return-1}}return-1})}t.__esModule=!0,t.default=i,e.exports=t.default},rH1J:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function s(e){if(p===clearTimeout)return clearTimeout(e);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function r(){m&&f&&(m=!1,f.length?h=f.concat(h):b=-1,h.length&&a())}function a(){if(!m){var e=o(r);m=!0;for(var t=h.length;t;){for(f=h,h=[];++b<t;)f&&f[b].run();b=-1,t=h.length}f=null,m=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,p,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(e){p=i}}();var f,h=[],m=!1,b=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||o(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},raWP:function(e,t,n){(function(t){(function(){var n,i,o,s,r,a;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-r)/1e6},i=t.hrtime,n=function(){var e;return e=i(),1e9*e[0]+e[1]},s=n(),a=1e9*t.uptime(),r=s-a):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n("rH1J"))},uJpZ:function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n("fOgc"),f=n("zISO"),h=function(t){function n(e){var t;return o(this,n),t=a(this,l(n).call(this,e)),t.submit=t.submit.bind(c(t)),t}return u(n,t),r(n,[{key:"submit",value:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=this.widget.getMembers(),i=this.widget.getMembers("share_groups"),o=this.widget.getTokenCount();if(0!==o){var s=this.widget.isViewOnly();MM.ui.disableButton(this.submitButton),new Ajax.Request("/sharing/invite/"+App.config.map_id,{requestHeaders:{Accept:"application/json"},parameters:{collaborators:n,groups:i,send_invitations:!0,permission:s?1:2,message:""},onSuccess:function(e){var n=e.responseJSON;MM.ui.enableButton(t.submitButton),t.widget.clearTokens();var i=[],s=Message.INFO;n.errors&&(i=n.errors,s=Message.ERROR);var r=o-i.length;r>0&&i.push(I18n.t("js.invitations_sent",{count:r})),Message.show(i.join("<br />"),s),t.props.onSubmit()},onFailure:function(e){MM.ui.enableButton(t.submitButton),429===e.status?Message.show(I18n.t("js.error_on_invitations_rate_exceeded"),Message.ERROR):Message.show(I18n.t("js.error_on_invitations_try_again_later"),Message.ERROR)}})}}},{key:"render",value:function(){var t=this;return e.createElement("div",{className:"widget-container invitation-widget "+this.props.className},e.createElement(f.a,{title:this.props.title,className:"mt-10 mb-5"}),e.createElement("form",{className:"mb-20",onSubmit:this.submit},e.createElement("div",{className:"h-flex-start"},e.createElement(d.a,{ref:function(e){return t.widget=e},className:"w-200 mr-10",placeholder:I18n.t("js.email_or_name"),hideTokenizerHeader:this.props.hideTokenizerHeader}),e.createElement("input",{ref:function(e){return t.submitButton=e},type:"submit",className:"button default",value:I18n.t("js.invite")}))))}}]),n}(e.Component);h.defaultProps={className:"",onSubmit:function(){}},t.a=h}).call(t,n("ccIB"))},xY9N:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return a});var i={isFetched:!1,preferences:[]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};new Ajax.Request("/team_preferences.json",{method:"GET",onSuccess:function(t){i.isFetched=!0,i.preferences=t.responseJSON,e(i.preferences)}})},s={ALLOW_LINK_SHARE:"allow_link_share",ALLOW_PUBLISH:"allow_publish",ALLOW_ACTIVITY:"allow_activity"},r=function(e){var t=i.preferences.find(function(t){return t.name===e});return!t||"0"!==t.value},a=function(e){i.isFetched?e(i.preferences):o(e)}},zE3B:function(e,t,n){"use strict";function i(e,t){return o({},a,t,{val:e})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=i;var s=n("ZEcb"),r=function(e){return e&&e.__esModule?e:{default:e}}(s),a=o({},r.default.noWobble,{precision:.01});e.exports=t.default},zEob:function(e,t,n){"use strict";var i={};e.exports=i}});