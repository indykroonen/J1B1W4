webpackJsonp([169],{"1NHa":function(e,t){MM.ui.FormValidator=Class.create({initialize:function(e,t,i){this.fieldId=e,this.url=t,this.options=i,this.observeField()},observeField:function(){mm$(this.fieldId)&&new Form.Element.EventObserver(this.fieldId,this.checkField.bind(this))},checkField:function(){var e=mm$(this.fieldId).value;new Ajax.Request(this.url,{parameters:"value="+encodeURIComponent(e),onComplete:function(e){var t=e.responseJSON;void 0!==t&&t&&(t.errorMessage||t.extraInfo?this.options.onErrorMessage&&this.options.onErrorMessage(t):this.options.onSuccess&&this.options.onSuccess(),this.options.onComplete&&this.options.onComplete())}.bind(this)})}})},"1V60":function(e,t){MM.onload={callbacks:[],done:!1,onload:function(){this.done||(this.done=!0,this.callbacks.forEach(function(e){return e()}))},add:function(e){"function"==typeof e&&(this.done?e():this.callbacks.push(e))},listen:function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.onload.bind(this),!1):this.onload()}},MM.onload.listen()},"2SyW":function(e,t){"undefined"==typeof MM&&(MM={}),void 0===MM.utils&&(MM.utils={}),MM.utils.SHA1={translate:function(e){function t(e,t){return e<<t|e>>>32-t}function i(e){var t,i,n="";for(t=7;t>=0;t--)i=e>>>4*t&15,n+=i.toString(16);return n}var n,o,s,a,r,l,c,d,u,h=new Array(80),p=1732584193,m=4023233417,f=2562383102,g=271733878,b=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e);var v=e.length,w=new Array;for(o=0;o<v-3;o+=4)s=e.charCodeAt(o)<<24|e.charCodeAt(o+1)<<16|e.charCodeAt(o+2)<<8|e.charCodeAt(o+3),w.push(s);switch(v%4){case 0:o=2147483648;break;case 1:o=e.charCodeAt(v-1)<<24|8388608;break;case 2:o=e.charCodeAt(v-2)<<24|e.charCodeAt(v-1)<<16|32768;break;case 3:o=e.charCodeAt(v-3)<<24|e.charCodeAt(v-2)<<16|e.charCodeAt(v-1)<<8|128}for(w.push(o);w.length%16!=14;)w.push(0);for(w.push(v>>>29),w.push(v<<3&4294967295),n=0;n<w.length;n+=16){for(o=0;o<16;o++)h[o]=w[n+o];for(o=16;o<=79;o++)h[o]=t(h[o-3]^h[o-8]^h[o-14]^h[o-16],1);for(a=p,r=m,l=f,c=g,d=b,o=0;o<=19;o++)u=t(a,5)+(r&l|~r&c)+d+h[o]+1518500249&4294967295,d=c,c=l,l=t(r,30),r=a,a=u;for(o=20;o<=39;o++)u=t(a,5)+(r^l^c)+d+h[o]+1859775393&4294967295,d=c,c=l,l=t(r,30),r=a,a=u;for(o=40;o<=59;o++)u=t(a,5)+(r&l|r&c|l&c)+d+h[o]+2400959708&4294967295,d=c,c=l,l=t(r,30),r=a,a=u;for(o=60;o<=79;o++)u=t(a,5)+(r^l^c)+d+h[o]+3395469782&4294967295,d=c,c=l,l=t(r,30),r=a,a=u;p=p+a&4294967295,m=m+r&4294967295,f=f+l&4294967295,g=g+c&4294967295,b=b+d&4294967295}var u=i(p)+i(m)+i(f)+i(g)+i(b);return u.toLowerCase()}}},"2nQK":function(e,t){Effect.Scroll=Class.create(),Object.extend(Object.extend(Effect.Scroll.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);var t=Object.extend({x:0,y:0,mode:"absolute"},arguments[1]||{});this.start(t)},setup:function(){this.options.continuous&&!this.element._ext&&(this.element.cleanWhitespace(),this.element._ext=!0,this.element.appendChild(this.element.firstChild)),this.originalLeft=this.element.scrollLeft,this.originalTop=this.element.scrollTop,"absolute"==this.options.mode&&(this.options.x-=this.originalLeft,this.options.y-=this.originalTop)},update:function(e){this.element.scrollLeft=this.options.x*e+this.originalLeft,this.element.scrollTop=this.options.y*e+this.originalTop}})},"3oL9":function(e,t){void 0===window.MM&&(window.MM={plugins:{}})},"46sc":function(e,t,i){function n(e){var t=o[e];return t?i.e(t[1]).then(function(){return i(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}var o={"./account":["9uRu",21],"./account.js":["9uRu",21],"./account/ajaxForm":["utw5",63],"./account/ajaxForm.js":["utw5",63],"./account/branding":["MypR",20],"./account/branding.js":["MypR",20],"./account/integrations/driveConfiguration":["rMT2",29],"./account/integrations/driveConfiguration.js":["rMT2",29],"./account/myAccount":["9fmA",13],"./account/myAccount.js":["9fmA",13],"./account/team/draggableMember":["yS47",5],"./account/team/draggableMember.js":["yS47",5],"./account/team/droppableGroup":["87nN",6],"./account/team/droppableGroup.js":["87nN",6],"./account/team/droppableProduct":["e/r1",9],"./account/team/droppableProduct.js":["e/r1",9],"./account/team/filter":["jpFG",2],"./account/team/filter.js":["jpFG",2],"./account/team/footer":["Q9uu",24],"./account/team/footer.js":["Q9uu",24],"./account/team/group":["lDYt",16],"./account/team/group.js":["lDYt",16],"./account/team/groupList":["sdpK",4],"./account/team/groupList.js":["sdpK",4],"./account/team/header":["aOvo",14],"./account/team/header.js":["aOvo",14],"./account/team/helpers":["Aghy",33],"./account/team/helpers.js":["Aghy",33],"./account/team/member":["z2xN",15],"./account/team/member.js":["z2xN",15],"./account/team/memberList":["7EO5",3],"./account/team/memberList.js":["7EO5",3],"./account/team/memberListing":["ixeA",0],"./account/team/memberListing.js":["ixeA",0],"./account/team/memberPopoverItems":["8ozP",31],"./account/team/memberPopoverItems.js":["8ozP",31],"./account/team/product":["L88J",30],"./account/team/product.js":["L88J",30],"./account/team/productList":["lqqL",8],"./account/team/productList.js":["lqqL",8],"./account/team/teamMembers":["KVbW",1],"./account/team/teamMembers.js":["KVbW",1],"./account/themesListing":["s4EN",19],"./account/themesListing.js":["s4EN",19],"./account/turboHelpers":["DIoc",62],"./account/turboHelpers.js":["DIoc",62],"./admin/newsletter/nlOption":["PMpj",38],"./admin/newsletter/nlOption.js":["PMpj",38],"./admin/newsletter/sendForm":["GhO3",27],"./admin/newsletter/sendForm.js":["GhO3",27],"./avatar":["uY1s",61],"./avatar.js":["uY1s",61],"./avatarCropper":["UQf7",60],"./avatarCropper.js":["UQf7",60],"./billing/billing/billingDetails":["xsdN",23],"./billing/billing/billingDetails.js":["xsdN",23],"./billing/billing/billingSummary":["Biu+",48],"./billing/billing/billingSummary.js":["Biu+",48],"./billing/checkout":["DtVI",7],"./billing/checkout.js":["DtVI",7],"./billing/licenseDetails":["ghax",10],"./billing/licenseDetails.js":["ghax",10],"./billing/order/bundleOrderDetails":["Yfnc",12],"./billing/order/bundleOrderDetails.js":["Yfnc",12],"./billing/order/orderDetails":["bwdS",11],"./billing/order/orderDetails.js":["bwdS",11],"./billing/order/shared/billingCycleTile":["gstv",59],"./billing/order/shared/billingCycleTile.js":["gstv",59],"./billing/order/shared/currentCreditRow":["BO8X",58],"./billing/order/shared/currentCreditRow.js":["BO8X",58],"./billing/order/shared/licenseUserCountSelect":["w/4s",36],"./billing/order/shared/licenseUserCountSelect.js":["w/4s",36],"./billing/order/shared/orderSummary":["pobS",47],"./billing/order/shared/orderSummary.js":["pobS",47],"./billing/order/shared/payingNowRow":["3CRg",46],"./billing/order/shared/payingNowRow.js":["3CRg",46],"./billing/order/shared/promotionDiscountRow":["4Iu8",57],"./billing/order/shared/promotionDiscountRow.js":["4Iu8",57],"./billing/payment/braintreeDropin":["AdG3",37],"./billing/payment/braintreeDropin.js":["AdG3",37],"./billing/payment/existingPayment":["HkrC",40],"./billing/payment/existingPayment.js":["HkrC",40],"./billing/payment/paymentDetails":["2m+o",28],"./billing/payment/paymentDetails.js":["2m+o",28],"./billing/payment/reportException":["eSmF",56],"./billing/payment/reportException.js":["eSmF",56],"./billing/paymentMethod":["iyfq",22],"./billing/paymentMethod.js":["iyfq",22],"./billing/shared/countrySelect":["fch1",25],"./billing/shared/countrySelect.js":["fch1",25],"./contactForm":["ZHF+",55],"./contactForm.js":["ZHF+",55],"./embed":["pfuu",54],"./embed.js":["pfuu",54],"./export":["QoM4",18],"./export.js":["QoM4",18],"./home/welcome":["CU91",35],"./home/welcome.js":["CU91",35],"./import":["tGn0",53],"./import.js":["tGn0",53],"./likeButton":["8l38",41],"./likeButton.js":["8l38",41],"./partials/clipboard":["gZtH",32],"./partials/clipboard.js":["gZtH",32],"./partials/listing":["1I6g",43],"./partials/listing.js":["1I6g",43],"./passwordStrength":["MbHN",34],"./passwordStrength.js":["MbHN",34],"./sharing/publish":["eujK",45],"./sharing/publish.js":["eujK",45],"./sharing/share":["b+Rw",52],"./sharing/share.js":["b+Rw",52],"./sharing/skoletube":["niBU",51],"./sharing/skoletube.js":["niBU",51],"./socialButtons":["yPx3",42],"./socialButtons.js":["yPx3",42],"./teamStyles":["xWId",17],"./teamStyles.js":["xWId",17],"./training/course":["DWYK",39],"./training/course.js":["DWYK",39],"./training/course_content":["+0Nd",50],"./training/course_content.js":["+0Nd",50],"./training/course_menu":["5jMb",49],"./training/course_menu.js":["5jMb",49],"./training/course_navigation":["2aj7",44],"./training/course_navigation.js":["2aj7",44],"./training/training":["HGQt",26],"./training/training.js":["HGQt",26]};n.keys=function(){return Object.keys(o)},n.id="46sc",e.exports=n},"5cS7":function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}MM.utils.Url={getHashParams:function(){var e=window.location.hash;return e=e.replace("#",""),e.toQueryParams()},getOldHashParams:function(){return MM.utils.Url.oldHash?(MM.utils.Url.oldHash=MM.utils.Url.oldHash.replace("#",""),MM.utils.Url.oldHash.toQueryParams()):{}},toHashParams:function(e){return i(e)!==Hash&&(e=new Hash(e)),e.toQueryString()},add:function(e,t){var i=this.getHashParams();i[e]=t,window.location.hash=this.toHashParams(i)},remove:function(e){var t=this.getHashParams();delete t[e],window.location.hash=this.toHashParams(t)}},MM.utils.siteLocation={current:null,setLoc:function(e){MM.utils.siteLocation.current!==e&&(MM.utils.siteLocation.reset(),MM.utils.Url.add(e),MM.utils.siteLocation.current=e)},getLoc:function(){return MM.utils.siteLocation.current},reset:function(){MM.utils.siteLocation.current&&MM.utils.Url.remove(MM.utils.siteLocation.current),MM.utils.siteLocation.current=null}}},"8Dr6":function(e,t,i){"use strict";(function(e,t){var n=i("QTEg"),o=i("67vC"),s=i("SZxL");MM.ui={page:document.viewport.getDimensions(),onLoad:function(){Event.observe(window,"resize",MM.ui.onResize),MM.ui.pageTitle=document.title,MM.ui.onResize(),MM.ui.retinize()},onResize:function(e){MM.ui.page=document.viewport.getDimensions(),0===MM.ui.page.width&&0===MM.ui.page.height&&(MM.ui.page={width:parseInt(MM.status.params.width)||800,height:parseInt(MM.status.params.height)||600});var t=$("footer"),i=$$("section")[0];if(t&&t.getHeight()>0&&i){var n=MM.ui.page.height-t.offsetTop-t.getHeight();n>0&&i.setStyle({marginBottom:n+"px"})}"undefined"!=typeof UI&&UI.Registry.onResize()},retinize:function(){window.windowHasLoaded=!0,!o.isRetina&&"1"!=MM.status.params.retina||"0"==MM.status.params.retina||MM.utils.getCookie("retina")||MM.utils.setCookie("retina",1,99),"0"==MM.status.params.retina&&MM.utils.setCookie("retina",null)},getScrollBarWidth:function(){var e=document.body.style.overflow||"";document.body.style.overflow="hidden";var t=document.body.clientWidth;return document.body.style.overflow="scroll",t-=document.body.clientWidth,document.body.style.overflow=e||"",t},fieldEnable:function(){for(var e=$A(arguments),t=e.length;t>0;)mm$(e[--t]).disabled=!1,Element.removeClassName(e[t],"disabled")},fieldDisable:function(){for(var e=$A(arguments),t=e.length;t>0;)mm$(e[--t]).disabled=!0,Element.addClassName(e[t],"disabled")},disableButton:function(){for(var e=0,t=arguments.length;e<t;e++){var i=arguments[e],n=Object.isElement(i)?i:mm$(i);n&&(n.disabled=!0,n.href&&(n.href_old=n.href,n.removeAttribute?n.removeAttribute("href"):n.href="#"),n.onclick&&(n.onclick_old=n.onclick,n.onclick=null),$(n).observe("ajax:before",Event.stop),addClassName(n,"disabled o-50 h-cd"))}},enableButton:function(){for(var e=0,t=arguments.length;e<t;e++){var i=arguments[e],n=Object.isElement(i)?i:mm$(i);n&&(n.disabled=!1,n.href_old&&(n.href=n.href_old),n.onclick_old&&(n.onclick=n.onclick_old),$(n).stopObserving("ajax:before",Event.stop),removeClassName(n,"disabled o-50 h-cd"))}},addDisabledOverlay:function(e){e=$(e);var t=new Element("div",{style:"position:absolute; z-index:9999; top: 0; left: 0; width:"+e.clientWidth+"px; height:"+e.clientHeight+"px;"});e.parentNode.setStyle({position:"relative"}),e.parentNode.insert(t,{before:e})},buttonUnselect:function(){for(var e=$A(arguments),t=e.length;t>0;)Element.removeClassName(e[--t],"selected")},buttonSelect:function(){for(var e=$A(arguments),t=e.length;t>0;)Element.addClassName(e[--t],"selected")},positionPopover:function(e,t){t=t||{};var i=t.correction||[0,0],n=t.offset||e.options.offset||[0,0],o=t.opener||e.opener,s=[e.arrow.offsetWidth,e.arrow.offsetHeight],a=Element.getOffsetParent(e.parent),r=a===document.body?Element.viewportOffset(a):{top:0,left:0},l=1;"undefined"!=typeof canvas&&canvas&&hasAncestor(o,canvas.el)&&(l=App.ui.Zoom.getZoomFactor());var c,d=e.parent.clientWidth,u=e.parent.clientHeight,h=(o.getWidth()*l-d)/2+i[0]+n[0]-r.left,p=e.parent.classNames().detect(function(e){return["above","below","onleft","onright"].indexOf(e)>=0});switch(p){case"onleft":s.reverse(),h=-d-s[0]+i[0]+n[0]-r.left,c=-o.getHeight()/2+i[1]+n[1]-r.top,e.arrow.style.top=-c+(e.arrow.getHeight()/2-2)+"px";break;case"onright":s.reverse(),h=o.getWidth()*l+s[0]+i[0]+n[0]-r.left,c=-o.getHeight()/2+i[1]+n[1]-r.top,e.arrow.style.top=-c+(e.arrow.getHeight()/2-2)+"px";break;case"above":e.arrow.style.left=(d-s[0])/2-i[0]+"px",c=-u+n[1]-s[1]-r.top;break;case"below":default:e.arrow.style.left=(d-s[0])/2-i[0]+"px",e.arrow.style.top="",c=o.getHeight()*l+s[1]+n[1]-r.top}Element.clonePosition(e.parent,o,{offsetTop:c,offsetLeft:h,setWidth:!1,setHeight:!1});var m=Element.viewportOffset(e.parent);m!=[0,0]&&(m[0]<0?MM.ui.positionPopover(e,{correction:[i[0]+10,i[1]]}):m[0]>document.documentElement.clientWidth-d?MM.ui.positionPopover(e,{correction:[i[0]-10,i[1]]}):!hasClassName(e.parent,"above")&&m[1]>document.documentElement.clientHeight-UI.Registry.viewportOffset.bottom-u&&u<m[1]?(addClassName(e.parent,"above"),e.parent._clearAbove=!0,MM.ui.positionPopover(e,{correction:i})):e.parent.hasClassName("menu")&&"above"===p&&0===e.parent.select(".subitem").length&&m[1]<UI.Registry.viewportOffset.top+20&&(e.popover.list.setStyle({height:u+m[1]-UI.Registry.viewportOffset.top-20+"px",overflow:"auto"}),addClassName(e.popover.listContainer,"h-overflow"),MM.ui.positionPopover(e,{correction:i})))},smartSelect:function(e,t,i){$(t).select(i||"a").each(function(e){e.removeClassName("selected")}),$(e).addClassName("selected")},smartShow:function(e,t,i){$(t).select(i||"div").each(function(e){e.hide()}),$(e).show()},onSmartClick:function(e){e=$(e),MM.ui.smartSelect(e,"tab_btns","li"),MM.ui.smartShow("tab_content_"+e.id.substring(8),"tab_contents",".tabcontent")},bindSmartTabs:function(){$("tab_btns").select("li").each(function(e){Element.bindOnClick(e,MM.ui.onSmartClick.bind(this,e))})},centerAndShow:function(e,t){var i={top:(MM.ui.page.height-e.getHeight())/2+"px",left:(MM.ui.page.width-e.getWidth())/2+"px"};t?i.opacity=1:i.visibility="visible",e.setStyle(i)},showBusy:function(e){MM.ui._activity=new MM.ui.Activity(e)},hideBusy:function(){MM.ui._activity.close()},getZoomScale:function(e,t){t=Object.extend({paddingX:0,paddingY:0},t);var i=canvas.getContainerSize(),n=i.height/(e.height+2*t.paddingY),o=i.width/(e.width+2*t.paddingX),s=n>o?o:n;return t.maxScale&&s>t.maxScale&&(s=t.maxScale),t.minScale&&s<t.minScale&&(s=t.minScale),s},getColorWithAlpha:function(e,t){return"rgba("+MM.ui.getRGB(e).join(",")+","+t+")"},getRGB:function(e){return e=e.toLowerCase(),[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4),16)]},getHEX:function(e){return("0"+e[0].toString(16)).slice(-2)+("0"+e[1].toString(16)).slice(-2)+("0"+e[2].toString(16)).slice(-2)},lightenColor:function(e,t){return this._shadeColor(e,t,1)},darkenColor:function(e,t){return this._shadeColor(e,t,-1)},_shadeColor:function(e,t,i){if(6!=e.length)return e;e=this.getRGB(e);for(var n=0;n<3;n++)e[n]+=i*Math.round(e[n]*t),e[n]>255&&(e[n]=255),e[n]<0&&(e[n]=0);return this.getHEX(e)},showFlashMessage:function(e,t){t=Object.extend({type:"notice",duration:15},t);var i=mm$("site-flash-messages");i&&(i.innerHTML='<div class="ui-message-bar"><div row class="ui-message '+t.type+'"><div class="ui-icon"></div><div grow><span>'+e+"</span></div></div></div>",removeClassName(i,"h-hidden"),setTimeout(MM.ui.hideFlashMessage,1e3*t.duration))},hideFlashMessage:function(){var e=mm$("site-flash-messages");addClassName(e,"h-hidden")},openHelp:function(e,t){var i="https://support.mindmeister.com/hc/en-us";return t&&t.length||(t="articles"),e&&(i+="/"+t+"/"+e),window.open(i,"_blank"),!1},buildAccountPopover:function(i,o){var a=new s.c("account",{onBeforeShow:function(){if(ServerData.user.anonymous)return MM.ui.dialogs.dialogLogin(user),!1},onShow:function(){e.render(t.createElement(n.a,{user:ServerData.user,products:i,hideLogout:o}),a.widgetContainer)},onHide:function(){return e.unmountComponentAtNode(a.widgetContainer)}})}},MM.onload.add(MM.ui.onLoad)}).call(t,i("x9tB"),i("ccIB"))},AhJ9:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(i("3oL9"),i("Fp8Z"),i("s/GO"),i("lxx2"),i("OqGN"),i("VWie"),i("i+25"));"undefined"==typeof MM&&(MM={}),MM.ua={supportedBrowsers:["Firefox","Safari","Chrome","Internet Explorer","Edge","Opera"],isPhone:!1,isTablet:!1,isBrowser:function(e,t){t=Object.extend({},t);var i=ServerData.ua;return t.version?i.browser===e&&i.version&&i.version===t.version:t.maxVersion?i.browser===e&&i.version&&i.version<=t.maxVersion:t.minVersion?i.browser===e&&i.version&&i.version>=t.minVersion:i.browser===e},isSupported:function(){var e=ServerData.ua;return MM.ua.supportedBrowsers.indexOf(e.browser)>=0},isPlatform:function(e){return ServerData.ua.platform===e},observeTouchSafe:function(e,t,i){Event.observe(e,t,i),this.touchEvents()&&Event.observe(e,this.getEvent()[t],i)},stopObservingTouchSafe:function(e,t,i){Event.stopObserving(e,t,i),this.touchEvents()&&Event.stopObserving(e,this.getEvent()[t],i)},touchEvents:function(){return Modernizr.touchevents},getEvent:function(){return this.touchEvents()?{mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend",mousewheel:"gesturechange"}:{mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",mousewheel:"wheel"}},getDeviceType:function(){var e=Object(n.a)();this["is"+e.charAt(0).toUpperCase()+e.slice(1)]=!0,this.isMobile="phone"===e||"tablet"===e,this.isNativeApp=Object(n.b)()}},MM.ua.getDeviceType();var o=(i("5cS7"),i("2SyW"),i("jGtj"),i("uLj8"),i("mH1P"),i("1V60"),i("wcf2"),i("AkyC"),i("HtoY"),i("8Dr6"),i("szEV"),i("s7LD"),i("hV6h"),i("t9BA"),i("oCUf"),i("Myjp"),i("jtks"),i("VkG4"),i("Q1hZ"),i("ZQgP"),i("tCJk"),i("1NHa"),i("2nQK"),{filter:Prototype.Browser.WebKit?"WebkitFilter":"MozFilter"}),s={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutExpo:"cubic-bezier(.19,1,.22,1)"},a={prefix:function(){var e=document.createElement("dummy").style,t="Webkit Moz O ms Khtml".split(" "),i=o;return function(n){if(void 0===i[n]){var o=n.charAt(0).toUpperCase()+n.substr(1),s=(n+" "+t.join(o+" ")+o).split(" ");i[n]=null;for(var a in s)if(void 0!==e[s[a]]){i[n]=s[a];break}}return i[n]}}(),set:function(e,t){var i,n,o;for(i in t)t.hasOwnProperty(i)&&(n=a.prefix(i),o=t[i],s[o]&&(o=s[o]),null!==n&&(e.style[n]=t[i]));return e},remove:function(e,t){var i;return t.each(function(t){i=a.prefix(t),removeStyle(e,i)}),e},translate:function(e,t){for(var i in Object.keys(e)){var n=Object.keys(e)[i],o=String(e[n]);-1===o.indexOf("%")&&-1===o.indexOf("px")&&(e[n]=o+"px")}return t?" translate3d("+e.x+","+e.y+","+e.z+") ":" translate("+e.x+","+e.y+")"},rotate:function(e,t,i){var n=" rotateX("+e.x+"deg) ",o=" rotateY("+e.y+"deg) ",s=" rotateZ("+e.z+"deg) ";return i||(s=""),t?s+o+n:n+o+s},scale:function(e){return" scale("+e+") "},perspective:function(e,t){return t?" perspective("+e+"px) ":""},visible:function(e){return"none"!=$(e).style.display&&"0"!=$(e).style.opacity},whichTransitionEvent:function(){var e,t=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in i)if(void 0!==t.style[e])return i[e]},Effect:{Appear:function(e){$(e).setStyle({display:"block",opacity:1})},Fade:function(e){$(e).setStyle({opacity:0})},BlindUp:function(e){a.set(e,{transform:"scaleY(0)"}),setTimeout(function(){e.hide()},500)},Morph:function(e,t){t=t||{},a.set(e,Object.extend(t.style,{transition:"all "+(t.duration||"0.5")+"s ease-in-out"}))}}},r=a,l=i("TjA0"),c=i("SZxL");window.GeneralPopover=c.a,window.Popover=c.b,window.Window=l.b,window.Windows=l.c,window.Dialog=l.a,window.CSS=r},AkyC:function(e,t){MM.onfocus=[],MM.onblur=[],MM.onload.add(function(){addClassName(document.body,"visible")}),function(){function e(e){e=e||window.event,"focus"==e.type||"focusin"==e.type?t():"blur"==e.type||"focusout"==e.type?i():this[n]?i():t()}function t(){removeClassName(document.body,"hidden"),addClassName(document.body,"visible");for(var e=0;e<MM.onfocus.length;e++)MM.onfocus[e]()}function i(){removeClassName(document.body,"visible"),addClassName(document.body,"hidden");for(var e=0;e<MM.onblur.length;e++)MM.onblur[e]()}var n,o,s={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange"};for(n in s)if(s.hasOwnProperty(n)&&n in document){o=s[n];break}o?document.addEventListener(o,e):window.onfocus=window.onblur=e}()},Fp8Z:function(e,t){function i(e){return document.getElementById(e)}function n(e,t){var i=e.style[t];if(!i||"auto"==i){var n=document.defaultView?document.defaultView.getComputedStyle(e,null):null;i=n?n[t]:null}return"opacity"==t?i?parseFloat(i):1:"auto"==i?null:i}function o(e,t){var i=[];if(!e.hasChildNodes())return[];for(var n=e.childNodes,o=0,s=n.length;o<s;o++){var a=n[o];t?1==a.nodeType&&t.call(null,a)&&i.push(a):1==a.nodeType&&i.push(a)}return i}function s(e){if(e.style&&"none"==e.style.display)return!1;for(var t=e.parentNode;t&&t!=document;){if(t.style&&t.style.display&&"none"==t.style.display)return!1;t=t.parentNode}return!0}function a(e,t){var i=[];if(!e.hasChildNodes())return[];for(var n=e.childNodes,o=0,s=n.length;o<s;o++){var r=n[o];1==r.nodeType&&t&&t.call(null,r)&&i.push(r),r.hasChildNodes()&&(i=i.concat(a(r,t)))}return i}function r(e,t){for(var i=!1;e&&!i;)i=e.parentNode==t,e=e.parentNode;return i}function l(e,t){var i=e.nextSibling;if(!i)return null;if(t){if(1==i.nodeType&&t.call(null,i))return i}else if(1==i.nodeType)return i;return l(i,t)}function c(e,t){var i=e.previousSibling;if(!i)return null;if(t){if(1==i.nodeType&&t.call(null,i))return i}else if(1==i.nodeType)return i;return c(i,t)}function d(e){return l(e,function(t){return t.tagName==e.tagName})}function u(e){return c(e,function(t){return t.tagName==e.tagName})}function h(e,t){return a(e.parentNode,function(i){return t.call(null,i)&&i!=e})}function p(e){return[e.offsetWidth,e.offsetHeight]}function m(e,t){e&&t&&k(e,t,function(e,t){-1===e.indexOf(t)&&e.push(t)})}function f(e,t){e&&t&&k(e,t,function(e,t){var i=e.indexOf(t);i>=0&&e.splice(i,1)})}function g(e,t){b(e,t)?f(e,t):m(e,t)}function b(e,t){return!(!e||!t)&&C(e).indexOf(t)>=0}function v(e){e.style.display="none"}function w(e){e.style.display=""}function y(e){e.parentNode.removeChild(e)}function _(e,t){return void 0===e.dataset?e.getAttribute("data-"+t):e.dataset[t.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})]}var M=function(e){return e.split(/\s+/g)},C=function(e){var t=e.getAttribute("class");return t?M(t):[]},k=function(e,t,i){var n=C(e);M(t).forEach(function(e){i(n,e)}),e.className=n.join(" ")};window.mm$=i,window.getStyle=n,window.childElements=o,window.isVisible=s,window.descendants=a,window.hasAncestor=r,window.nextSibling=l,window.previousSibling=c,window.nextTwin=d,window.previousTwin=u,window.siblings=h,window.getDimensionsAsArray=p,window.addClassName=m,window.removeClassName=f,window.toggleClassName=g,window.hasClassName=b,window.hide=v,window.show=w,window.remove=y,window.getDataSet=_},HtoY:function(e,t){window.UI={},window.UI.Registry={elements:[],mode:null,viewportOffset:{top:0,right:0,bottom:0,left:0},add:function(e,t){this.elements.push(e),Object.extend(e,UI.Element),e.properties=t},remove:function(e){this.elements=this.elements.without(e)},notify:function(e,t){e[t+"Handler"]&&"function"==typeof e[t+"Handler"]&&e[t+"Handler"]()},onResize:function(){this.elements.invoke("onResizeHandler")},toggleMode:function(e){this.mode!=e&&(this.mode=e,this.elements.invoke("toggleModeHandler",e))},toggleFullScreen:function(e){this.fullScreen!==e&&(this.elements.invoke("toggleFullScreenHandler",e),this.fullScreen=e)},getViewportOffset:function(e,t){return this.viewportOffset[e]+(t||15)},updateViewportOffset:function(){this.viewportOffset={top:0,right:0,bottom:0,left:0},this.elements.each(function(e){e.visible&&e.viewportSpace&&["top","right","bottom","left"].each(function(t){e.viewportSpace[t]&&(this.viewportOffset[t]+=e.viewportSpace[t])}.bind(this))}.bind(this))}},UI.Element={showHandler:function(){this.visible=!0,this.onResizeHandler(),this.mode!=UI.Registry.mode&&this.toggleModeHandler(UI.Registry.mode)},hideHandler:function(){this.visible=!1,UI.Registry.updateViewportOffset()},onResizeHandler:function(){this.visible&&this.onResize&&this.onResize(),UI.Registry.updateViewportOffset()},toggleModeHandler:function(e){this.mode=e,this["to"+e.capitalize()+"Mode"]&&this["to"+e.capitalize()+"Mode"]()},toggleFullScreenHandler:function(e){e?(this.previouslyVisible=this.visible,this.visible&&"function"==typeof this.hide&&this.hide(!0)):(this.previouslyVisible&&"function"==typeof this.show&&this.show(!0),this.previouslyVisible=null)}}},Myjp:function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}MM.ui.Lightbox=function(){var e,t,n,o,s,a,r,l,c,d,u=0;return{show:function(i,h,p,m,f,g,b){u||(t=new Element("div",{id:"lightbox",class:"popover"+(b?" "+b:"")}),n=new Element("div",{id:"tinymask"}),o=new Element("div",{id:"tinycontent"}),document.body.appendChild(n),document.body.appendChild(t),t.appendChild(o),e=new Element("div",{id:"tinyclose"}).update(MM.ui.icon({name:"closer",size:20})),e.onclick=MM.ui.Lightbox.hide.bind(this),t.appendChild(e),n.onclick=MM.ui.Lightbox.hide.bind(this),window.onresize=MM.ui.Lightbox.resize,u=1),f?(o.style.display="none",t.style.width=t.style.height="100px"):(t.style.width=p?p+"px":"auto",t.style.height=m?m+"px":"auto",t.style.backgroundImage="none"),h||(o.innerHTML=i),this.mask(),s=i,a=h,r=p,l=m,c=f,this.alpha(n,1,80,3),g&&setTimeout(function(){MM.ui.Lightbox.hide()},1e3*g),(d=$("tinybox_image"))&&(d.onload=function(e){MM.ui.Lightbox.pos()}),this.keymap=new MM.utils.KeyMap(document,"keymap_lightbox",[{key:MM.utils.KeyEvent.ESC,fn:this.hide.bind(this)}]),this.keymap.enable()},fill:function(e,i,n,o,s){i?(t.style.backgroundImage="",new Ajax.Request(e,{asynchronous:!0,evalScripts:!0,onComplete:function(e){MM.ui.Lightbox.psh(e.responseText,n,o,s)}})):this.psh(e,n,o,s)},psh:function(e,i,n,s){if(s){if(i&&n)o.innerHTML=e;else{var a=t.style.width,r=t.style.height;o.innerHTML=e,t.style.width=i?i+"px":"",t.style.height=n?n+"px":"",o.style.display="",i=parseInt(o.offsetWidth),n=parseInt(o.offsetHeight),o.style.display="none",t.style.width=a,t.style.height=r}this.size(t,i,n,4)}else t.style.backgroundImage="none",o.innerHTML=e},hide:function(){this.keymap&&(this.keymap.disable(),this.keymap=null),MM.ui.Lightbox.alpha(t,-1,0,3)},resize:function(){MM.ui.Lightbox.pos(),MM.ui.Lightbox.mask()},mask:function(){n.style.height=MM.ui.Page.theight()+"px",n.style.width="",n.style.width=MM.ui.Page.twidth()+"px"},pos:function(){var e=MM.ui.Page.height()/2-t.offsetHeight/2;e=e<10?10:e,t.style.top=e+MM.ui.Page.top()+"px",t.style.left=MM.ui.Page.width()/2-t.offsetWidth/2+"px"},alpha:function(e,t,i,n){clearInterval(e.ai),1==t&&(e.style.opacity=0,e.style.filter="alpha(opacity=0)",e.style.display="block",this.pos()),e.ai=setInterval(function(){MM.ui.Lightbox.twalpha(e,i,t,n)},10)},twalpha:function(e,i,d,u){var h=Math.round(100*e.style.opacity);if(h==i)clearInterval(e.ai),-1==d?(e.style.display="none",e==t?MM.ui.Lightbox.alpha(n,-1,0,2):o.innerHTML=t.style.backgroundImage=""):e==n?this.alpha(t,1,100,5):MM.ui.Lightbox.fill(s,a,r,l,c);else{var p=h+Math.ceil(Math.abs(i-h)/u)*d;e.style.opacity=p/100,e.style.filter="alpha(opacity="+p+")"}},size:function(e,t,n,o){e="object"==i(e)?e:$(e),clearInterval(e.si);var s=e.offsetWidth,a=e.offsetHeight,r=s-parseInt(e.style.width),l=a-parseInt(e.style.height),c=s-r>t?-1:1,d=a-l>n?-1:1;e.si=setInterval(function(){MM.ui.Lightbox.twsize(e,t,r,c,n,l,d,o)},10)},twsize:function(e,i,n,s,a,r,l,c){var d=e.offsetWidth-n,u=e.offsetHeight-r;Math.abs(i-d)<5&&Math.abs(a-u)<5?(clearInterval(e.si),t.style.backgroundImage="none",o.style.display="block"):(d!=i&&(e.style.width=d+Math.ceil(Math.abs(i-d)/c)*s+"px"),u!=a&&(e.style.height=u+Math.ceil(Math.abs(a-u)/c)*l+"px"),this.pos())}}}(),MM.ui.Page=function(){return{top:function(){return document.body.scrollTop||document.documentElement.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight},theight:function(){var e=document,t=e.body,i=e.documentElement;return Math.max(Math.max(t.scrollHeight,i.scrollHeight),Math.max(t.clientHeight,i.clientHeight))},twidth:function(){var e=document,t=e.body,i=e.documentElement;return Math.max(Math.max(t.scrollWidth,i.scrollWidth),Math.max(t.clientWidth,i.clientWidth))}}}()},OqGN:function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}MM.utils.KeyMap=function(e,t,i,n){this.el=$(e),this.id=t,this.eventName=n||"keydown",this.bindings=[],this._usefulKeys=new Array,i&&this.addBinding(i),this._listener=this.handleKeyDown.bindAsEventListener(this),this.enable()},MM.utils.KeyMap.prototype={stopEvent:!0,addBinding:function(e){if(Object.isArray(e))for(var t=0,i=e.length;t<i;t++)this.addBinding(e[t]);else{if("string"==typeof e.key){for(var n=[],o=e.key.toUpperCase(),s=0,i=o.length;s<i;s++)n.push(o.charCodeAt(s));e.key=n}Object.isArray(e.key)?e.key.each(function(t){var i=Object.extend(e,{key:t});this.addSingleBinding(i)}.bind(this)):this.addSingleBinding(e)}},addSingleBinding:function(e){var t=e.key,i=e.shift,n=e.notShift,o=e.ctrl,s=e.notCtrl,a=e.alt,r=e.notAlt,l=e.fn||e.handler,c=e.scope,d=e.withEvent,u=void 0!==e.stopEvent?e.stopEvent:this.stopEvent,h={code:t,shift:i,notShift:n,ctrl:o,notCtrl:s,alt:a,notAlt:r};if(!this.hasUsefulKey(h)){this.addUsefulKey(h);var p=function(e){if(!(i&&!e.shiftKey||n&&e.shiftKey||o&&!e.ctrlKey||s&&e.ctrlKey||a&&!e.altKey||r&&e.altKey)){e.getKey()===t&&(u&&e.stopEvent(),d?l.call(c||window,e):l.call(c||window))}};this.bindings.push(p)}},addUsefulKey:function(e){this._usefulKeys=this._usefulKeys.concat(e)},hasUsefulKey:function(e){return this._usefulKeys.any(function(t){return e.code==t.code&&!!t.alt==!!e.alt&&!!t.shift==!!e.shift&&!!t.ctrl==!!e.ctrl&&!!t.notShift==!!e.notShift&&!!t.notCtrl==!!e.notCtrl&&!!t.notAlt==!!e.notAlt})},isUsefulEvent:function(e){var t=e.getKey();return this._usefulKeys.any(function(i){return!(t!=i.code||!!i.alt!=!!e.altKey||!!i.shift!=!!e.shiftKey||!!i.ctrl!=!!e.ctrlKey||i.notShift&&e.shiftKey||i.notCtrl&&e.ctrlKey||i.notAlt&&e.altKey)})},on:function(e,t,n){var o,s,a,r;"object"!=i(e)||Object.isArray(e)?o=e:(o=e.key,s=e.shift,e.notShift,a=e.ctrl,e.notCtrl,r=e.alt,e.notAlt),this.addBinding({key:o,shift:s,notShift:e.notShift,ctrl:a,notCtrl:e.notCtrl,alt:r,notAlt:e.notAlt,fn:t,scope:n})},handleKeyDown:function(e){if(e=MM.utils.KeyEvent.setEvent(e),this.enabled)for(var t=this.bindings,i=0,n=t.length;i<n;i++)t[i].call(this,e)},isEnabled:function(){return this.enabled},enable:function(){this.enabled||(this.el.observe("keydown",this._listener),this.enabled=!0)},disable:function(){this.enabled&&(this.el.stopObserving("keydown",this._listener),this.enabled=!1)}},MM.utils.KeyEvent=function(){var e={63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35,63237:113,63243:119};return MM.utils.KeyEventImpl=function(e){e&&this.setEvent(e.browserEvent||e)},MM.utils.KeyEventImpl.prototype={browserEvent:null,button:-1,shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1,BACKSPACE:8,TAB:9,RETURN:13,ENTER:13,SHIFT:16,CONTROL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F5:116,F6:117,F8:119,F9:120,F10:121,PLUS:[43,61,107,171,187],MINUS:[95,109,173,189],NINE_FIX:[57,221],QUESTION_MARK:191,setEvent:function(e){return e==this||e&&e.browserEvent?e:(this.browserEvent=e,this.type=e.type,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey||e.metaKey,this.altKey=e.altKey,this.metaKey=e.metaKey,this.keyCode=e.keyCode,this.charCode=e.charCode,this.target=e.element(),this)},stopEvent:function(){this.browserEvent&&this.browserEvent.stop()},isNavKeyPress:function(){var t=this.keyCode;return(t=Prototype.Browser.WebKit?e[t]||t:t)>=33&&t<=40||t==this.RETURN||t==this.TAB||t==this.ESC},isSpecialKey:function(){var e=this.keyCode;return"keypress"==this.type&&this.ctrlKey||9==e||13==e||40==e||27==e||16==e||17==e||e>=18&&e<=20||e>=33&&e<=35||e>=36&&e<=39||e>=44&&e<=45},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){var t=this.keyCode||this.charCode;return Prototype.Browser.WebKit?e[t]||t:t},hasModifier:function(){return!!(this.ctrlKey||this.altKey||this.shiftKey)}},new MM.utils.KeyEventImpl}()},Q1hZ:function(e,t){MM.ui.OnOffSlider=Class.create({initialize:function(e,t,i){this.container=$(t),this.urlOn=i.urlOn,this.urlOff=i.urlOff,this.urlRedirect=i.urlRedirect,this.formElem=$(i.formElem),this.onChange=i.onChange,this.eventClick=this.handleChange.bindAsEventListener(this),this.container.observe("mousedown",this.eventClick),this.setValue(i.initialValue)},setValue:function(e){e?this.container.addClassName("on"):this.container.removeClassName("on"),this.on=e},handleChange:function(e){if(this.customHandler)return this.customHandler(!this.on),void this.setValue(!1);this.setValue(!this.on),this.executeAction(this.getState())},getState:function(){return this.on?"on":"off"},failedOnOff:function(){Dialog.alert('<div id="dialog_onofffailed" align="center"><h2>'+I18n.t("js.your_request_was_not_done")+'</h2></div><br /><div align="center"><h3>'+I18n.t("js.we_are_sorry_request_was_not_done")+"</h3></div>",{buttonClass:"button",okLabel:I18n.t("js.ok"),windowParameters:{width:400,height:200,effectOptions:{},showEffect:handle.show,hideEffect:handle.hide}})},executeAction:function(e){this.formElem&&this.formElem.setValue(this.on),this.onChange?this.onChange(this.on):this.urlRedirect?window.location=this.urlRedirect:"on"==e?new Ajax.Request(this.urlOn,{onFailure:this.failedOnOff.bind(this),onException:this.failedOnOff.bind(this)}):"off"==e&&new Ajax.Request(this.urlOff,{onFailure:this.failedOnOff.bind(this),onException:this.failedOnOff.bind(this)})}})},QTEg:function(e,t,i){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=i("YmTu"),p=i("worM"),m=i("jR5l"),f=i("9AMQ"),g=function(t){function i(){return o(this,i),r(this,c(i).apply(this,arguments))}return d(i,t),a(i,[{key:"_getItems",value:function(){var t=this,i=[{icon:e.createElement(h.a,{opts:{name:"settings",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.preferences"),itemClassName:"ph-20",onClick:function(){return t.product("mindmeister").selected?MM.ui.dialogs.dialogPreferences():window.location.href=t.product("meistertask").url+"/app/dialog/settings"}}];return this.product("meistertask").selected&&i.push({icon:e.createElement(h.a,{opts:{name:"statistics",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.statistics"),itemClassName:"ph-20",onClick:function(){return window.location.href=t.product("meistertask").url+"/stats/performance"}}),i.push({icon:e.createElement(h.a,{opts:{name:"help",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.help"),itemClassName:"ph-20",onClick:function(){return t.product("mindmeister").selected?MM.ui.dialogs.dialogHelp():window.location.href=t.product("meistertask").url+"/app/dialog/help"}}),i.push({icon:e.createElement(h.a,{opts:{name:"apps",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.apps"),itemClassName:"ph-20",onClick:function(){return window.open((t.product("mindmeister").selected?"":t.product("meistertask").url)+"/apps")}}),i.push({icon:e.createElement(h.a,{opts:{name:"heart",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.spread_the_love"),itemClassName:"ph-20",onClick:function(){return t.product("mindmeister").selected?window.location.href="/affiliate/invite/":window.location.href=t.product("meistertask").url+"/content/freemium"}}),this.props.user.admin&&this.product("mindmeister").selected&&i.push({icon:e.createElement(h.a,{opts:{name:"cogwheel",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.admin"),itemClassName:"ph-20",onClick:function(){return window.location.href="/admin/"}}),this.props.user.partner&&i.push({icon:e.createElement(h.a,{opts:{name:"handshake",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.partner"),itemClassName:"ph-20",onClick:function(){return window.location.href="/partner/overview"}}),this.props.hideLogout||i.push({icon:e.createElement(h.a,{opts:{name:"signout",size:24,parentClasses:"mr-10"}}),label:I18n.t("js.signout"),itemClassName:"ph-20",onClick:function(){return window.location.href="/account/logout"}}),i}},{key:"_getInviteTeaser",value:function(){var t=this.product("mindmeister").selected,i=t?I18n.t("js.get_free_maps"):I18n.t("js.get_free_pro_month"),n=I18n.t("js.invite_users_description_"+(t?"mm":"mt")),o=t?"/affiliate/invite":this.product("meistertask").url+"/app/dialog/invite";return e.createElement("div",{className:"mt-10 p-20 bt-1 bc-grey3 ta-center"},e.createElement(h.a,{className:"mb-10",opts:{name:"avatars-invite",parentClasses:"h-m-center",size:48,clickable:!1}}),e.createElement("p",{className:"fw-600 mb-5"},i),e.createElement("p",{className:"c-lighter mb-5"},n),e.createElement("a",{href:o,className:"td-underline"},I18n.t("js.invite")))}},{key:"_getTeasers",value:function(){var t,i,n,o="_self",s=this.currentProduct(),a=this.otherProduct(),r=!!a.userPlan;return r?(i=I18n.t("js.switch_to_product",{product:a.niceName}),n=a.url):(i=e.createElement("div",{className:"h-flex-row h-flex-wrap justify-sb"},e.createElement("span",{className:"ws-normal mr-10"},I18n.t("js.try_product",{product:a.niceName})),e.createElement("span",{className:"tt-uppercase fs-10 fw-600 ph-8 pv-2 rad-5 bg-orange ws-normal"},I18n.t("js.it_s_free"))),n="/account/choose?product="+a.id,o="_blank"),r&&"basic"===s.userPlan&&(t=this._getInviteTeaser()),e.createElement("div",null,e.createElement("div",{className:"mt-10 pt-10 bt-1 bc-grey3"},e.createElement("a",{href:n,target:o,className:"widget-container list-widget td-none"},e.createElement("div",{className:"list-widget-item p-r h-flex-row minh-32 pv-6 h-cp h-hover-bg"},e.createElement(f.a,{parentClassName:"width-100%",className:"h-cp c-grey h-flex-grow",icon:e.createElement(h.a,{opts:{name:"products-".concat(a.name,"-icon"),size:24,parentClasses:"mr-10"}}),label:i}),e.createElement(h.a,{opts:{name:"arrow-link",size:9,color:"grey2",consize:16,parentClasses:"bg-grey4 ml-10 rad-100%"}})))),t)}},{key:"product",value:function(e){for(var t=0,i=this.props.products.length;t<i;t++)if(this.props.products[t].name===e)return this.props.products[t];return null}},{key:"currentProduct",value:function(){for(var e=0,t=this.props.products.length;e<t;e++)if(this.props.products[e].selected)return this.props.products[e];return null}},{key:"otherProduct",value:function(){for(var e=0,t=this.props.products.length;e<t;e++)if(!this.props.products[e].selected)return this.props.products[e];return null}},{key:"render",value:function(){var t=this.props.user.avatar?e.createElement("div",{className:"tooltip s-88 z-1 rad-100%",style:{backgroundImage:'url("'.concat(this.props.user.avatar,'")'),backgroundSize:"cover",backgroundPosition:"center center"}}):e.createElement(h.a,{opts:{name:"avatars-default",size:96}}),i=this._getTeasers(),n=this.currentProduct(),o=n?n.planColor:"grey2",s=n?I18n.t("js.plan_".concat(n.userPlan)):null;return e.createElement("div",null,e.createElement("div",{className:"mh-10 mv-20 h-flex-column align-items-center"},e.createElement("div",null,t,e.createElement("div",{className:"ta-center mb-10 p-r z-2",style:{marginTop:"-8px"}},e.createElement("span",{className:"h-iblock tt-uppercase fs-10 fw-600 ph-8 rad-5 lh-20px bg-".concat(o)},s))),e.createElement("span",{className:"fs-16 fw-500 lh-140% wb-words ta-center",dangerouslySetInnerHTML:{__html:this.props.user.name}}),e.createElement("a",{href:"/account",className:"td-underline fs-14 lh-140% ws-nowrap"},I18n.t("js.myaccount"))),e.createElement(m.a,null,e.createElement(p.a,{items:this._getItems()})),i)}}]),i}(e.Component);g.defaultProps={name:"",userPlan:""},t.a=g}).call(t,i("ccIB"))},TjA0:function(e,t,i){"use strict";i.d(t,"b",function(){return o}),i.d(t,"c",function(){return s}),i.d(t,"a",function(){return a});var n=i("67vC"),o=Class.create();o.keepMultiModalWindow=!1,o.hasEffectLib="undefined"!=typeof Effect,o.resizeEffectDuration=.4,o.prototype={initialize:function(){var e,t=0;arguments.length>0&&("string"==typeof arguments[0]?(e=arguments[0],t=1):e=arguments[0]?arguments[0].id:null),e||(e="window_"+(new Date).getTime());var i=$$("#".concat(e,".dialog"));i&&i.remove(),this.options=Object.extend({className:"dialog",blurClassName:null,minWidth:100,minHeight:20,userData:null,showEffect:o.hasEffectLib?Effect.Appear:Element.show,hideEffect:o.hasEffectLib?Effect.Fade:Element.hide,doNotNotifyHide:!1,showEffectOptions:{},hideEffectOptions:{afterFinish:function(){l.resetBodyOverflow()}},useEffects:!0,effectOptions:null,parent:document.body,title:"",url:null,onload:Prototype.emptyFunction,width:200,height:414,opacity:1,autoRecenter:!0,autoSize:!1,keymap:null,closeCallback:null,destroyOnClose:!1,gridX:1,gridY:1},arguments[t]||{}),MM.utils.loadCSS([(n.isRetina?"x2/":"")+"site/dialogs.css"]),this.options.blurClassName&&(this.options.focusClassName=this.options.className),void 0===this.options.top&&void 0===this.options.bottom&&(this.options.top=this._round(500*Math.random(),this.options.gridY)),void 0===this.options.left&&void 0===this.options.right&&(this.options.left=this._round(500*Math.random(),this.options.gridX)),this.options.effectOptions&&(Object.extend(this.options.hideEffectOptions,this.options.effectOptions),Object.extend(this.options.showEffectOptions,this.options.effectOptions),this.options.showEffect==Element.Appear&&(this.options.showEffectOptions.to=this.options.opacity)),o.hasEffectLib&&(this.options.showEffect==Effect.Appear&&(this.options.showEffectOptions.to=this.options.opacity),this.options.hideEffect==Effect.Fade&&(this.options.hideEffectOptions.from=this.options.opacity)),this.options.hideEffect==Element.hide&&(this.options.hideEffect=function(){Element.hide(this.element),this.options.destroyOnClose&&this.destroy()}.bind(this)),this.options.parent!=document.body&&(this.options.parent=$(this.options.parent)),this.options.keymap&&this.options.keymap.enable(),this.element=this._createWindow(e),this.element.win=this,this.eventOnLoad=this._getWindowBorderSize.bindAsEventListener(this),this.eventMouseDownContent=this.toFront.bindAsEventListener(this),this.eventResize=this._recenter.bindAsEventListener(this),this.content=$(this.element.id+"_content"),Event.observe(window,"load",this.eventOnLoad),Event.observe(window,"resize",this.eventResize),Event.observe(window,"scroll",this.eventResize),Event.observe(this.options.parent,"scroll",this.eventResize),this.setOpacity(this.options.opacity),this.options.zIndex&&this.setZIndex(this.options.zIndex),this.options.destroyOnClose&&this.setDestroyOnClose(!0),this._getWindowBorderSize(),this.width=this.options.width,this.height=this.options.height,this.visible=!1,this.constraint=!1,this.constraintPad={top:0,left:0,bottom:0,right:0},this.width&&this.height&&this.setSize(this.options.width,this.options.height,null,!0),this.setTitle(this.options.title),s.register(this)},destroy:function(){if(this._notify("onDestroy"),Event.stopObserving(this.content,"mousedown",this.eventMouseDownContent),Event.stopObserving(window,"load",this.eventOnLoad),Event.stopObserving(window,"resize",this.eventResize),Event.stopObserving(window,"scroll",this.eventResize),Event.stopObserving(this.content,"load",this.options.onload),this._oldParent){for(var e=this.getContent(),t=null,i=0;i<e.childNodes.length&&(t=e.childNodes[i],1!=t.nodeType);i++)t=null;t&&this._oldParent.appendChild(t),this._oldParent=null}this.sizer&&Event.stopObserving(this.sizer,"mousedown",this.eventMouseDown),this.options.url&&(this.content.src=null),"undefined"!=typeof canvas&&null!==canvas&&canvas.addFocus&&canvas.addFocus(),Element.remove(this.element),s.unregister(this)},getContent:function(){return this.content},setContent:function(e,t,i){var n=$(e);if(null==n)throw"Unable to find element '"+e+"' in DOM";this._oldParent=n.parentNode;t&&Element.getDimensions(n),i&&Position.cumulativeOffset(n);var o=this.getContent();this.setHTMLContent(""),o=this.getContent(),o.appendChild(n),n.show(),this.unfixHeight()},setHTMLContent:function(e){if(this.options&&this.options.url){this.content.src=null,this.options.url=null;var t='<div id="'+this.getId()+'_content" class="'+this.options.className.split(" ")[0]+'_content"> </div>';$(this.getId()+"_table_content").innerHTML=t,this.content=$(this.element.id+"_content")}Element.update(this.getContent(),e),this.options.autoSize&&this.updateHeight(!0),""!=e&&this.unfixHeight()},setAjaxContent:function(e,t,i,n){this.showFunction=i?"showCenter":"show",this.showModal=n||!1,t=t||{},this.setHTMLContent(""),this.onComplete=t.onComplete,this._onCompleteHandler||(this._onCompleteHandler=this._setAjaxContent.bind(this)),t.onComplete=this._onCompleteHandler,t.method="get",new Ajax.Request(e,t),t.onComplete=this.onComplete},_setAjaxContent:function(e){Element.update(this.getContent(),e.responseText),this.options.autoSize&&this.updateHeight(),this.onComplete&&this.onComplete(e),this.onComplete=null,this[this.showFunction](this.showModal),this.unfixHeight()},refresh:function(){this.options.url&&($(this.element.getAttribute("id")+"_content").src=this.options.url)},getId:function(){return this.element.id},setDestroyOnClose:function(){this.options.destroyOnClose=!0},_round:function(e,t){return 1==t?e:e=Math.floor(e/t)*t},_createWindow:function(e){var t=this.options.className,i=new Element("div",{id:e,class:"dialog "+t});this.wrapper=new Element("div",{className:"dialog-wrapper"}),this.inner_win=new Element("div",{class:"dialog-inner"});var n="";return this.options.url?n+='<iframe frameborder="0" name="'+e+'_content"  id="'+e+'_content" src="'+this.options.url+'"> </iframe>':n+='<div id="'+e+'_content" class="'+t.split(" ")[0]+'_content"> </div>',this.options.noHelp||(n+='<a class="p-a ab-35 al-30 help w-25px h-25px" href="#" onclick="return MM.ui.openHelp(MM.status.helpTopic)"></a>'),this.inner_win.innerHTML=n,this.wrapper.appendChild(new Element("div",{id:"dlg_flash_msg",style:"display: none"})),this.wrapper.appendChild(this.inner_win),i.appendChild(this.wrapper),Element.hide(i),this.options.parent.insertBefore(i,this.options.parent.firstChild),Event.observe($(e+"_content"),"load",this.options.onload),i},changeClassName:function(e){var t=this.options.className,i=this.getId();$A(["_content"]).each(function(n){this._toggleClassName($(i+n),t+n,e+n)}.bind(this)),$$("#"+i+" td").each(function(i){i.className=i.className.sub(t,e)}),this.options.className=e},_toggleClassName:function(e,t,i){e&&(e.removeClassName(t),e.addClassName(i))},setLocation:function(e,t){e=this._updateTopConstraint(e),t=this._updateLeftConstraint(t);var i=this.currentDrag||this.element;i.setStyle({top:e+"px"}),i.setStyle({left:t+"px"}),this.useLeft=!0,this.useTop=!0},getLocation:function(){var e={};return e=this.useTop?Object.extend(e,{top:this.element.getStyle("top")}):Object.extend(e,{bottom:this.element.getStyle("bottom")}),e=this.useLeft?Object.extend(e,{left:this.element.getStyle("left")}):Object.extend(e,{right:this.element.getStyle("right")})},getSize:function(){return{width:this.width,height:this.height}},setSize:function(e,t,i,n){if(e=parseFloat(e),t=parseFloat(t),e<this.options.minWidth&&(e=this.options.minWidth),t<this.options.minHeight&&(t=this.options.minHeight),this.options.maxHeight&&t>this.options.maxHeight&&(t=this.options.maxHeight),this.options.maxWidth&&e>this.options.maxWidth&&(e=this.options.maxWidth),this.useTop&&this.useLeft&&o.hasEffectLib&&Effect.ResizeWindow&&i)new Effect.ResizeWindow(this,null,null,e,t,{duration:o.resizeEffectDuration});else if(this.width=e,this.height=t,!this.currentDrag||this.currentDrag==this.element){var s=$(this.element.id+"_content");n&&s.setStyle({height:t+"px"}),s.setStyle({width:e+"px"})}},fixHeight:function(){var e=this.content.select("div")[0];e&&this.content.setStyle({height:e.clientHeight+"px"})},unfixHeight:function(){this.content.setStyle({height:"auto"}),this._recenter()},updateHeight:function(e){var t=this.content.select("div")[0];t&&this.height!=t.clientHeight&&(e&&CSS.set(this.element,{transition:"top 0.2s ease-in-out"}),this.setSize(this.width,t.clientHeight,e),this._recenter(),e&&CSS.set(this.element,{transition:"all 0s ease 0s"}))},toFront:function(){this.element.style.zIndex<s.maxZIndex&&this.setZIndex(s.maxZIndex+1)},getBounds:function(e){this.width&&this.height&&this.visible||this.computeBounds();var t=this.width,i=this.height;return e||(t+=this.widthW+this.widthE,i+=this.heightN+this.heightS),Object.extend(this.getLocation(),{width:t+"px",height:i+"px"})},computeBounds:function(){if(!this.width||!this.height){var e=l._computeSize(this.content.innerHTML,this.content.id,this.width,this.height,0,this.options.className);this.height?this.width=e:this.height=e}this.setSize(this.width,this.height)},show:function(e){if(!this.visible){if(this.visible=!0,e){if(void 0===this.overlayOpacity){var t=this;return void setTimeout(function(){t.show(e)},10)}s.addModalWindow(this),this.modal=!0,this.setZIndex(s.maxZIndex+1),s.unsetOverflow(this)}else this.element.style.zIndex||this.setZIndex(s.maxZIndex+1);this.oldStyle&&this.getContent().setStyle({overflow:this.oldStyle}),this.computeBounds(),this._notify("onBeforeShow"),this.options.useEffects?this.options.showEffect!=Element.show&&this.options.showEffectOptions?(this.element.setStyle({opacity:"0.01",display:"block"}),this.options.showEffect(this.element,this.options.showEffectOptions)):this.options.showEffect(this.element):Element.show(this.element),window.canvas&&canvas.removeFocus&&canvas.removeFocus(),l.unsetBodyOverflow(),this._setWrapperWidth(),s.focusedWindow=this,this._notify("onShow"),this._recenter(),l.watch(this.inner_win,"height",this._recenter.bind(this))}},showCenter:function(e,t,i){this.centered=!0,this.centerLeft=i,this.show(e)},isVisible:function(){return this.visible},_recenter:function(){MM.ui.page.height-this.inner_win.getHeight()>0?CSS.set(this.wrapper,{top:"50%",transform:"translate(-50%, -50%)"}):CSS.remove(this.wrapper,["top","transform"]),this.wrapper.clientWidth!==this.inner_win.clientWidth&&this._setWrapperWidth()},_setWrapperWidth:function(){this.wrapper.setStyle({maxWidth:this.inner_win.clientWidth+"px"})},hide:function(){this.visible=!1,this.modal&&(s.removeModalWindow(this),s.resetOverflow()),this.options.useEffects?this.options.hideEffect(this.element,this.options.hideEffectOptions):(Element.hide(this.element),this.options.destroyOnClose&&this.destroy()),this.doNotNotifyHide||this._notify("onHide")},close:function(){if(this.visible){if(this.options.closeCallback&&!this.options.closeCallback(this))return;if(this.options.destroyOnClose&&this.options.useEffects){var e=this.destroy.bind(this);if(this.options.hideEffectOptions.afterFinish){var t=this.options.hideEffectOptions.afterFinish;this.options.hideEffectOptions.afterFinish=function(){t(),e()}}else this.options.hideEffectOptions.afterFinish=function(){e()}}this.options.keymap&&this.options.keymap.disable(),s.updateFocusedWindow(),this.doNotNotifyHide=!0,this.hide(),this.doNotNotifyHide=!1,window.canvas&&canvas.addFocus&&canvas.addFocus(),this._notify("onClose"),MM.ui.dialogs.reloadOnClose&&setTimeout("window.location.reload()",500),l.unwatch(this.inner_win,"height")}},setOpacity:function(e){Element.setOpacity&&Element.setOpacity(this.element,e)},setZIndex:function(e){this.element.setStyle({zIndex:e}),s.updateZindex(e,this)},setTitle:function(e){},getTitle:function(){return""},_getWindowBorderSize:function(e){this.heightN=20,this.heightS=85,this.widthE=this.widthW=0,this.overlayOpacity=.8},_notify:function(e){this.options[e]&&this.options[e](this),s.notify(e,this)}};var s={windows:[],modalWindows:[],observers:[],focusedWindow:null,maxZIndex:0,overlayShowEffectOptions:{duration:.3},overlayHideEffectOptions:{duration:.3},addObserver:function(e){this.removeObserver(e),this.observers.push(e)},removeObserver:function(e){this.observers=this.observers.reject(function(t){return t==e})},notify:function(e,t){this.observers.each(function(i){i[e]&&i[e](e,t)})},getWindow:function(e){return this.windows.detect(function(t){return t.getId()==e})},getFocusedWindow:function(){return this.focusedWindow},updateFocusedWindow:function(){this.focusedWindow=this.modalWindows.length>=2?this.modalWindows[this.modalWindows.length-2]:null},addModalWindow:function(e){0==this.modalWindows.length?l.disableScreen(e.options.className,"overlay",e.overlayOpacity,e.getId(),e.options.parent):(o.keepMultiModalWindow?($("overlay").style.zIndex=s.maxZIndex+1,s.maxZIndex+=1,l._hideSelect(this.modalWindows.last().getId())):this.modalWindows.last().element.hide(),l._showSelect(e.getId())),this.modalWindows.push(e)},removeModalWindow:function(e){this.modalWindows.pop(),0==this.modalWindows.length?l.enableScreen(e.options.className):o.keepMultiModalWindow?(this.modalWindows.last().toFront(),l._showSelect(this.modalWindows.last().getId())):this.modalWindows.last().element.show()},register:function(e){this.windows.push(e)},unregister:function(e){this.windows=this.windows.reject(function(t){return t==e})},closeAll:function(){this.windows.each(function(e){s.close(e.getId())})},close:function(e,t){var i=this.getWindow(e);i&&i.close(),t&&Event.stop(t)},blur:function(e){var t=this.getWindow(e);t&&(t.options.blurClassName&&t.changeClassName(t.options.blurClassName),this.focusedWindow==t&&(this.focusedWindow=null),t._notify("onBlur"))},focus:function(e){var t=this.getWindow(e);t&&(this.focusedWindow&&this.blur(this.focusedWindow.getId()),t.options.focusClassName&&t.changeClassName(t.options.focusClassName),this.focusedWindow=t,t._notify("onFocus"))},unsetOverflow:function(e){},resetOverflow:function(){},updateZindex:function(e,t){e>this.maxZIndex&&(this.maxZIndex=e,this.focusedWindow&&this.blur(this.focusedWindow.getId())),this.focusedWindow=t,this.focusedWindow&&this.focus(this.focusedWindow.getId())}},a={dialogId:null,onCompleteFunc:null,callFunc:null,parameters:null,confirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"string"!=typeof e)return void a._runAjaxRequest(e,t,a.confirm);var i=t.okLabel||I18n.t("js.ok"),n=t.cancelLabel||I18n.t("js.cancel");t=Object.extend(t,Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters)),t.className=t.className||"alert";var o="".concat(t.okButtonClass||t.buttonClass||""," ok_button default"),s="".concat(t.cancelButtonClass||t.buttonClass||""," cancel_button mr-10"),r="<div class='"+t.className+"_message'>"+e+"</div><div class='"+t.className+"_buttons ta-right pt-25'><a href='#' onclick='return Dialog.cancelCallback()' class='"+s+"'>"+n+"</a><a href='#' onclick='return Dialog.okCallback()' class='"+o+"'>"+i+"</a></div>";return this._openDialog(r,t)},multipleChoice:function(e,t){if(e&&"string"!=typeof e)return void a._runAjaxRequest(e,t,a.multipleChoice);t=t||{},t=Object.extend(t,Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters)),t.className=t.className||"alert";var i=new Element("div"),n=new Element("div",{className:t.className+"_message"}).update(e||""),o=new Element("div",{className:t.className+"_buttons ta-right pt-25"});return t.choices.each(function(e){var t=new Element("a",{href:"#",className:e.classes||""}).update(e.label);t.onclick=function(){return e.callback(),!1},o.insert(t)}),i.insert(n).insert(o),this._openDialog(i,t)},alert:function(e,t){if(e&&"string"!=typeof e)return void a._runAjaxRequest(e,t,a.alert);t=t||{};var i=t.okLabel?t.okLabel:I18n.t("js.ok");t=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters),t),t.className=t.className||"alert";var n="class ='"+(t.buttonClass?t.buttonClass+" ":"")+" ok_button'",e="<div class='"+t.className+"_message'>"+e+"</div><div class='"+t.className+"_buttons'><input type='button' value='"+i+"' onclick='Dialog.okCallback()' "+n+"/></div>";return this._openDialog(e,t)},info:function(e,t){if(e&&"string"!=typeof e)return void a._runAjaxRequest(e,t,a.info);e=e||"",t=t||{},t=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters),t),t.className=t.className||"alert";var e="<div id='modal_dialog_message' class='"+t.className+"_message'>"+e+"</div>";return t.showProgress&&(e+="<div id='modal_dialog_progress' class='"+t.className+"_progress'>  </div>"),t.ok=null,t.cancel=null,this._openDialog(e,t)},plain:function(e,t){return e=e||"",t=t||{},t=Object.extend({className:"plain",hideOnClick:!0,width:"auto"},t),t=Object.extend(Object.extend(MM.ui.dialogs.defaultOptions(),t.windowParameters),t),t.ok=null,t.cancel=null,this._openDialog(e,t)},closeInfo:function(){s.close(this.dialogId)},_openDialog:function(e,t){var i=t.className;if(t.height||t.width||(t.width=MM.ui.page.width/2),t.id)this.dialogId=t.id;else{var n=new Date;this.dialogId="modal_dialog_"+n.getTime(),t.id=this.dialogId}if(!t.height||!t.width){var s=l._computeSize(e,this.dialogId,t.width,t.height,5,i);t.height?t.width=s:t.height=s}t.effectOptions=t.effectOptions,t.noHelp=!0;var a=new o(t);return a.getContent().update(e),a.showCenter(!0,t.top,t.left),a.setDestroyOnClose(),a.unfixHeight(),t.hideOnClick&&$("overlay")&&(a.element.onclick=function(){a.close()}),a.cancelCallback=t.onCancel||t.cancel,a.okCallback=t.onOk||t.ok,a.noCallback=t.onNo||t.no,a},_getAjaxContent:function(e){a.callFunc(e.responseText,a.parameters)},_runAjaxRequest:function(e,t,i){null==e.options&&(e.options={}),a.onCompleteFunc=e.options.onComplete,a.parameters=t,a.callFunc=i,e.options.onComplete=a._getAjaxContent,new Ajax.Request(e.url,e.options)},okCallback:function(){var e=s.focusedWindow||s.getFocusedWindow();return e.okCallback&&!e.okCallback(e)||($$("#"+e.getId()+" input").each(function(e){e.onclick=null}),e.close()),!1},noCallback:function(){var e=s.focusedWindow||s.getFocusedWindow();return e.noCallback&&!e.noCallback(e)||($$("#"+e.getId()+" input").each(function(e){e.onclick=null}),e.close()),!1},cancelCallback:function(){var e=s.focusedWindow;return $$("#"+e.getId()+" input").each(function(e){e.onclick=null}),e.close(),e.cancelCallback&&e.cancelCallback(e),!1}};if(Prototype.Browser.WebKit){var r=navigator.userAgent.match(new RegExp(/AppleWebKit\/([\d\.\+]*)/));Prototype.Browser.WebKitVersion=parseFloat(r[1])}var l={watch:function(e,t,i){e["_"+t]=e.getStyle(t),e["_"+t+"_watcher"]=setInterval(function(){e.getStyle(t)!==e["_"+t]&&(i(),e["_"+t]=e.getStyle(t))},200)},unwatch:function(e,t){clearInterval(e["_"+t+"_watcher"])},disableScreen:function(e,t,i,n,o){l.initLightbox(t,e,function(){this._disableScreen(e,t,i,n)}.bind(this),o||document.body)},_disableScreen:function(e,t,i,n){var a=$(t);a.style.display="none",a.className="overlay_"+e;var r=s.getFocusedWindow();"overlay"===t&&o.hasEffectLib&&s.overlayShowEffectOptions&&r&&r.options.useEffects?(a.overlayOpacity=i,new Effect.Appear(a,Object.extend({from:0,to:i},s.overlayShowEffectOptions))):a.style.display="block"},enableScreen:function(e,t){e=e||"",t=t||"overlay";var i=$(t);if(i){if(!i.hasClassName("overlay_"+e))return;var n=s.getFocusedWindow();"overlay"==t&&o.hasEffectLib&&s.overlayHideEffectOptions&&n&&n.options.useEffects?new Effect.Fade(i,Object.extend({from:i.overlayOpacity,to:0},s.overlayHideEffectOptions)):(i.style.display="none",i.parentNode.removeChild(i)),"__invisible__"!=t&&l._showSelect()}},_hideSelect:function(e){Prototype.Browser.IE&&(e=null==e?"":"#"+e+" ",$$(e+"select").each(function(e){l.isDefined(e.oldVisibility)||(e.oldVisibility=e.style.visibility?e.style.visibility:"visible",e.style.visibility="hidden")}))},_showSelect:function(e){Prototype.Browser.IE&&(e=null==e?"":"#"+e+" ",$$(e+"select").each(function(e){if(l.isDefined(e.oldVisibility)){try{e.style.visibility=e.oldVisibility}catch(t){e.style.visibility="visible"}e.oldVisibility=null}else e.style.visibility&&(e.style.visibility="visible")}))},isDefined:function(e){return void 0!==e&&null!=e},initLightbox:function(e,t,i,n){if($(e))Element.setStyle(e,{zIndex:s.maxZIndex+1}),s.maxZIndex++,i();else{var o=document.createElement("div");o.setAttribute("id",e),o.className="overlay_"+t,o.style.display="none",n.insertBefore(o,n.firstChild),i()}},unsetBodyOverflow:function(){null==document.body.oldOverflow&&(document.body.oldOverflow=$(document.body).getStyle("overflow")||"auto"),document.body.setStyle({width:document.body.clientWidth+"px",overflow:"hidden"})},resetBodyOverflow:function(){s.windows.length>1||(document.body.setStyle({overflow:document.body.oldOverflow}),document.body.oldOverflow=null,setTimeout("document.body.setStyle({width: 'auto'})",100))},_computeSize:function(e,t,i,n,o,s){var a=document.body,r=document.createElement("div");r.setAttribute("id",t),r.className=s+"_content",n?r.style.height=n+"px":r.style.width=i+"px",r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.display="none",r.innerHTML=e,a.insertBefore(r,a.firstChild);var l;return l=n?$(r).getDimensions().width+o:$(r).getDimensions().height+o,a.removeChild(r),l}}},U1S1:function(e,t,i){"use strict";(function(e){i("jEiH")}).call(t,i("ccIB"))},VWie:function(e,t){function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){n(e,t,i[t])})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}MM.utils.payments={showPrice:function(e,t,n,o,s){n||(n="United States"),o=mm$(o);var a=i({plan:e,months:t,"billing[country]":n},s);new Ajax.Request("/payments/payment_total_price_remote",{asynchronous:!0,parameters:a,onSuccess:function(e){var t=e.responseText.evalJSON(),i=t.promotion?parseFloat(t.promotion.discount):0,n=0,a=0;s.month_split?(n=(t.price/s.month_split).toNiceDecimals().toNiceMoney(t.currency),a=((t.price+i)/s.month_split).toNiceDecimals().toNiceMoney(t.currency)):(n=t.price.toMoney(t.currency),a=(t.price+i).toMoney(t.currency)),o.innerHTML=n,mm$(o.id+"_non_discounted")&&(mm$(o.id+"_non_discounted").innerHTML=a,mm$(o.id+"_non_discounted").style.visibility="visible"),o.style.visibility="visible"}})}}},ZQgP:function(e,t){Object.extend(MM.ui,{googlePicker:{googleDriveUser:!1,init:function(e){this.options=e,this.options.createNow&&this.load(this.create.bind(this))},load:function(e){MM.utils.loadScript("https://apis.google.com/js/client.js",function(){setTimeout(function(){if(void 0===gapi.client)return void this.load(e);gapi.load("picker",{callback:e}),this.loaded=!0}.bind(this),500)}.bind(this))},create:function(){if(!this.loaded)return void this.load(this.create.bind(this));if(!this.options.googleDriveUser||!this.options.accessToken)return void this.getAccessToken();if("undefined"!=typeof gapi){Windows.close("import");var e=new google.picker.View(google.picker.ViewId.DOCS);this.options.view&&(e=this.options.view),this.options.mimeTypes&&e.setMimeTypes(this.options.mimeTypes);(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.NAV_HIDDEN).setAppId(this.options.appId).setOAuthToken(this.options.accessToken).addView(e).addView(e).setDeveloperKey(this.options.apiKey).setCallback(this.onCreated.bind(this)).build().setVisible(!0)}},onCreated:function(e){if(e.action==google.picker.Action.PICKED){var t=e.docs[0];"uploadAttachment"==this.options.action?sideBar.attachments.onGoogleDriveAttach(t):window.location.href="/external/drive/open?file_id="+t.id}},getAccessToken:function(){new Ajax.Request("/external/drive/access_token",{asynchronous:!0,evalScripts:!0,parameters:{id:this.targetNodeId()},onComplete:function(e){var t=e.responseText.evalJSON();t.location?window.location.href=t.location:t.token&&""!==t.token?(MM.ui.googlePicker.options.googleDriveUser=!0,MM.ui.googlePicker.options.accessToken=t.token,MM.ui.googlePicker.create()):Message.show(I18n.t("js.your_request_was_not_done"),Message.ERROR)}})},targetNodeId:function(){if("undefined"!=typeof canvas){var e=canvas.getSelectedNodes()[0];return void 0!==e?e.id:App.config.targetId}return null}}})},hV6h:function(e,t){function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){n(e,t,i[t])})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}MM.ui.ToolTips=Class.create({initialize:function(e){this.options=i({duration:200,delay:750,hideOnClick:!0,el:document.body,maxWidth:"250px"},e),this.tipsArray=[],this.els=[],mm$("tooltips_tip")?(this.objTip=$("tooltips_tip"),this.content=$("tooltip_content")):(this.objTip=new Element("div",{id:"tooltips_tip",className:"tooltips_tip tip",style:"display: none; opacity: 0;"}),this.content=new Element("div",{id:"tooltip_content"}),this.objTip.insert(this.content),document.body.appendChild(this.objTip)),this.mouseOverListener=this.handleMouseOver.bind(this),this.mouseOutListener=this.handleMouseOut.bind(this),this.setupTooltips()},setupTooltips:function(){var e=this,t=0;this.options.el.select(".tooltip").each(function(i){if(i.title&&i.title.length>0)var n=i.title;else{var o=i.select(".tip");if(o&&o[0])var n=o[0].innerHTML}if(n&&n.length>0&&!e.els.include(i)){var s=getDataSet(i,"shortcut");s&&(n+="&nbsp;&nbsp;<kbd>"+s+"</kbd>"),i.observe("mouseover",e.mouseOverListener),i.observe("mouseout",e.mouseOutListener),e.options.hideOnClick&&i.observe("click",e.mouseOutListener),e.els.push(i),e.tipsArray[t]=n,i.tip_num=t++,i.removeAttribute("title")}})},position:function(e){if(e){var t={top:e.getBoundingClientRect().top-document.body.getBoundingClientRect().top,left:e.getBoundingClientRect().left-document.body.getBoundingClientRect().left},i=t.top+15+e.offsetHeight;hasClassName(e,"above")||i+this.objTip.offsetHeight>window.pageYOffset+window.innerHeight?(this.objTip.style.top=t.top-15-this.objTip.offsetHeight+"px",addClassName(this.objTip,"above")):(this.objTip.style.top=i+"px",removeClassName(this.objTip,"above"));var n=t.left+e.offsetWidth/2-this.objTip.offsetWidth/2;n+this.objTip.offsetWidth>window.pageXOffset+window.innerWidth&&(n-=Math.ceil(n+this.objTip.offsetWidth-(window.pageXOffset+window.innerWidth-5))),n<0&&(n=5),this.objTip.style.left=n+"px"}},handleMouseOver:function(e){var t=this;e.stop();var i=e.findElement(".tooltip");clearTimeout(this.timer),this.objTip.style.maxWidth=this.options.maxWidth,this.timer=setTimeout(function(){if(i){t.content.innerHTML=t.tipsArray[i.tip_num],show(t.objTip),t.tipShown=!0,hasClassName(t.objTip,t.options.classes)||addClassName(t.objTip,t.options.classes),t.position(i);var n=e.findElement(".tooltip img");n&&(n.alt=""),CSS.set(t.objTip,{opacity:1,transitionDuration:t.options.duration+"ms"})}},this.options.delay)},handleMouseOut:function(){var e=this;this.objTip.style.opacity=0,this.objTip.style.maxWidth="",this.tipShown=!1,clearTimeout(this.timer),this.mouseOutTimer=setTimeout(function(){e.objTip&&!e.tipShown&&(hide(e.objTip),e.options.classes&&hasClassName(e.objTip,e.options.classes)&&removeClassName(e.objTip,e.options.classes))},this.options.duration)},destroy:function(){var e=this;clearTimeout(this.mouseOutTimer),clearTimeout(this.timer),this.els.each(function(t){t.stopObserving("mouseover",e.mouseOverListener),t.stopObserving("mouseout",e.mouseOutListener),e.options.hideOnClick&&t.stopObserving("click",e.mouseOutListener),0===t.select(".tip").length&&(t.title=e.tipsArray[t.tip_num]),delete t.tip_num}),hide(this.objTip),this.options=null,this.tipsArray=null,this.els=null,this.tipShown=null,this.timer=null,this.objTip=null,this.content=null}}),MM.ui.ToolTips.touchSafe=function(e){return MM.ua.touchEvents()?null:new MM.ui.ToolTips(e)},MM.ui.ToolTips.destroyTouchSafe=function(e){!MM.ua.touchEvents()&&e&&e.destroy()}},"i+25":function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return o});var n=function(){var e=navigator,t=e.userAgent;return t.match(/\(MeisterLabs (.+?)\)/)||t.indexOf("Meistertask-Android")>-1},o=function(){var e=navigator.userAgent,t=e.match(/iPad/i)||e.match(/tablet/i)&&!e.match(/RX-34|Windows NT 6\.3|compatible; MSIE \d\.\d/i)||e.match(/FOLIO/i)?"tablet":e.match(/Linux/i)&&e.match(/Android/i)&&!e.match(/Fennec|mobi|HTC.Magic|HTCX06HT|Nexus.One|SC-02B|fone.945/i)?"tablet":e.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC(.Flyer|\_Flyer)|Sprint.ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos.S7|Dell.Streak.7|Advent.Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||e.match(/MB511/i)&&e.match(/RUTEM/i)?"tablet":e.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google.Wireless.Transcoder/i)?"phone":e.match(/Opera/i)&&e.match(/Windows.NT.5/i)&&e.match(/HTC|Xda|Mini|Vario|SAMSUNG\-GT\-i8000|SAMSUNG\-SGH\-i9/i)?"phone":"desktop";return addClassName(document.documentElement,t),"phone"!==t&&"tablet"!==t||addClassName(document.documentElement,"mobile"),n()&&addClassName(document.documentElement,"native"),t}},jEiH:function(e,t,i){"use strict";(function(e){var n=i("MBgF"),o=function(t){var i=t.onClick,o=t.id,s=t.imageSource,a=t.title,r=t.time;return e.createElement("div",{className:"h-flex-row pv-10 ph-30 h-cp bg-grey5-hover",onClick:function(){return i(o)}},e.createElement(n.a,{width:"96",height:"64",className:"h-iblock w-96 mr-15 bc-grey3 rad-5px",image:s}),e.createElement("div",{className:"h-flex-grow"},e.createElement("div",{className:"fs-14 fw-400 lh-140% ellipsis"},a),e.createElement("span",{className:"fs-12 c-grey-light"},Date.fromUTC(r).toUIString(!0))))};o.defaultProps={onClick:function(){}},t.a=o}).call(t,i("ccIB"))},jGtj:function(e,t){MM.utils.Social={load:function(){this.Facebook.load(),this.Twitter.load()},share:function(e,t){return Amplitude.logEvent("share_map_"+e.toLowerCase()),this.Platforms[e].openSharePopup(t)},openSharePopup:function(e,t,i){i=Object.extend({winHeight:440,winWidth:600},i),e+="?"+Object.toQueryString(t);var n=(MM.ui.page.height-i.winHeight)/2,o=(MM.ui.page.width-i.winWidth)/2;return{win:window.open(t.async?"":e,null,"menubar=no,toolbar=no,status=no,width="+i.winWidth+",height="+i.winHeight+",top="+n+",left="+o),shareUrl:e}}},MM.utils.Social.Platforms={Facebook:{load:function(e){window.fbAsyncInit?"undefined"!=typeof FB&&FB.XFBML.parse():(window.fbAsyncInit=function(){FB.init({appId:ServerData.keys.fbApp,version:"v2.0",channelUrl:"//www.mindmeister.com/channel.html",status:!0,cookie:!0,xfbml:!1}),FB.XFBML.parse(),e&&e()},MM.utils.loadScript("https://connect.facebook.net/".concat(I18n.localeFull,"/sdk.js#version=v2.0&xfbml=0&appId=").concat(ServerData.keys.fbApp)))},openSharePopup:function(e,t){return e={app_id:ServerData.keys.fbApp,locale:I18n.localeFull,display:"popup",href:e.url||"https://www.mindmeister.com"},MM.utils.Social.openSharePopup("https://www.facebook.com/dialog/share",e,t)}},Twitter:{load:function(e){MM.utils.loadScript("https://platform.twitter.com/widgets.js",function(){twttr.widgets.load(),e&&e()})},openSharePopup:function(e,t){return e=Object.extend({text:e.title,via:"mindmeister",url:"https://www.mindmeister.com"},e),MM.utils.Social.openSharePopup("https://twitter.com/intent/tweet",e,t)}},Biggerplate:{openSharePopup:function(e){return MM.utils.Social.openSharePopup("https://www.biggerplate.com/share/mindmeister/",{m:e.rootId})}},Pinterest:{openSharePopup:function(e){var t={width:800,height:800},i=document.location.origin+"/export/image/"+e.rootId+"?variable_size=1&width="+t.width+"&height="+t.height;return MM.utils.Social.openSharePopup("https://www.pinterest.com/pin/create/button/",{url:e.url,description:e.title,media:i},{winWidth:750,winHeight:680})}},StumbleUpon:{openSharePopup:function(e){return MM.utils.Social.openSharePopup("http://www.stumbleupon.com/submit",{title:e.title,url:e.url},{winHeight:600})}}}},jtks:function(e,t){MM.ui.LoadingSpinner=function(e,t){return e=e||64,t=Object.extend({className:"h-a-center"},t),new Element("div",{className:t.className+" loading-spinner-"+e+" w-"+e+" h-"+e})}},lxx2:function(e,t){MM.utils.File={upload:function(e,t,i){return i=Object.extend({},i),new Ajax.Upload(t,{contentType:"application/octet-stream",requestHeaders:{"X-File-Name":e.name.replace(/[^\x00-\xff]/g,"?"),"X-File-Size":e.size,"X-File-Type":e.type||"application/octet-stream"},postBody:e,onProgress:function(e){i.onProgress&&e.lengthComputable&&i.onProgress(100*e.loaded/e.total)},timeoutDelay:i.timeoutDelay,onTimeOut:i.onTimeOut,onSuccess:i.onSuccess}),{error:!1}},uploadAttachmentFile:function(e,t,i){if(t.size&&t.size>262144e3)return{error:I18n.t("js.attachment_size_exceeded",{v0:t.name})};var n="/generic_files/upload?"+Object.toQueryString({map_id:App.config.map_id,filetype:"attachment_file",inline:!0,filename:t.name});i.onSuccess=this._handleResponse.bind(this,e,i),MM.utils.File.upload(t,n,i)},uploadImageFile:function(e,t,i){if(t.size&&t.size>262144e3)return{error:I18n.t("js.attachment_size_exceeded",{v0:t.name})};var n="/generic_files/upload?"+Object.toQueryString({map_id:App.config.map_id,filetype:"idea_image",locally_stored:1,inline:!0,filename:t.name});i.onSuccess=this._handleResponse.bind(this,e,i),MM.utils.File.upload(t,n,i)},uploadAttachment:function(e,t,i){i.parameters=Object.extend({map_id:App.config.map_id},i.parameters),i.onSuccess=this._handleResponse.bind(this,e,i),new Ajax.Upload(t,i)},uploadImage:function(e,t,i){t=Object.extend({map_id:App.config.map_id,filetype:"idea_image"},t),new Ajax.Request("/generic_files/upload",{parameters:t,onSuccess:this._handleResponse.bind(this,e,i)})},_handleResponse:function(e,t,i){var n=i.responseJSON,t=t||{};e.each(function(e){e._listener.removeLoadingFromDrop()}),n.error?407===n.error.code&&"Authentication Needed"===n.error.message?window.location.href=n.error.url:(t.errorCallback&&t.errorCallback(n.error.message),"Upgrade"===n.error.message?MM.ui.dialogs.dialogUpgrade("map_attachments"):n.error.message&&Message.show(n.error.message,Message.ERROR,5)):n.file&&t.successCallback&&t.successCallback(n.file,e)}},MM.utils.File.Droppables={drops:[],get:function(e){return this.drops.find(function(t){return t.element.id==e})},remove:function(e){this.drops=this.drops.reject(function(t){return t.element.id==e})},add:function(e){var t=$(e);if(!this.drops.find(function(e){return e.element==t})){var i=Object.extend({hoverclass:null,tree:!1,enabled:!1},arguments[1]||{});i.element=t,this.drops.push(i)}},deactivate:function(e,t){var i=t.target;e.getElement&&(i=e.getElement(i)),e.hoverclass&&i&&Element.removeClassName(i,e.hoverclass)},activate:function(e,t){var i=t.target;e.getElement&&(i=e.getElement(i)),e.hoverclass&&i&&Element.addClassName(i,e.hoverclass),e.dropEffect&&(t.dataTransfer.dropEffect=e.dropEffect),t.preventDefault()},onDrop:function(e,t){t.stopPropagation(),t.preventDefault(),this.last_active&&e.hoverclass&&Element.removeClassName(this.last_active,e.hoverclass);var i=new MM.utils.File.DataTransfer(t.dataTransfer);e.onDrop&&e.onDrop(t.target,i),this.deactivate(e,t)},enable:function(e){e.enabled||(e.activateListener||(e.activateListener=this.activate.bind(this,e)),e.deactivateListener||(e.deactivateListener=this.deactivate.bind(this,e)),e.dropListener||(e.dropListener=this.onDrop.bind(this,e)),Element.observe(e.element,"dragenter",e.activateListener),Element.observe(e.element,"dragleave",e.deactivateListener),Element.observe(e.element,"dragover",e.activateListener),Element.observe(e.element,"drop",e.dropListener),e.enabled=!0)},disable:function(e){e.enabled&&(Element.stopObserving(e.element,"dragenter",e.activateListener),Element.stopObserving(e.element,"dragleave",e.deactivateListener),Element.stopObserving(e.element,"dragover",e.activateListener),Element.stopObserving(e.element,"drop",e.dropListener),e.enabled=!1)}},MM.utils.File.DataTransfer=Class.create({imageTypes:["jpeg","jpg","gif","png","bmp","tiff"],data:null,initialize:function(e){if(this.data=e,this.files=[],this.images=[],this.links=[],this.imageLinks=[],e.files&&e.files.length>0)for(var t=e.files,i=0,n=t.length;i<n;i++){var o=t[i];o.size>0&&(o.type.match(/^image/g)?this.images.push(o):this.files.push(o))}if(this.hasType("text/uri-list")||this.hasType("text/x-moz-url")){var s=e.getData("URL")||e.getData("text/x-moz-url");this.links.push(s)}if(this.hasType("text/html")){var a=/href=\"([^\"]*)\"/.exec(e.getData("text/html"));if(a&&this.links.push(a[1]),a=/src=\"([^\"]*)\"/.exec(e.getData("text/html"))){new RegExp("("+this.imageTypes.join("|")+")$").test(a[1])&&this.imageLinks.push(a[1])}}},hasType:function(e){return this.data.types.contains&&this.data.types.contains(e)||this.data.types.include&&this.data.types.include(e)}})},mH1P:function(e,t){MM.error={reportException:function(e){var t=e.exception,i=e.message,n=e.metaData,o=void 0===n?{}:n;if("undefined"==typeof Bugsnag)throw t;Bugsnag.notify(t||new Error(i),{metaData:o,severity:"error"})},reportMapException:function(e){var t=e.exception,i=e.message,n=e.metaData,o=void 0===n?{}:n,s=e.alertMessage,a=void 0===s?I18n.t("js.oops_something_went_wrong"):s,r=e.action;ServerConnection.forcedPageReload=!0,o.requestLog=App.requestLog.join(),this.reportException({exception:t,message:"RELOAD - ".concat(i),metaData:o});var l=5,c=new MM.ui.Activity('<p class="mb-20"}>'.concat(a,"</p>").concat(I18n.t("js.reloading_the_map_in_d",{v0:l}),"..."),{type:"feedback",duration:1e3*l,windowParameters:{width:300,onClose:function(){r?r():MM.utils.reloadPage()}}});setInterval(function(){l--,c.updateMessage('<p class="mb-20"}>'.concat(a,"</p>").concat(I18n.t("js.reloading_the_map_in_d",{v0:l}),"..."))},1e3)}}},oCUf:function(e,t){MM.ui.Notification={show:function(e){e.type.indexOf("title")>=0&&this.showTitle(e),e.type.indexOf("popup")>=0&&this.showPopup(e)},showTitle:function(e){document.body.hasClassName("hidden")&&(this.param=e,this.interval=setInterval(this.setFlashTitle.bind(this),1500),this.clearFlashTitleListener=this.clearFlashTitle.bind(this),MM.onfocus.push(this.clearFlashTitleListener),this.timer=setTimeout(this.clearFlashTitleListener,this.param.timer||6e5))},setFlashTitle:function(){document.title==MM.ui.pageTitle?document.title=this.param.title:document.title=MM.ui.pageTitle},clearFlashTitle:function(){document.title=MM.ui.pageTitle,clearInterval(this.interval),clearTimeout(this.timer),MM.onfocus=MM.onfocus.without(this.clearFlashTitleListener),this.clearFlashTitleListener=null},showPopup:function(e){if(window.webkitNotifications){if(0!=window.webkitNotifications.checkPermission())return void this.requestPermission();if(e.title)var t=window.webkitNotifications.createNotification("/images/logos/mmicon_square_72x72_ipad.png",e.title,e.message||"");else if(e.url)var t=window.webkitNotifications.createHTMLNotification(e.url);return e.persist||(t.ondisplay=function(){setTimeout(function(){this.cancel()}.bind(this),7e3)}.bind(t)),t.show(),t}},requestPermission:function(){Dialog.confirm('<h2>Enable Notifications</h2><p>You need to allow MindMeister to display web notifications . Please click OK and then click "Allow" in the permissions bar on top of this window.</p>',{ok:function(){Dialog.cancelCallback(),window.webkitNotifications.requestPermission()},okLabel:I18n.t("js.ok"),windowParameters:{height:100,width:360}})}}},"s/GO":function(e,t,i){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}MM.utils={empty:function(){},reloadPage:function(){window.location.reload()},redirectToOrOpen:function(e){window.parent===window?window.location.href=e:window.open(e)},redirectToSignUp:function(e){return MM.utils.redirectToOrOpen("/mm/signup/basic"+(e?"?".concat(Object.toQueryString(e)):"")),!1},redirectToLogin:function(e){return MM.utils.redirectToOrOpen("/account/login"+(e?"?message="+e:"")),!1},setCookie:function(e,t,i,n){var o=new Date;o.setTime(o.getTime()+864e5*(null==t?-1:i||1)),document.cookie=e+"="+encodeURIComponent(t)+"; expires="+o.toUTCString()+";path="+(n||"/")},getCookie:function(e){var t=new RegExp(e+"=([^;]*);?","gi"),i=t.exec(document.cookie)||[];return i.length>1?decodeURIComponent(i[1]):null},setTimeZone:function(){MM.utils.loadScript("lib/jstz-1.0.4.min.js",function(){var e=jstz.determine();new Ajax.Request("/account/set_time_zone",{parameters:{tz_name:e.name()}})},function(){return"undefined"!=typeof jstz})},loadModule:function(e,t){i("46sc")("./".concat(e)).then(function(e){t&&t(e)})},loadScript:function(e,t,i,n){var o=e.split("/").last();if(mm$(o))if(i)var s=setInterval(function(){var e=!1;try{e=i.call()}catch(e){}e&&(clearInterval(s),t.call())},100);else t&&t();else{0==e.indexOf("//")?e=("https:"==document.location.protocol?"https:":"http:")+e:0!=e.indexOf("http")&&(e=MM.assets.resolve(e));var a=document.createElement("script");if(a.setAttribute("id",o),a.setAttribute("type","text/javascript"),a.setAttribute("src",e),n&&$H(n).each(function(e){a.setAttribute(e.key,e.value)}),t){if(MM.ua.isBrowser("Safari"))if(i)var s=setInterval(function(){var e=!1;try{e=i.call()}catch(e){}e&&(clearInterval(s),t.call())},100);else a.observe("load",t);else a.onload=function(){t()};MM.ua.isBrowser("Opera")||(a.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||t()})}document.getElementsByTagName("head")[0].appendChild(a)}},loadCSS:function(e){"string"==typeof e&&(e=[e]),e.each(function(e){e=MM.assets.resolve(e);var t=e.split("/").last();if(!mm$(t)){var i=document.createElement("link");i.setAttribute("type","text/css"),i.setAttribute("rel","stylesheet"),i.setAttribute("id",t),i.setAttribute("href",e),i.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(i)}})},badBrowser:function(){return(MM.utils.reallyBadBrowser()||!MM.ua.isSupported())&&!this.isGoogleBotFetcher()},reallyBadBrowser:function(){return MM.ua.isBrowser("Internet Explorer",{maxVersion:10})&&"chromeframe"!==navigator.appVersion.toLowerCase().match(/chromeframe/)||MM.ua.isBrowser("Firefox",{maxVersion:6})||MM.ua.isBrowser("Safari",{maxVersion:3})},isGoogleBotFetcher:function(){return MM.ua.isBrowser("Mozilla")},hasFlash:function(){return!!(null!=navigator.plugins&&navigator.plugins.length>0&&(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]))},urlFor:function(e){return"object"==n(e)&&(e=e.controller+"/"+e.action+(e.id?"/"+e.id:"")),ServerData.isLoggedIn||I18n.locale===I18n.defaultLocale||0==e.indexOf("/"+I18n.locale+"/")?e:"/"+I18n.locale+e},validateEmail:function(e){return/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i.test(e)},highlightText:function(e,t){return e.replace(new RegExp(RegExp.escape(t),"gi"),function(e){return"<em>"+e+"</em>"})},getRequestDetails:function(e,t,i){var n=(users&&users.selfUser?"User: "+users.selfUser.id:"Anonymous")+" / "+(tree?"Map: "+tree.root.id:"n/a"),o="Response delay: "+e.responseDelay+"; Source: "+i;if(t.getAllHeaders()){var s=t.getAllHeaders().split("\n"),a=s.detect(function(e){return e.indexOf("X-Runtime")>-1});a&&(o+="; "+a);var r=s.detect(function(e){return e.indexOf("X-Request-Id")>-1});r&&(o+="; "+r)}return[n,o]},trackEvent:function(e,t){"undefined"!=typeof dataLayer&&dataLayer.push({event:"event",eventCategory:e,eventAction:t})},submitForm:function(e){if(e.readAttribute("data-remote")){var t,i,n;"form"===e.tagName.toLowerCase()?(t=e.readAttribute("method")||"post",i=e.readAttribute("action"),n=e.serialize()):(t=e.readAttribute("data-method")||"get",i=e.readAttribute("href"),n={}),new Ajax.Request(i,{method:t,parameters:n,evalScripts:!0})}},checkPassword:function(e){0===mm$("password").value.length?(e&&MM.ui.fieldEnable(e),MM.ui.dialogs.showError(I18n.t("js.enter_password"))):(e&&!$(e).disabled&&MM.utils.submitForm($("form_confirm_password")),e&&MM.ui.fieldDisable(e))},positionDialog:function(e){mm$(e).style.top=(MM.ui.page.height-$(e).select(".dialog_inner")[0].getHeight())/2-50+"px"},showMapView:function(){$("container").hide(),$("footer").hide(),$("map_editor").show(),document.body.id="map"},buildDynamicPopover:function(e,t,i){var n=-1,o=0,s=e.length;if(0!=s){for(;n<s-1&&o<t;)n++,o+=e[n].getWidth()+parseInt(e[n].getStyle("margin-right"));var a=[];if(o>=t)for(var r=n;r<s;r++)e[r]&&e[r].id&&i.pushPopoverElements(a,e[r]);a.length>0?show(mm$(i.opener_id)):hide(mm$(i.opener_id)),i.popover.removeElements(),e=[];for(var r=0,l=a.length;r<l;r++)e.push(i.getPopoverElement(a[r]));i.popover.addElements(e)}},focusWithoutScrolling:function(e){var t=Windows.getFocusedWindow()?Windows.getFocusedWindow().element:document.body,i=t.scrollLeft,n=t.scrollTop;e.focus(),t.scrollLeft=i,t.scrollTop=n},clearSelection:function(){var e;return window.getSelection&&(e=window.getSelection(),e.rangeCount>0&&e.getRangeAt(0).getClientRects().length>0&&e.removeAllRanges()),e},addSelection:function(e){if(e){var t=this.clearSelection();t&&t.addRange(e)}},replaceSelection:function(e){if(window.getSelection){var t=window.getSelection(),i=t.getRangeAt(0),n=document.createTextNode(e);i.deleteContents(),i.insertNode(n),i.setStartAfter(n),i.collapse(!0),this.addSelection(i)}}}},s7LD:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(ReactDOM,React){function _objectSpread(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){_defineProperty(e,t,i[t])})}return e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var __WEBPACK_IMPORTED_MODULE_0_ui_components_generic_listWithFilter__=__webpack_require__("bPcH"),__WEBPACK_IMPORTED_MODULE_1_ui_components_generic_mapList_mapList__=__webpack_require__("U1S1"),__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_list_list__=__webpack_require__("worM"),__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_svgIcon__=__webpack_require__("YmTu"),__WEBPACK_IMPORTED_MODULE_4_ui_components_invitationWidget_widget__=__webpack_require__("fOgc"),__WEBPACK_IMPORTED_MODULE_5_utils_clipboard_js__=__webpack_require__("mUXm"),__WEBPACK_IMPORTED_MODULE_6_ui_components_shareLinkWidget_shareLinkWidget__=__webpack_require__("SO8C"),noop=function(){return null};MM.ui.dialogs={defaultOptions:function(){var e=MM.utils.KeyEvent,t=new MM.utils.KeyMap(document,"dialog_keymap_"+Windows.modalWindows.length,[{key:e.ENTER,stopEvent:!1,fn:function(){var e=Windows.focusedWindow;if(e.okCallback)e.okCallback(e);else{var t=document.activeElement;if(t&&"TEXTAREA"===t.tagName)return;for(var i=e.element.select(".button.default"),n=0;i[n]&&(!i[n].visible()||i[n].hasClassName("disabled"));)n++;if(!i[n])return;if(MM.utils.focusWithoutScrolling(i[n]),i[n].hasAttribute("type")&&"submit"===i[n].getAttribute("type"))return;var o=!0;if(i[n]&&i[n].onclick&&(o=i[n].onclick()),o){var s=e.element.select("form");s[0]&&(s[0].onsubmit&&(o=s[0].onsubmit()),o&&MM.utils.submitForm(s[0]))}}}},{key:e.ESC,stopEvent:!1,fn:function(){var e=Windows.focusedWindow;e.cancelCallback?e.cancelCallback():e.close()}}]);return t.disable(),{buttonClass:"button",className:"dialog",width:560,zIndex:1100,keymap:t,minimizable:!1,maximizable:!1,resizable:!1,autoRecenter:window.innerHeight>480,effectOptions:{duration:.3}}},show:function(e,t){var i=e.indexOf("_")>0?e.substring(0,e.indexOf("_")):e;t=Object.extend({dlg_name:i,controller:"dialog",action:e+"_ajax"},t),"undefined"!=typeof canvas&&null!=canvas&&canvas.removeFocus&&canvas.removeFocus(),document.activeElement&&document.activeElement.blur();var n={},o="/"+t.controller+"/"+t.action+"?";return ServerData.isLoggedIn||I18n.locale===I18n.defaultLocale||(o="/"+I18n.locale+o),(t.map_id||t.id)&&(t.map_id?n.id="object"===_typeof(t.map_id)?t.map_id.join(","):t.map_id:n.id=t.id),t.parameters&&(n=Object.extend(n,t.parameters)),new Ajax.Request(o+Object.toQueryString(n)+(t.param||""),{requestHeaders:t.accept?{Accept:t.accept}:{},onComplete:function(e){if(e.responseJSON){var n=e.responseJSON,o=n.error;if(n.requiredFeature)return void MM.ui.dialogs.dialogUpgrade(n.requiredFeature);if(o)return void(o.code&&407===o.code&&"Authentication Needed"===o.message&&o.url?window.location.href=o.url:o.message&&this.showError(o.message,"error",{duration:10}))}else{var s=e.responseText,a=Windows.getWindow(i);a||(a=new Window(t.dlg_name,Object.extend(MM.ui.dialogs.defaultOptions(),t)),a.setDestroyOnClose(),a.showCenter(1),a.setHTMLContent(s))}t.onComplete&&t.onComplete(e.responseJSON)}.bind(this)}),!1},close:function(e,t){return Windows.close(e,t),!1},slideTab:function(e,t){var i=document.getElementsByClassName("tabs")[0];childElements(i,function(e){removeClassName(e,"selected")});for(var n=document.getElementsByClassName("tabcontent"),o=0,s=n.length;o<s;o++)hide(n[o]);return addClassName(mm$("btn_"+t+"_"+e),"selected"),show(mm$("tab_"+t+"_"+e)),!1},switchTab:function switchTab(tab,dlg,id,options){options=Object.extend({controller:"dialog",switchOnly:!1,edit:null,params:null},options);var param=options.edit?"&"+options.params:"?"+options.params;if(Windows.focusedWindow.fixHeight(),options.switchOnly||!mm$(dlg+"_form")){var url="/"+options.controller+"/"+dlg+"_"+tab+"_ajax/"+id+(options.edit?"?edit="+options.edit:"")+(options.params?param:"");new Ajax.Request(url,{onComplete:function onComplete(transport){var responseText=transport.responseText;if("{"==responseText[0]){var response=responseText.evalJSON();if(response.error&&response.error.code&&407==response.error.code&&"Authentication Needed"==response.error.message&&response.error.url)return window.location.href=response.error.url,!1}else{var contentType=transport.getResponseHeader("Content-Type");contentType.indexOf("text/javascript;")>=0?eval(responseText):$(dlg+"_content").update(responseText)}Windows.focusedWindow.unfixHeight(),options.onComplete&&options.onComplete()}})}else mm$("tab").value=tab,MM.utils.submitForm(mm$(dlg+"_form"));return!1},showError:function(e,t,i){i=i||{};var n=$("dlg_flash_msg");n&&(n.className=t||"error",n.update("<p>"+e+"</p>").show()),i.duration&&setTimeout("MM.ui.dialogs.hideError()",1e3*i.duration)},hideError:function(){$("dlg_flash_msg")&&$("dlg_flash_msg").hide()},dialogSkoletubeLogin:function(e){return MM.ui.dialogs.show("skoletubelogin",{controller:"skoletube",action:"login_dialog",param:"widget="+e,height:500,width:260,noHelp:!0,onComplete:function(){sideBar&&sideBar[e]&&$("skoletubelogin").select(".close")[0].observe("click",sideBar[e].onCancelSkoletubeLogin.bind(sideBar[e]))}})},dialogSharing:function(e,t){return t=Object.extend({controller:"sharing",action:"index",map_id:e,width:640,autoSize:!0,onClose:function(){}},t),MM.ui.dialogs.show("sharing",t)},dialogPublish:function(e){return this.show("publish",{controller:"sharing",action:"publish_dialog",map_id:e,width:540})},dialogGetShareableLink:function(e){return Dialog.alert("<h2>".concat(I18n.t("js.sharing_link"),'</h2><div id="dlg_get_shareable_link_content"></div>'),{buttonClass:"button default",windowParameters:{width:400,onShow:function(){ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_6_ui_components_shareLinkWidget_shareLinkWidget__.a,e),mm$("dlg_get_shareable_link_content"))}}})},dialogPublishConfirmation:function(e,t){var i=t.okCallback,n=void 0===i?noop:i,o=t.successCallback,s=void 0===o?noop:o,a=t.cancelCallback,r=void 0===a?noop:a;Dialog.confirm("<h2>".concat(I18n.t("js.publish_map"),"</h2><p>").concat(I18n.t("js.publish_map_warning"),"</p>"),{ok:function(){this.close(),n(),new Ajax.Request("/sharing/set_public/".concat(e,"?public=true"),{onSuccess:function(){return s()},onError:function(){r()}})},cancel:function(){this.close(),r()},okLabel:I18n.t("js.publish_map"),windowParameters:{height:100,width:400,buttonClass:"button"}})},dialogLogin:function(e){var t=e.fullsizeAvatar?e.fullsizeAvatar:e.avatar;Dialog.multipleChoice('<div onclick="return Dialog.cancelCallback();">'+MM.ui.icon({name:"close",size:14,color:"grey-light",parentClasses:"ml-auto"})+'</div><div class="ta-center"><span class="h-flex-row mt-5 mb-40 justify-center"><img class="s-100 rad-100%" src="'+t+'"></span><h1 class="mb-0 fw-300 lh-100%">'+I18n.t("js.signup_dialog_greeting",{name:e.name})+'</h1><h2 class="mb-30 c-grey-lighter fw-300 fs-20">'+I18n.t("js.signup_dialog_subheadline")+'</h2><p class="mb-20">'+I18n.t("js.signup_dialog_paragraph2")+"</p></div>",{choices:[{label:I18n.t("js.login"),callback:MM.utils.redirectToLogin,classes:"td-underline cancel_button mr-10"},{label:I18n.t("js.sign_up_c"),callback:MM.utils.redirectToSignUp,classes:"button ok_button default"}],windowParameters:{height:200,width:500}})},dialogInvite:function(e){return this.show("invite",{controller:"sharing",action:"invite_dialog",map_id:e,width:405,autoSize:!0,onComplete:function(){MM.status.helpTopic="218469737-Share-your-map";var e=ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_4_ui_components_invitationWidget_widget__.a,{placeholder:I18n.t("js.email_or_name")}),mm$("sharing-tokenizer")),t=$("form_invite_access"),i=mm$("btn_invite_these");t.onsubmit=function(n){Event.stop(n);var o=t.serialize(!0),s=e.getMembers(),a=e.getMembers("share_groups");o.collaborators=s,o.groups=a,o.permission=e.isViewOnly()?1:2,i.value=I18n.t("js.button_sending"),MM.ui.disableButton(i),new Ajax.Request(t.action,{parameters:o})},mm$("btn_cancel").onclick=function(){return(0===e.getTokenCount()||confirm(I18n.t("js.cancel_invitations_warning")))&&Windows.close("invite"),!1}}})},dialogTeamEditAccount:function(e){var t=this,i=e.userId,n=e.onSubmitSuccess,o=void 0===n?function(){return null}:n;return this.show("editaccount",{controller:"team",action:"edit_account",id:i,width:405,onComplete:function(){var e=mm$("form-edit-account"),n=mm$("btn_team_edit_account_submit"),s=function(e){var i=e.responseJSON,s=i.user,a=i.error;a?a.close?(Windows.close("editaccount"),MM.ui.showFlashMessage(a.msg,{type:"error"})):(t.showError(a.msg),n.value=I18n.t("js.edit"),MM.ui.enableButton(n),Windows.focusedWindow.updateHeight()):(Windows.close("editaccount"),MM.ui.showFlashMessage(I18n.t("js.edit_account_success")),o({user:s}))};e.onsubmit=function(){var t=e.serialize(!0);return MM.ui.disableButton(n),new Ajax.Request("/team/do_edit_account",{parameters:_objectSpread({id:i},t),onSuccess:s}),!1}}})},dialogPreferences:function(e){return MM.ui.dialogs.show("preferences",Object.extend({width:"460",noHelp:!0},e||{}))},dialogExportMap:function(e,t,i){return i=Object.extend({controller:"maps",action:"export_ajax/"+e,width:600,noHelp:!0},i),t&&(i.parameters={export_format:t}),MM.utils.loadModule("export",function(e){MM.ui.Export=e.default,MM.ui.dialogs.show("export",i)}),!1},dialogClone:function(e){Dialog.confirm("<h2>"+I18n.t("js.clone_public_map")+'</h2><p class="minw-250">'+I18n.t("js.do_you_want_to_clone_map_to_account")+"</p>",{ok:function(){this.close(),new Ajax.Request("/maps/clone_map/"+e,{asynchronous:!0,onSuccess:function(e){var t=e.responseText.evalJSON();t.error?Message.show(t.error.message,Message.ERROR):t.location?MM.utils.redirectToOrOpen(t.location):Message.show(t.message,Message.INFO)}})},okLabel:I18n.t("js.ok"),windowParameters:{height:100,width:260}})},dialogBrowserWarning:function(e,t){return!(MM.utils.getCookie("browserwarning_seen")&&!t)&&(MM.ui.dialogs.show("browserwarning",Object.extend({height:120,noHelp:!0},e)),!0)},dialogBrowserFeatureSupport:function(e){return!!e&&MM.ui.dialogs.show("browser_feature_support",{height:120,noHelp:!0,dlg_name:"browser_feature_support",onComplete:function(){for(var t in e){var i=e[t];i.version&&Object.isNumber(i.version)&&($(t).select("a")[0].innerHTML+=" "+I18n.t("js.and_above_d",{v0:i.version})),show(mm$(t))}}})},dialogUpgrade:function(e,t){return t=Object.extend({controller:"dialog",action:"upgrade",param:"feature="+e,width:480,height:280,autoSize:!0,noHelp:!0},t),MM.ui.dialogs.show("upgrade",t)},dialogHelp:function(){MM.ui.dialogs.show("help",{width:815,noHelp:!0,onComplete:function(){var e={label_names:"popular",sort_by:"position",locale:"de"===ServerData.user.language?"de":"en-us"};new Ajax.Request("https://mindmeister.zendesk.com/api/v2/help_center/articles.json",{crossDomain:!0,method:"get",parameters:e,onSuccess:function(e){var t=e.responseJSON;if(t&&!t.error){var i=t.articles.slice(0,5).map(function(e){return{icon:React.createElement(__WEBPACK_IMPORTED_MODULE_3_ui_components_generic_svgIcon__.a,{opts:{name:"help",size:20,consize:20,parentClasses:"mr-5"}}),label:React.createElement("a",{className:"c-default c-blue-hover",target:"_zendesk",href:e.html_url},e.title),className:"fs-14 h-flex-row",backgroundColor:"transparent"}});ReactDOM.render(React.createElement(__WEBPACK_IMPORTED_MODULE_2_ui_components_generic_list_list__.a,{items:i}),$("js-help-topics"))}}})}})},dialogRemoveCollaborator:function(e,t,i,n){if("self"==i)var o=I18n.t("js.you_still_have_tasks_sure_want_to_withdraw");else var o=I18n.t("js.s_still_has_tasks_sure_want_to_remove_s",{v0:n,v1:n});Dialog.confirm('<h2 style="font-size:120%; font-weight: bold;">'+I18n.t("js.removing_collaborator")+'</h2><p style="margin-top: 0;">'+o+"</p>",{ok:function(){this.close(),MM.ui.dialogs.doRemoveCollaborator(e,t)},okLabel:I18n.t("js.ok"),windowParameters:{height:140,width:320,tableClass:"small",buttonClass:"button small"}})},doRemoveCollaborator:function(e,t){new Ajax.Request("/sharing/remove/"+e+"?to_remove="+t+"&to_remove_type=User&confirm=true",{asynchronous:!0,evalScripts:!0})},dialogPasteAsMap:function(){Dialog.confirm("<h2>"+I18n.t("js.create_as_map")+'</h2><p class="hint mb20">'+I18n.t("js.create_as_map_explanation")+'</p><p><input type="checkbox" value="true" name="insert_link" id="insert_link" checked />'+I18n.t("js.create_as_map_add_link")+'</p><p><input type="checkbox" value="true" name="insert_back_link" id="insert_back_link" checked />'+I18n.t("js.create_as_map_add_back_link")+'</p><p><input type="checkbox" value="true" name="preserve_permissions" id="preserve_permissions" checked />'+I18n.t("js.create_as_map_preserve_permissions")+"</p>",{buttonClass:"button",okLabel:I18n.t("js.ok"),windowParameters:{width:360},ok:function(){ServerConnection.isPending()||(ServerConnection.pasteAsMap(canvas.selected.node,mm$("insert_link").checked,mm$("preserve_permissions").checked,mm$("insert_back_link").checked),Dialog.cancelCallback())}})},dialogCopyPasteInfo:function(){var e=MM.ua.isPlatform("Macintosh")?"&#8984;":"CTRL",t='<h2>Copy & Paste in MindMeister</h2><p class="mb25">These actions are unavailable via the menu. Instead please use</p><div class="row collapse text-center" style="padding-bottom: 5px;"><div class="column small-4"><kbd>'+e+'</kbd> + <kbd>C</kbd></div><div class="column small-4"><kbd>'+e+'</kbd> + <kbd>X</kbd></div><div class="column small-4"><kbd>'+e+'</kbd> + <kbd>V</kbd></div></div><div class="row collapse text-center" style="border-spacing: 0 5px;"><div class="column small-4">to copy</div><div class="column small-4">to cut</div><div class="column small-4">to paste</div></div>';return Dialog.alert(t,{id:"copy_paste_message",buttonClass:"button default",okLabel:I18n.t("js.ok"),ok:Dialog.closeInfo(),windowParameters:{height:60,width:400}}),!1},dialogTextOutline:function(e){var t,i=document.location.protocol+"//"+document.location.host+"/"+e.id+document.location.search;Dialog.alert("<h2>".concat(I18n.t("js.copy_as_text"),"</h2>")+'<div class="tabcontent notabs"><div row class="align-items-start mb-30">'+'<label class="mr-15 ws-prewrap maxw-110">'.concat(I18n.t("js.text_outline"),"</label>")+"<div column grow>"+'<textarea id="map_text_outline" class="h-190 mb-5">'.concat(Tree.utils.getTextOutline(e,!0),"</textarea>")+'<label class="checkbox"><input type="checkbox" id="map_text_outline_toggle" class="mr-5" checked />'.concat(I18n.t("js.indent_topics"),"</label>")+"</div></div><div row>"+'<label class="mr-15 ws-prewrap maxw-110">'.concat(I18n.t("js.direct_link"),"</label>")+"<div row grow>"+'<input id="topic-link" type="text" style="width: 100%;" value="'.concat(i,'" onclick="this.select();" readonly/>')+'<btn id="btn-copy-topic-link" class="blue ml-10">'.concat(I18n.t("js.copy_link"),"</btn>")+"</div></div></div>",{buttonClass:"button",okLabel:I18n.t("js.close"),ok:function(e){return e.close()},windowParameters:{width:450,onShow:function(){mm$("map_text_outline_toggle").onchange=function(){$("map_text_outline").value=Tree.utils.getTextOutline(e,this.checked)},t=Object(__WEBPACK_IMPORTED_MODULE_5_utils_clipboard_js__.a)(mm$("btn-copy-topic-link"),{target:function(){return mm$("topic-link")}})},onClose:function(){return t.destroy()}}})},historyDialog:function(e){__webpack_require__.e(65).then(__webpack_require__.bind(null,"tt9h")).then(function(){return RevisionBrowser.showDialog(null,null,e)})},dialogCustomizeTopic:function(e){var t=e.themeId;this.show("format_topic",{dlg_name:"formattopic",param:"theme_id="+t,width:620,onComplete:function(){MM.status.helpTopic="204513747-Customizing-Themes-and-Styles-in-a-Mind-Map",__webpack_require__.e(67).then(__webpack_require__.bind(null,"H+A+")).then(function(){return App.ui.Style.init(t)})}})},dialogCustomizeTheme:function(e){var t=e.themeId;this.show("customtheme_nodes",{id:t,width:620,onComplete:function(){MM.status.helpTopic="204513747-Customizing-Themes-and-Styles-in-a-Mind-Map",__webpack_require__.e(66).then(__webpack_require__.bind(null,"uiuD")).then(function(){return App.ui.Themes.init(t)})}})},showDialogOnLoad:function(){var e=MM.utils.Url.getHashParams();if(e.dialog||(e=MM.utils.Url.getOldHashParams()),e.dialog){var t=e.dialog.split("_")[0],i=(e.dialog.split("_")[1],e.dialog.split("_")[2]),n={};if(e.controller&&Object.extend(n,{controller:e.controller}),e.action&&Object.extend(n,{action:e.action}),e.width&&Object.extend(n,{width:e.width}),e.height&&Object.extend(n,{height:e.height}),e.noHelp&&Object.extend(n,{noHelp:e.noHelp}),e.id||i){var o="&";e.id&&(o+="id="+e.id),i&&(o+="&tab="+i),Object.extend(n,{param:o})}switch("map_properties"===e.dialog&&(n.dlg_name="map_properties"),t){case"settings":this.dialogPreferences(n);break;case"export":this.dialogExportMap(App.config.map_id,null,n);break;case"upgrade":var s=e.dialog.replace("upgrade_","");this.dialogUpgrade(s);break;case"clone":App.config.isPublic&&this.dialogClone(App.config.map_id);break;default:this.show(e.dialog,n)}}}},MM.onload.add(MM.ui.dialogs.showDialogOnLoad.bind(MM.ui.dialogs))}).call(__webpack_exports__,__webpack_require__("x9tB"),__webpack_require__("ccIB"))},szEV:function(e,t,i){"use strict";var n=i("lAER"),o=i("POv7"),s=i("5mMr"),a=i.n(s);MM=MM||{},MM.ui=MM.ui||{},MM.ui.icon=function(e){function t(e,t,i){return t?e+":"+t+(i||"")+";":""}var i=n.a[e.name];i||(i="",console.warn("Icon "+e.name+" does not exist fool!"));var s=a()("svg-"),r=i.match(/viewBox="(.+?)"/);r=r?r[1]:"",i=i.replace(/<svg.+?>/,"").replace("</svg>","").replace(/id-/g,s);var l=e.height||e.size,c=e.width||e.size,d=e.conheight||e.consize||l,u=e.conwidth||e.consize||c,h=!0;void 0!==e.clickable&&(h=e.clickable);var p=h?"h-cp":"";return i=Object(o.a)("svg",{classes:["maxw-100%",e.classes,"icon-"+e.name],viewBox:r,content:i,style:[t("margin-top",e.offY,"px"),t("margin-left",e.offX,"px"),t("fill",MM.Colors[e.color]?MM.Colors[e.color].bg:e.color),t("height",l,"px"),t("width",c,"px"),e.styles]}),Object(o.a)("div",{classes:["svg-icon h-overflow w-"+u+" h-"+d+" "+p,e.parentClasses],content:i,style:[e.parentStyles]})},MM.ui.svgIcons=function(e){if(e||(e=mm$(e)),e){var t={name:getDataSet(e,"icon"),width:getDataSet(e,"width")?Number(getDataSet(e,"width")):null,height:getDataSet(e,"height")?Number(getDataSet(e,"height")):null,offX:getDataSet(e,"off-x")?Number(getDataSet(e,"off-x")):null,offY:getDataSet(e,"off-y")?Number(getDataSet(e,"off-y")):null,size:getDataSet(e,"size")?Number(getDataSet(e,"size")):16,color:getDataSet(e,"color"),parentClasses:getDataSet(e,"parent-classes")?getDataSet(e,"parent-classes"):null,clickable:!getDataSet(e,"clickable")||"true"===getDataSet(e,"clickable")};getDataSet(e,"consize")&&(t.consize=Number(getDataSet(e,"consize"))),e.innerHTML=MM.ui.icon(t)}}},t9BA:function(e,t){function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){n(e,t,i[t])})}return e}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(e){return new Element("div",{className:"ta-center"}).update(e)};MM.ui.Activity=Class.create({threshold:50,initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.options=t;var n=new Element("div");this.options.icon&&n.insert(MM.ui.icon(i({parentClasses:"h-m-center mb-15",size:64},this.options.icon))),n.insert(o(e)),this.options.progress&&(this.progressbar=new Element("span"),n.insert(new Element("div",{className:"progress"}).insert(this.progressbar)),this.options.autoUpdate&&(this.increment=this.options.duration?this.options.duration/100:50,this.interval=setInterval(this.update.bind(this),this.increment)),this.progress=0);var s=i({className:"activity",width:"feedback"===this.options.type?220:340,hideOnClick:!1,keymap:!1},this.options.windowParameters);this.options.type&&(s.className=this.options.type),this.window=Dialog.plain(n,s),"feedback"===this.options.type&&setTimeout(this.close.bind(this),this.options.duration||1200)},update:function(e){e||(e=this.progress+=1),this.progressbar.style.width="".concat(e,"%"),this.progress=e,100===this.progress?(addClassName(this.progressbar,"full"),clearInterval(this.interval)):this.options.autoUpdate&&this.progress>this.threshold&&(this.threshold+=5,this.increment=1.2*this.increment,clearInterval(this.interval),this.interval=setInterval(this.update.bind(this),this.increment))},updateMessage:function(e){this.window.content.update(o(e))},close:function(){var e=this.options,t=e.progress;"feedback"===e.type&&CSS.set(this.window.element,{transform:CSS.scale(1.5),transition:"all 100ms ease"}),t&&clearInterval(this.interval),this.window.close()}})},tCJk:function(e,t){MM.ui.evernotePicker={sources:["notebooks","business_notebooks"],init:function(){this.el=$("notes_list"),this.title=$("evernote_dialog_title"),this.subtitle=$("evernote_dialog_subtitle"),this.notebooks=[],this.business_notebooks=[],this.loadNotebooks()},setupTab:function(e){var t=$("evernote_"+e+"_tab");removeClassName(t,"disabled"),t.observe("click",function(i){i.stop(),$("dlg_evernote").select(".tabs")[0].childElements().invoke("removeClassName","selected"),addClassName(t,"selected"),this.updateNotebooks(e)}.bind(this))},loadNotebooks:function(){this.title.innerHTML=I18n.t("js.evernote.your_notebooks"),this.showLoading(),new Ajax.Request("/external/evernote/list_notebooks",{onComplete:function(e){var t=e.responseJSON;if(t.error&&t.error.code&&407==t.error.code&&"Authentication Needed"==t.error.message)return void(window.location.href=t.error.url);this.sources.forEach(function(e){t[e].length>0&&(this.setupTab(e),this[e]=t[e].map(function(e){return{id:e.guid,name:e.name}}))}.bind(this)),this.updateNotebooks("notebooks")}.bind(this)})},updateNotebooks:function(e){this.title.innerHTML=I18n.t("js.evernote.your_notebooks"),this.el.innerHTML="",this.subtitle.innerHTML="",this[e].each(function(t){var i=new Element("span",{class:"ellipsis label maxw-225px ml-5px"}).update(t.name.escapeHTML()),n=MM.ui.icon({name:"folder",size:20}),o=new Element("a",{href:"#",className:"h-flex-row pv-8 c-default"}).insert(n);o.appendChild(i),o.onclick=this.expandNotebook.bind(this,t,e);var s=new Element("li",{className:"folder ph-10 bb-1 bc-grey3",id:"note_evernote_"+t.id});s.appendChild(o),this.el.appendChild(s)}.bind(this))},expandNotebook:function(e,t){this.subtitle.innerHTML=I18n.t("js.evernote.notes_in",{notebook:e.name}),this.el.innerHTML="",this.showLoading();var i="list_notes",n=!1;"business_notebooks"==t&&(i="list_business_notes",n=!0),new Ajax.Request("/external/evernote/"+i+"?dialog=upload_evernote",{parameters:{notebook_id:e.id},onComplete:function(e){var t=e.responseJSON;t.notes?(this.el.innerHTML="",t.notes.each(function(e){var t=MM.ui.icon({name:"pen",size:14,color:"grey-lighter"}),i=new Element("span",{class:"ellipsis label ml-5px maxw-240"}).update(e.title.escapeHTML()),o=new Element("a",{href:"#",className:"h-flex-row pv-8 c-default",title:new Date(e.updated).toUIString(!0)}).insert(t);o.appendChild(i),o.onclick=this.attachNote.bind(this,e,n);var s=new Element("li",{id:"note_evernote_"+e.id,className:"ph-10 bb-1 bc-grey3"});s.appendChild(o),this.el.appendChild(s)}.bind(this))):t.error&&t.error.code&&407==t.error.code&&"Authentication Needed"==t.error.message?window.location.href=t.error.url:this.showError()}.bind(this)})},closeDialog:function(){return Windows.close("upload"),!1},attachNote:function(e,t){return sideBar.attachments.onEvernoteAttach(e,t),this.closeDialog()},showLoading:function(){this.el.insert(MM.ui.LoadingSpinner(64))},showError:function(){this.el.innerHTML='<div class="m-10">'+I18n.t("js.an_error_occurred")+"<div>"}}},uLj8:function(e,t){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}MM.debug={on:!1,log:function(e,t){if(MM.debug.on)if("object"==i(e)&&(e=MM.debug.obj2txt(e)),t||"undefined"==typeof console||"function"!=typeof console.log){if(!mm$("html_console")){var n=new Element("div",{id:"html_console"}).setStyle({position:"absolute",top:"50px",left:"10px",width:"340px",height:"100px",zIndex:"9999",backgroundColor:"#ffc",padding:"5px",fontSize:"11px",lineHeight:"11px",overflowY:"scroll"});document.body.appendChild(n)}mm$("html_console").innerHTML+=e+"<br/>"}else console.log(e)},profile:function(e,t){MM.debug.on&&("undefined"!=typeof console&&console.profile?t?console.profileEnd(e):console.profile(e):t?n((new Date).getTime()-ieTime+" ms"):ieTime=(new Date).getTime())},obj2txt:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];t+=n+" ("+i(n)+") = ","string"==typeof e[n]?o+=e[n]:null!=o&&o.toString&&(t+=o.toString()),t+="\n"}return t},startPopulating:function(e){this.populate_interval=setInterval(MM.debug.addNode,e>0?e:2e3)},stopPopulating:function(){clearInterval(this.populate_interval)},addNode:function(){var e=[];for(var t in tree.getNodes())e.push(tree.nodes[t]);var i=e[Math.floor(Math.random()*e.length)];i&&(i._listener.select(),canvas.onAdd(),App.activeIPE._textArea.value="a",canvas.selected.select(null,null,!0))}};var n=MM.debug.log;"www.mindmeister.com"==window.location.hostname&&"undefined"!=typeof console&&"function"==typeof console.log&&console.log("Inspecting web pages, huh? At Meister we're looking for people like you, to join us as web developers (JavaScript - React and Redux) in the beautiful city of Vienna, Austria. If you're interested please contact jobs@meisterlabs.com!"),MM.diagnostics={IMG_SIZE:1336,THRESHOLD:2e3,dialogContent:function(){return'<style type="text/css">.dialog table.table_window #dlg_diagnostics td, .dialog table.table_window #dlg_diagnostics th{ padding:5px; vertical-align: top;}#dlg_diagnostics table td { padding: 3px 0; vertical-align: top; }#dlg_diagnostics .img_speed img { vertical-align: -25%; }#dlg_diagnostics .diag_hidden { display: none; } </style><h2>Diagnose Connection</h2><div class="content nopadding nomargin"><div style="padding: 10px 20px 20px 20px;"><form accept-charset="UTF-8" action="/dialog/submit_diagnostics/'+tree.root.id+'" id="diagnostics_form" method="post"><input id="feedback_subject" name="feedback[subject]" type="hidden" value="Browser Diagnostics ('+(ServerData.isLoggedIn?users.selfUser.name:"Anonymous")+')"><input id="feedback_topic" name="feedback[topic]" type="hidden" value="Diagnostics"><input id="feedback_text" name="feedback[text]" type="hidden" value="Browser: '+navigator.userAgent+'<br/>JavaScript is disabled!<br/>"><div id="diagnostics_html"></div>'+(ServerData.isLoggedIn?'<p class="info c-lighter" style="width:510px;margin-top: 20px;">By submitting this information you help us improve MindMeister and find connection and compatibility issues.Please make sure you don\'t download large amounts of data from the internet while using MindMeister.</p>':"")+"</form></div></div>"},diagnosticsSubmit:function(){return mm$("diagnostics_text").value=mm$("diagnostics_html").innerHTML,MM.utils.setCookie("diagnostics_submitted",1,31),mm$("diagnostics_form").submit(),!0},clearDiagnosticsTimeouts:function(){for(var e=0;e<this.diagnosticTimeouts.length;e++)clearTimeout(this.diagnosticTimeouts[e]);return!0},speedTest:function(){var e=(new Date).getTime()-START_DL;mm$("download_speed")&&($("download_speed").update(Math.round(this.IMG_SIZE/(e/1e3),2)+" kB/s"),e<this.THRESHOLD?addClassName(mm$("download_speed"),"ok"):addClassName(mm$("download_speed"),"error"))},addImageTest:function(e,t,i){this.addResults("<tr><td width=180 align='right'><strong>"+t+" connection:</strong>&nbsp;</td><td id='"+e+"_test' class='img_speed'>loading...\x3c!----\x3e</td></tr>\n"),setTimeout(function(){this.TIMER[e]=(new Date).getTime();var t=this.imageTest.bind(this,e),n=new Image;n.onload=t,n.src=i+"?random="+Math.random(),setTimeout(t,this.THRESHOLD+1e3)}.bind(this),1e3)},imageTest:function(e){var t=(new Date).getTime()-this.TIMER[e],i=$(e+"_test");i&&!hasClassName(i,"done")&&(t<this.THRESHOLD?i.update('<row class="va-middle*"><cell class="w-25">'+MM.ui.icon({name:"checkmark",color:"white",size:12,consize:20,parentClasses:"bg-green rad-100%"})+"</cell><cell>Loaded in "+Math.round(t,2)+"ms</cell>"):i.update(MM.ui.icon({name:"error",size:20})+'<span class="c-red">Timed out</span>'),addClassName(i,"done"))},failRequest:function(e,t){var i=$("ajax_result_".concat(e,"_").concat(t));i&&!hasClassName(i,"success")&&(i.addClassName(i,"fail bg-red"),i.title="timed out")},makeTestRequest:function(e,t,i){var n={idea_id:tree.root.id,zoom_factor:.9},o={root:tree.root.id,rev:tree.revision,request_id:i+1,protocolVersion:ServerConnection.protocolVersion,data:Object.toJSON(n)};new Ajax.Request(e,{parameters:o,onSuccess:function(e){if(0===e.status)this.failRequest(t,i);else{var n=$("ajax_result_".concat(t,"_").concat(i));n&&!hasClassName(n,"fail")&&(n.addClassName(n,"success bg-green"),n.title=(new Date).getTime()-this.TIMER.ajax+" ms")}}.bind(this),onTimeout:this.failRequest.bind(this,t,i),onFailure:this.failRequest.bind(this,t,i)})},addResults:function(e){this.resultStr+=e},testConnection:function(){this.diagnosticTimeouts=[],this.TIMER=[],this.resultStr="<table style='margin-top:1em'>",this.addResults("<tr><td valign=top align=right class=tdbrdr><strong>Browser Version String:</strong>&nbsp;</td><td>"+navigator.userAgent+"</td></tr>\n"),this.addImageTest("google","Google","https://www.google.com/images/srpr/logo11w.png"),this.addImageTest("uk","UK","http://www.thetimes.co.uk/tto/public/img/the_times_460.gif"),this.addImageTest("de","DE","https://www.heise.de/icons/ho/heise_online_logo_top.gif"),this.addImageTest("mindmeister","MindMeister","https://www.mindmeister.com/images/products/mindmeister/background.png"),this.addResults("<tr><td width=180 align='right'><strong>AJAX speed:</strong>&nbsp;</td><td id='ajax_speed_mm'><row>"),this.TIMER.ajax=(new Date).getTime();for(var e=1;e<16;e++)this.addResults('<cell><div id="ajax_result_mm_'+e+'" class="s-12 rad-100% bg-grey4"></div></cell>'),this.makeTestRequest("/maps/poll","mm",e),this.diagnosticTimeouts.push(setTimeout(this.failRequest.bind(this,"mm",e),3e3));this.addResults("</row></td></tr>\n"),this.addResults("<tr class='diag_hidden'><td width=180 align='right'><strong>Source:</strong>&nbsp;</td><td>message link</td></tr>\n"),this.addResults("<tr class='diag_hidden'><td width=180 align='right'><strong>Request Log:</strong>&nbsp;</td><td>"+App.requestLog.join().replace(/\n/g,"<br/>")+"</td></tr>\n"),this.addResults("</table>\n"),mm$("diagnostics_html").innerHTML=this.resultStr},runDiagnostic:function(){var e={id:"dlg_diagnostics",windowParameters:{title:"Diagnose Connection",width:560,onShow:this.testConnection.bind(this)}};ServerData.isLoggedIn&&!ServerData.user.isAnonymous?(Object.extend(e,{buttonClass:"button",okLabel:"Submit to MindMeister",onOk:function(){this.clearDiagnosticsTimeouts(),this.diagnosticsSubmit()}.bind(this),onCancel:this.clearDiagnosticsTimeouts.bind(this)}),Dialog.confirm(this.dialogContent(),e)):Dialog.info(this.dialogContent(),e)}}},wcf2:function(e,t){MM.status={params:window.location.href.toQueryParams(),helpTopic:""}}},["AhJ9"]);